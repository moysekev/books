(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("WVRz"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("WVRz"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.J)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.D)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.k)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),m=function(t){var e=Object(o.I)(t),n=new o.d;n.update(e);var r=n.digest();return o.h.encodeByteArray(r)},g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=g.apply(null,i):n+="object"==typeof i?Object(o.J)(i):i,n+=" "}return n},v=null,y=!0,b=function(t,e){Object(o.f)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,v=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===y&&(y=!1,null===v&&!0===f.get("logging_enabled")&&b(!0)),v){var n=g.apply(null,t);v(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+g.apply(void 0,Object(i.f)(t));d.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+g.apply(void 0,Object(i.f)(t));throw d.error(n),new Error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+g.apply(void 0,Object(i.f)(t));d.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",O="[MAX_NAME]",k=function(t,e){if(t===e)return 0;if(t===I||e===O)return-1;if(e===I||t===O)return 1;var n=W(t),r=W(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},A=function(t,e){return t===e?0:t<e?-1:1},x=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.J)(e))},N=function(t){if("object"!=typeof t||null===t)return Object(o.J)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.J)(e[i]),r+=":",r+=N(t[e[i]]);return r+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function P(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var D,j,L,M,F,V,U,q,B,H,z=function(t){var e,n,r,i,s;Object(o.f)(!S(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},K=new RegExp("^-?(0*)\\d{1,10}$"),W=function(t){if(K.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},G=function(t){try{t()}catch(e){setTimeout(function(){throw T("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},$=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Q=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=k(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),J=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.H)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.H)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.H)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Y="firebaseio.com",X="websocket",Z="long_polling",tt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.f)("string"==typeof t,"typeof type must == string"),Object(o.f)("object"==typeof e,"typeof params must == object"),t===X)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Z)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return P(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),et=function(t,e){var n=nt(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tt(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new Q(n.pathString)}},nt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):T("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),n=e.substring(m+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},rt=/[\[\].#$\/\u0000-\u001F\u007F]/,it=/[\[\].#$\u0000-\u001F\u007F]/,ot=10485760,st=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},ut=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&Object(o.k)(t,".sv")},ct=function(t,e,n,r,i){i&&void 0===n||lt(Object(o.o)(t,e,i),n,r)},lt=function(t,e,n){var r=n instanceof Q?new J(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(S(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>ot/3&&Object(o.H)(e)>ot)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(P(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!st(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),lt(t,n,r),r.pop()}),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ht=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.o)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];P(n,function(t,e){var n=new Q(t);if(lt(s,e,r.child(n)),".priority"===n.getBack()&&!ut(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!st(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Q.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ft=function(t,e,n,r){if(!r||void 0!==n){if(S(n))throw new Error(Object(o.o)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ut(n))throw new Error(Object(o.o)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.o)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mt=function(t,e,n,r){if(!(r&&void 0===n||at(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),mt(t,e,n,r)},vt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},yt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!st(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),at(t)}(r))throw new Error(Object(o.o)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.o)(t,e,r)+"must be a boolean.")},_t=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.K)("OnDisconnect.cancel",0,1,arguments.length),Object(o.L)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.K)("OnDisconnect.remove",0,1,arguments.length),vt("OnDisconnect.remove",this.path_),Object(o.L)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.K)("OnDisconnect.set",1,2,arguments.length),vt("OnDisconnect.set",this.path_),ct("OnDisconnect.set",1,t,this.path_,!1),Object(o.L)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.K)("OnDisconnect.setWithPriority",2,3,arguments.length),vt("OnDisconnect.setWithPriority",this.path_),ct("OnDisconnect.setWithPriority",1,t,this.path_,!1),ft("OnDisconnect.setWithPriority",2,e,!1),Object(o.L)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.K)("OnDisconnect.update",1,2,arguments.length),vt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("OnDisconnect.update",1,t,this.path_,!1),Object(o.L)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),wt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.K)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Et=(D="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",j=0,L=[],function(t){var e,n=t===j;j=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=D.charAt(t%64),t=Math.floor(t/64);Object(o.f)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===L[e];e--)L[e]=0;L[e]++}else for(e=0;e<12;e++)L[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=D.charAt(L[e]);return Object(o.f)(20===i.length,"nextPushId: Length should be 20."),i}),Ct=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Tt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ct(I,t),r=new Ct(I,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ct.MIN},t}(),St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return M},set:function(t){M=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return k(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.g)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return new Ct(O,M)},e.prototype.makePost=function(t,e){return Object(o.f)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ct(t,M)},e.prototype.toString=function(){return".key"},e}(Tt),It=new St,Ot=function(t){return"number"==typeof t?"number:"+z(t):"string:"+t},kt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.f)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.k)(e,".sv"),"Priority must be a string or number.")}else Object(o.f)(t===F||t.isEmpty(),"priority of unexpected type.");Object(o.f)(t===F||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},At=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.f)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),kt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return V},set:function(t){V=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.f)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ot(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?z(this.value_):this.value_,this.lazyHash_=m(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.f)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.f)(i>=0,"Unknown leaf type: "+n),Object(o.f)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),xt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?k(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return new Ct(O,new At("[PRIORITY-POST]",q))},e.prototype.makePost=function(t,e){var n=U(t);return new Ct(e,new At("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Tt)),Nt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Rt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Dt.EMPTY_NODE,this.right=null!=o?o:Dt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Dt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Dt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Pt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Rt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Dt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Nt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Nt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Pt,t}(),jt=Math.log(2),Lt=function(){function t(t){this.count=parseInt(Math.log(t+1)/jt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Mt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Rt(s,o.node,Rt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Rt(s,o.node,Rt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Rt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Rt.BLACK):(a(h,Rt.BLACK),a(h,Rt.RED))}return o}(new Lt(t.length));return new Dt(r||e,o)},Ft={},Vt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.f)(Ft&&xt,"ChildrenNode.ts has not been loaded"),B=B||new t({".priority":Ft},{".priority":xt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.G)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Dt?e:null},t.prototype.hasIndex=function(t){return Object(o.k)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.f)(e!==It,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Ct.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Mt(s,e.getCompare()):Ft;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.E)(this.indexes_,function(t,i){var s=Object(o.G)(r.indexSet_,i);if(Object(o.f)(s,"Missing index implementation for "+i),t===Ft){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Ct.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Mt(a,s.getCompare())}return Ft}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Ct(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.E)(this.indexes_,function(t){if(t===Ft)return t;var r=n.get(e.name);return r?t.remove(new Ct(e.name,r)):t}),this.indexSet_)},t}();function Ut(t,e){return k(t.name,e.name)}function qt(t,e){return k(t,e)}var Bt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&kt(this.priorityNode_),this.children_.isEmpty()&&Object(o.f)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return H||(H=new t(new Dt(qt),null,Vt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||H},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?H:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.f)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ct(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?H:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.f)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(xt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Ot(this.getPriority().val())+":"),this.forEachChild(xt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":m(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ct(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ct(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ct(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ht?-1:0},t.prototype.withIndex=function(e){if(e===It||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===It||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(xt),r=e.getIterator(xt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===It?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Ht=new(function(t){function e(){return t.call(this,new Dt(qt),Bt.EMPTY_NODE,Vt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Bt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Bt));function zt(t,e){if(void 0===e&&(e=null),null===t)return Bt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.f)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new At(t,zt(e));if(t instanceof Array){var n=Bt.EMPTY_NODE;return P(t,function(e,r){if(Object(o.k)(t,e)&&"."!==e.substring(0,1)){var i=zt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(zt(e))}var r=[],i=!1;if(P(t,function(t,e){if("."!==t.substring(0,1)){var n=zt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ct(t,n)))}}),0===r.length)return Bt.EMPTY_NODE;var s=Mt(r,Ut,function(t){return t.name},qt);if(i){var a=Mt(r,xt.getCompare());return new Bt(s,zt(e),new Vt({".priority":a},{".priority":xt}))}return new Bt(s,zt(e),Vt.Default)}Object.defineProperties(Ct,{MIN:{value:new Ct(I,Bt.EMPTY_NODE)},MAX:{value:new Ct(O,Ht)}}),St.__EMPTY_NODE=Bt.EMPTY_NODE,At.__childrenNodeConstructor=Bt,F=Ht,q=Ht,U=zt;var Kt,Wt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?k(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return Ct.MAX},e.prototype.makePost=function(t,e){var n=zt(t);return new Ct(e,n)},e.prototype.toString=function(){return".value"},e}(Tt)),Gt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.f)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?k(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=zt(t),r=Bt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ct(e,r)},e.prototype.maxPost=function(){var t=Bt.EMPTY_NODE.updateChild(this.indexPath_,Ht);return new Ct(O,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Tt),$t=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.K)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.K)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.K)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.K)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.K)("DataSnapshot.child",0,1,arguments.length),e=String(e),mt("DataSnapshot.child",1,e,!1);var n=new Q(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,xt)},t.prototype.hasChild=function(t){Object(o.K)("DataSnapshot.hasChild",1,1,arguments.length),mt("DataSnapshot.hasChild",1,t,!1);var e=new Q(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.K)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.K)("DataSnapshot.forEach",1,1,arguments.length),Object(o.L)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),xt))})},t.prototype.hasChildren=function(){return Object(o.K)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.K)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.K)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Qt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.J)(this.snapshot.exportVal())},t}(),Jt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Yt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Qt("value",this,new $t(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Jt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Xt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.k)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Jt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.f)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Qt(t.type,this,new $t(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Zt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(Kt,"Reference.ts has not been loaded"),Kt},set:function(t){Kt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===It){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==I)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==O)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===xt){if(null!=e&&!ut(e)||null!=n&&!ut(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.f)(t.getIndex()instanceof Gt||t.getIndex()===Wt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.K)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.K)("Query.on",2,4,arguments.length),dt("Query.on",1,e,!1),Object(o.L)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Yt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Xt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.K)("Query.off",0,3,arguments.length),dt("Query.off",1,t,!0),Object(o.L)("Query.off",2,e,!0),Object(o.M)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Yt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Xt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.K)("Query.once",1,4,arguments.length),dt("Query.once",1,e,!1),Object(o.L)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.K)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.K)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.K)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');mt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Q(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Gt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.K)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(It);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.K)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(xt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.K)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Wt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.startAt",0,2,arguments.length),ct("Query.startAt",1,e,this.path,!0),pt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.endAt",0,2,arguments.length),ct("Query.endAt",1,e,this.path,!0),pt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.K)("Query.equalTo",1,2,arguments.length),ct("Query.equalTo",1,t,this.path,!1),pt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.K)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.K)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=N(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.K)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.L)(t,3,r.cancel,!0),r.context=n,Object(o.M)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.o)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),te=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ee=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ne=function(t,e,n){return t&&"object"==typeof t?(Object(o.f)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?re(t[".sv"],e,n):"object"==typeof t[".sv"]?ie(t[".sv"],e):void Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},re=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.f)(!1,"Unexpected server value: "+t)}},ie=function(t,e,n){t.hasOwnProperty("increment")||Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.f)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.f)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},oe=function(t,e,n,r){return ae(e,new ee(n,t),r)},se=function(t,e,n){return ae(t,new te(e),n)};function ae(t,e,n){var r,i=t.getPriority().val(),o=ne(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ne(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new At(a,zt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new At(o))),u.forEachChild(xt,function(t,i){var o=ae(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var ue,ce,le=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(xt,function(t,e){n.remember(new Q(t),e)}),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new Q(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),he=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),fe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.f)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),de=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=he.ACK_USER_WRITE,this.source=fe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.f)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Q(e));return new t(Q.Empty,n,this.revert)}return Object(o.f)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),pe=function(){function t(t,e){void 0===e&&(ue||(ue=new Dt(A)),e=ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return P(e,function(t,e){n=n.set(new Q(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Q.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new Q(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(Q.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Q.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Q.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(Q.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),me=function(){function t(t,e){this.source=t,this.path=e,this.type=he.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Q.Empty):new t(this.source,this.path.popFront())},t}(),ge=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=he.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Q.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=he.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Q(e));return n.isEmpty()?null:n.value?new ge(this.source,Q.Empty,n.value):new t(this.source,Q.Empty,n)}return Object(o.f)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ye=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),be=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new ye(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new ye(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ye(Bt.EMPTY_NODE,!1,!1),new ye(Bt.EMPTY_NODE,!1,!1)),t}(),_e=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),we=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.f)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(_e.childRemovedChange(e,a)):Object(o.f)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(_e.childAddedChange(e,n)):s.trackChildChange(_e.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(xt,function(t,r){e.hasChild(t)||n.trackChildChange(_e.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(xt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(_e.childChangedChange(e,r,i))}else n.trackChildChange(_e.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Bt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ee=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.f)(e===_e.CHILD_ADDED||e===_e.CHILD_CHANGED||e===_e.CHILD_REMOVED,"Only child changes supported for tracking"),Object(o.f)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===_e.CHILD_ADDED&&i===_e.CHILD_REMOVED)this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_ADDED)this.changeMap.delete(n);else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_CHANGED)this.changeMap.set(n,_e.childRemovedChange(n,r.oldSnap));else if(e===_e.CHILD_CHANGED&&i===_e.CHILD_ADDED)this.changeMap.set(n,_e.childAddedChange(n,t.snapshotNode));else{if(e!==_e.CHILD_CHANGED||i!==_e.CHILD_CHANGED)throw Object(o.g)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ce=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Te=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ye(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Se=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Ie=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.f)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.f)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Ee;if(n.type===he.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.f)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===he.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.f)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===he.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==he.LISTEN_COMPLETE)throw Object(o.g)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new Se(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(_e.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.f)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Bt?c:Bt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(o.f)(1===e.getLength(),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):s.getNode()}else{var m=e.popFront(),g=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);g=null!=v?s.getNode().getImmediateChild(f).updateChild(m,v):s.getNode().getImmediateChild(f)}else g=n.calcCompleteChild(f,t.getServerCache());a=null!=g?this.filter_.updateChild(s.getNode(),f,g,m,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,Ce,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),m=new Te(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,m,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Te(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Bt.EMPTY_NODE}if(f.equals(d))s=t;else{var m=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(m,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:pe.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new Q(e),h,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new Q(e),f,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=pe.Empty;return a.getNode().forEachChild(It,function(t,e){u=u.set(new Q(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=pe.Empty;return n.foreach(function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ce,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Te(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.f)(h instanceof Bt,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Bt.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Q.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Oe=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===_e.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(_e.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,_e.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,_e.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,_e.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,_e.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,_e.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter(function(t){return t.type===e});s.sort(this.compareChanges_.bind(this)),s.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.g)("Should only compare child_ events.");var n=new Ct(t.childName,t.snapshotNode),r=new Ct(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),ke=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new we(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ie(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Bt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Bt.EMPTY_NODE,s.getNode(),null),c=new ye(a,o.isFullyInitialized(),r.filtersNodes()),l=new ye(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new be(l,c),this.eventGenerator_=new Oe(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.f)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===he.MERGE&&null!==t.source.queryId&&(Object(o.f)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.f)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.f)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(xt,function(t,e){n.push(_e.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(_e.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Ae=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(ce,"Reference.ts has not been loaded"),ce},set:function(t){Object(o.f)(!ce,"__referenceConstructor has already been defined"),ce=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.f)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Bt?(a=n.calcCompleteEventChildren(r),u=!1):(a=Bt.EMPTY_NODE,u=!1);var c=new be(new ye(a,u,!1),new ye(r,i,!1));s=new ke(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(i.e)(f.value,2),m=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(m),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(g){o={error:g}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),xe=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new pe(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Q.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new pe(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return P(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,pe.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Q.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(xt,function(e,n){t.push(new Ct(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Ct(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new pe(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return Ne(Q.Empty,this.writeTree_,t)},t.Empty=new t(new pe(null)),t}();function Ne(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.f)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ne(t.child(e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}var Re=function(){function t(){this.visibleWrites_=xe.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Pe(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.f)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.f)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.f)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):P(r.children,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(Q.Empty)?t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e).apply(n||Bt.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(Q.Empty)?a.apply(n||Bt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Bt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(xt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(xt,function(t,e){var r=i.childCompoundWrite(new Q(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.f)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var s=this.visibleWrites_.childCompoundWrite(i);return s.isEmpty()?r.getChild(e):s.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(Q.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Q.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=xe.Empty,i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?(u=Q.relativePath(n,a),r=r.addWrite(u,s.snap)):a.contains(n)&&(u=Q.relativePath(a,n),r=r.addWrite(Q.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.g)("WriteRecord should have .snap or .children");if(n.contains(a))u=Q.relativePath(n,a),r=r.addWrites(u,s.children);else if(a.contains(n))if((u=Q.relativePath(a,n)).isEmpty())r=r.addWrites(Q.Empty,s.children);else{var c=Object(o.G)(s.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(Q.Empty,l)}}}}}return r},t}(),Pe=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),De=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=pe.Empty,this.pendingWriteTree_=new Re,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ge(fe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=pe.fromObject(e);return this.applyOperationToSyncPoints_(new ve(fe.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=pe.Empty;return null!=n.snap?r=r.set(Q.Empty,!0):P(n.children,function(t,e){r=r.set(new Q(t),e)}),this.applyOperationToSyncPoints_(new de(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ge(fe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=pe.fromObject(e);return this.applyOperationToSyncPoints_(new ve(fe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new me(fe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Q.relativePath(s,e),c=new ge(fe.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Q.relativePath(s,e),c=pe.fromObject(n),l=new ve(fe.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Q.relativePath(o,e),u=new me(fe.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=Q.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(Q.Empty)):(u=new Ae,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Bt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(Q.Empty);n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.f)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var m=d[p],g=m.getQuery(),v=this.createListenerForView_(m);this.listenProvider_.startListening(t.queryForListening_(g),this.tagForQuery_(g),v.hashFn,v.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=Q.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),P(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.f)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),P(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Bt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.f)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Q(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.f)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Q.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Q.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Q.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Q.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Q.Empty));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),je=function(){function t(){this.rootNode_=Bt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Le=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.k)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.m)(this.counters_)},t}(),Me=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Le),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Fe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&P(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Ve=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Fe(t);var n=1e4+2e4*Math.random();$(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;P(e,function(e,i){i>0&&Object(o.k)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),$(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ue=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new qe(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),qe=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();v&&_("event: "+e.toString()),G(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Be=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.f)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.f)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),He=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Be),ze=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.x)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Be),Ke=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&G(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),We="start",Ge="close",$e=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Me.getCollection(e),this.urlFn=function(t){return e.connectionURL(Z,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ke(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.z)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Qe(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===We)n.id=s,n.password=a;else{if(o!==Ge)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Y)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.z)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.i)(e),r=R(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.z)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.J)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Qe=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.z)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.z)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Je="";function Ye(t){Je=t}var Xe=null;"undefined"!=typeof MozWebSocket?Xe=MozWebSocket:"undefined"!=typeof WebSocket&&(Xe=WebSocket);var Ze=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Me.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.z)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Y)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(X,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.z)()){var r={headers:{"User-Agent":"Firebase/5/"+Je+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Xe(this.connURL,[],r)}else this.mySock=new Xe(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Xe&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.D)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.f)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),tn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[$e,Ze]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Ze&&Ze.isAvailable(),s=o&&!Ze.previouslyFailed();if(e.webSocketOnly&&(o||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ze];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),en=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new tn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=$(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=x("t",t),n=x("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=x("t",t),n=x("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=x("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),nn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),rn=1e3,on=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=rn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.z)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),He.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ze.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.J)(i)),Object(o.f)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.f)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.k)(t,"w")){var n=Object(o.G)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.q)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.C)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.J)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.J)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.f)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=rn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.f)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new en(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){T(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&T(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.u)(this.interruptReasons_)&&(this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return N(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Q(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.z)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Je.replace(/\./g,"-")]=1,Object(o.x)()?t["framework.cordova"]=1:Object(o.A)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ze.getInstance().currentlyOnline();return Object(o.u)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(nn),sn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.f)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.G)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.F)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.D)(u.responseText)}catch(e){T("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&T("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(nn),an="repo_interrupt",un=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new le,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Me.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new sn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.J)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new on(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=Me.getOrCreateReporter(this.repoInfo_,function(){return new Ve(t.stats_,t.server_)}),this.transactionsInit_(),this.infoData_=new je,this.infoSyncTree_=new De({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new De({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Q(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.E)(e,function(t){return zt(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=zt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.E)(e,function(t){return zt(t)});s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=zt(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;P(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new Q("/.info/"+t),r=zt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then(function(n){var r=zt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new $t(r,t.getRef(),t.getQueryParams().getIndex()))},function(n){e.log_("get for query "+Object(o.J)(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new $t(r,t.getRef(),t.getQueryParams().getIndex()))})},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=zt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=se(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||T("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(P(e,function(e,n){i=!1,s[e]=oe(t.child(e),zt(n),r.serverSyncTree_,o)}),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||T("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)}),P(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new le;this.onDisconnect_.forEachTree(Q.Empty,function(r,i){var o=oe(r,i,t.serverSyncTree_,e);n.remember(r,o)});var r=[];n.forEachTree(Q.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new le,this.eventQueue_.raiseEventsForChangedPath(Q.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=zt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=zt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.u)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&P(e,function(e,n){var i=zt(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(an)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(an)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Fe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);P(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&G(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new _n(this))},enumerable:!1,configurable:!0}),t}(),cn=function(){function t(e){this.indexedFilter_=new we(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ct(e,n))||(n=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Bt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Bt.EMPTY_NODE);var i=this;return e.forEachChild(xt,function(t,e){i.matches(new Ct(t,e))||(r=r.updateImmediateChild(t,Bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ln=function(){function t(t){this.rangedFilter_=new cn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ct(e,n))||(n=Bt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Bt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Bt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Bt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.f)(u.numChildren()===this.limit_,"");var c=new Ct(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(_e.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(_e.childRemovedChange(e,f));var m=u.updateImmediateChild(e,Bt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(_e.childAddedChange(d.name,d.node)),m.updateImmediateChild(d.name,d.node)):m}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(_e.childRemovedChange(l.name,l.node)),i.trackChildChange(_e.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Bt.EMPTY_NODE)):t},t}(),hn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:O},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.f)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==xt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===xt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new we(this.getIndex()):this.hasLimit()?new ln(this):new cn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===xt?e=n.PRIORITY_INDEX:this.index_===Wt?e=n.VALUE_INDEX:this.index_===It?e=n.KEY_INDEX:(Object(o.f)(this.index_ instanceof Gt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.J)(e),this.startSet_&&(r[n.START_AT]=Object(o.J)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.J)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.J)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.J)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),fn=function(t){function e(e,n){if(!(e instanceof un))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,hn.DEFAULT,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.K)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.K)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Q||(null===this.path.getFront()?gt("Reference.child",1,t,!1):mt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.K)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.K)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.K)("Reference.set",1,2,arguments.length),vt("Reference.set",this.path),ct("Reference.set",1,t,this.path,!1),Object(o.L)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.K)("Reference.update",1,2,arguments.length),vt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("Reference.update",1,t,this.path,!1),Object(o.L)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.K)("Reference.setWithPriority",2,3,arguments.length),vt("Reference.setWithPriority",this.path),ct("Reference.setWithPriority",1,t,this.path,!1),ft("Reference.setWithPriority",2,e,!1),Object(o.L)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.K)("Reference.remove",0,1,arguments.length),vt("Reference.remove",this.path),Object(o.L)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.K)("Reference.transaction",1,3,arguments.length),vt("Reference.transaction",this.path),Object(o.L)("Reference.transaction",1,t,!1),Object(o.L)("Reference.transaction",2,e,!0),bt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new wt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.K)("Reference.setPriority",1,2,arguments.length),vt("Reference.setPriority",this.path),ft("Reference.setPriority",1,t,!1),Object(o.L)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.K)("Reference.push",0,2,arguments.length),vt("Reference.push",this.path),ct("Reference.push",1,t,this.path,!0),Object(o.L)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Et(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return vt("Reference.onDisconnect",this.path),new _t(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Zt);Zt.__referenceConstructor=fn,Ae.__referenceConstructor=fn;var dn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),pn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new dn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Q?e:new Q(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.G)(r.node_.children,i)||new dn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.f)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;P(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new Q(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.k)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),mn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});un.MAX_TRANSACTION_RETRIES_=25,un.prototype.transactionsInit_=function(){this.transactionQueueTree_=new pn},un.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new fn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new $t(a.currentInputSnapshot,new fn(this,a.path),xt);a.onComplete(null,!1,l)}}else{lt("transaction failed: Data returned ",c,a.path),a.status=mn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(o.k)(c,".priority")?(d=Object(o.G)(c,".priority"),Object(o.f)(ut(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||Bt.EMPTY_NODE).getPriority().val(),d=d;var m=this.generateServerValues(),g=zt(c,d),v=se(g,u,m);a.currentOutputSnapshotRaw=g,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},un.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Bt.EMPTY_NODE},un.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.f)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===mn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},un.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.f)(c.status===mn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=mn.SENT,c.retryCount++;var l=Q.relativePath(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=mn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new fn(n,e[s].path),c=new $t(a,u,xt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)G(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===mn.SENT_NEEDS_ABORT?mn.NEEDS_ABORT:mn.RUN;else for(T("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=mn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},un.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},un.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===mn.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=Q.relativePath(e,a.path),c=!1,l=void 0;if(Object(o.f)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===mn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===mn.RUN)if(a.retryCount>=un.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){lt("transaction failed: Data returned ",f,a.path);var d=zt(f);"object"==typeof f&&null!=f&&Object(o.k)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,m=this.generateServerValues(),g=se(d,h,m);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,g,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=mn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var v=new fn(this,t[s].path),y=new $t(t[s].currentInputSnapshot,v,xt);n.push(t[s].onComplete.bind(null,null,!1,y))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)G(n[s]);this.sendReadyTransactions_()}},un.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},un.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},un.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},un.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==mn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},un.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},un.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===mn.SENT_NEEDS_ABORT||(e[s].status===mn.SENT?(Object(o.f)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=mn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.f)(e[s].status===mn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)G(n[s])}};var gn,vn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';T(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),yn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),bn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return gn||(gn=new t),gn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new tt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new yn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=et(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=et(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new yn:new vn(t,e);return yt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||C("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.G)(this.repos_,t.app.name);e&&Object(o.G)(e,t.key)===t||C("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.G)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.G)(r,t.toURLString());return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new un(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),_n=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.checkDeleted_("delete"),bn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof un||C("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new fn(this.repo_,Q.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?C("Cannot call useEmulator() after instance has already been initialized."):bn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.K)("database.ref",0,1,arguments.length),t instanceof fn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.K)(e,1,1,arguments.length);var n=et(t,this.repo_.repoInfo_.nodeAdmin);yt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||C(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&C("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.K)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.K)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),wn=Object.freeze({__proto__:null,forceLongPolling:function(){Ze.forceDisallow(),$e.forceAllow()},forceWebSockets:function(){$e.forceDisallow()},isWebSocketsAvailable:function(){return Ze.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Ye(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:bn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),En=on;on.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},on.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Cn=Object.freeze({__proto__:null,DataConnection:En,RealTimeConnection:en,hijackHash:function(t){var e=on.prototype.put;return on.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){on.prototype.put=e}},ConnectionTarget:tt,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){bn.getInstance().forceRestClient(t)}}),Tn=_n.ServerValue;!function(e){Ye(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return bn.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:fn,Query:Zt,Database:_n,DataSnapshot:$t,enableLogging:b,INTERNAL:wn,ServerValue:Tn,TEST_ACCESS:Cn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.8.1"),Object(o.z)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},WVRz:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,s){n(i=t[e].apply(t,r)).then(o,s)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function s(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function a(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function p(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,c].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new d(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new p(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return O}),n.d(e,"c",function(){return I}),n.d(e,"d",function(){return U}),n.d(e,"e",function(){return S}),n.d(e,"f",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return u}),n.d(e,"j",function(){return J}),n.d(e,"k",function(){return j}),n.d(e,"l",function(){return q}),n.d(e,"m",function(){return l}),n.d(e,"n",function(){return h}),n.d(e,"o",function(){return K}),n.d(e,"p",function(){return d}),n.d(e,"q",function(){return D}),n.d(e,"r",function(){return g}),n.d(e,"s",function(){return v}),n.d(e,"t",function(){return b}),n.d(e,"u",function(){return M}),n.d(e,"v",function(){return _}),n.d(e,"w",function(){return C}),n.d(e,"x",function(){return p}),n.d(e,"y",function(){return m}),n.d(e,"z",function(){return E}),n.d(e,"A",function(){return y}),n.d(e,"B",function(){return w}),n.d(e,"C",function(){return P}),n.d(e,"D",function(){return x}),n.d(e,"E",function(){return F}),n.d(e,"F",function(){return V}),n.d(e,"G",function(){return L}),n.d(e,"H",function(){return Q}),n.d(e,"I",function(){return $}),n.d(e,"J",function(){return N}),n.d(e,"K",function(){return z}),n.d(e,"L",function(){return W}),n.d(e,"M",function(){return G}),n.d(e,"N",function(){return T});var r=n("WVRz"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function g(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function y(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return d().indexOf("Electron/")>=0}function _(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function E(){return!1}function C(){return"indexedDB"in self&&null!=indexedDB}function T(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function S(){return!(!navigator||!navigator.cookieEnabled)}var I=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,O.prototype.create),o}return Object(r.c)(e,t),e}(Error),O=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?k(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new I(i,a,r);return u},t}();function k(t,e){return t.replace(A,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var A=/\{\$([^}]+)}/g;function x(t){return JSON.parse(t)}function N(t){return JSON.stringify(t)}var R=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=x(c(o[0])||""),n=x(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},P=function(t){var e=R(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},D=function(t){var e=R(t).claims;return"object"==typeof e&&!0===e.admin};function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function M(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function F(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function V(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var U=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new B(t,e);return n.subscribe.bind(n)}var B=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function H(){}var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function K(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function W(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(K(t,e,r)+"must be a valid function.")}function G(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(K(t,e,r)+"must be a valid context object.")}var $=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Q=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function J(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("WVRz"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),m=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.m)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return u},"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.k)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(u.join(" "))}c(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.k)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.n)(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var d=Object(o.h)(Object.keys(e)),m=d.next();!m.done;m=d.next())e[m.value]._addComponent(a)}catch(g){u={error:g}}finally{try{m&&!m.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(m);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.n)(e,t)},createSubscribe:s.l,ErrorFactory:s.b,deepExtend:s.n}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.r)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.y)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=g;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new v(t)},"PRIVATE")),t.registerVersion(h,"0.6.13",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function s(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},u=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const l=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(Ex){e=Ex instanceof l?f(Ex.errors):[Ex]}}if(u(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(c(n))try{n.unsubscribe()}catch(Ex){e=e||[],Ex instanceof l?e=e.concat(f(Ex.errors)):e.push(Ex)}}}if(e)throw new l(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function f(t){return t.reduce((t,e)=>t.concat(e instanceof l?e.errors:e),[])}const d=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,t,e,n)}}[d](){return this}static create(t,e,n){const r=new p(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class m extends p{constructor(t,e,n,i){let o;super(),this._parentSubscriber=t;let s=this;r(e)?o=e:e&&(o=e.next,n=e.error,i=e.complete,e!==a&&(s=Object.create(e),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const g=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function v(t){return t}let y=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof p)return t;if(t[d])return t[d]()}return t||e||n?new p(t,e,n):new p(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=b(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[g](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?v:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=b(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function b(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const _=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class w extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class E extends p{constructor(t){super(t),this.destination=t}}let C=(()=>{class t extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[d](){return new E(this)}lift(t){const e=new T(this,this);return e.operator=t,e}next(t){if(this.closed)throw new _;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new _;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new _;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new _;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new _;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new w(this,t))}asObservable(){const t=new y;return t.source=this,t}}return t.create=(t,e)=>new T(t,e),t})();class T extends C{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function S(t){return t&&"function"==typeof t.schedule}function I(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new O(t,e))}}class O{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new k(t,this.project,this.thisArg))}}class k extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const A=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function x(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const N=x(),R=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function P(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const D=t=>{if(t&&"function"==typeof t[g])return r=t,t=>{const e=r[g]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(R(t))return A(t);if(P(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s),t);if(t&&"function"==typeof t[N])return e=t,t=>{const n=e[N]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,r};function j(t,e){return new y(n=>{const r=new h;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function L(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[g]}(t))return function(t,e){return new y(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[g]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(P(t))return function(t,e){return new y(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(R(t))return j(t,e);if(function(t){return t&&"function"==typeof t[N]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new y(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[N](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof y?t:new y(D(t))}class M extends p{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class F extends p{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function V(t,e){if(!e.closed)return t instanceof y?t.subscribe(e):D(t)(e)}function U(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(U((n,r)=>L(t(n,r)).pipe(I((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new q(t,n)))}class q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new B(t,this.project,this.concurrent))}}class B extends F{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new M(this),n=this.destination;n.add(e);const r=V(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function H(t=Number.POSITIVE_INFINITY){return U(v,t)}function z(t,e){return e?j(t,e):new y(A(t))}function K(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return S(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof y?t[0]:H(e)(z(t,n))}function W(){return function(t){return t.lift(new G(t))}}class G{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new $(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class $ extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Q extends y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new Y(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return W()(this)}}const J=(()=>{const t=Q.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Y extends E{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function X(){return new C}function Z(){return t=>{return W()((e=X,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,J);return r.source=t,r.subjectFactory=n,r})(t));var e}}function tt(t){for(let e in t)if(t[e]===tt)return e;throw Error("Could not find renamed property on target object.")}function et(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function nt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(nt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function rt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const it=tt({__forward_ref__:tt});function ot(t){return t.__forward_ref__=ot,t.toString=function(){return nt(this())},t}function st(t){return at(t)?t():t}function at(t){return"function"==typeof t&&t.hasOwnProperty(it)&&t.__forward_ref__===ot}function ut(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ct(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function lt(t){return ht(t,dt)||ht(t,mt)}function ht(t,e){return t.hasOwnProperty(e)?t[e]:null}function ft(t){return t&&(t.hasOwnProperty(pt)||t.hasOwnProperty(gt))?t[pt]:null}const dt=tt({"\u0275prov":tt}),pt=tt({"\u0275inj":tt}),mt=tt({ngInjectableDef:tt}),gt=tt({ngInjectorDef:tt});var vt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let yt;function bt(t){const e=yt;return yt=t,e}function _t(t,e,n){const r=lt(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&vt.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${nt(t)}]`)}function wt(t){return{toString:t}.toString()}var Et=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),Ct=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const Tt="undefined"!=typeof globalThis&&globalThis,St="undefined"!=typeof window&&window,It="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ot="undefined"!=typeof global&&global,kt=Tt||Ot||St||It,At={},xt=[],Nt=tt({"\u0275cmp":tt}),Rt=tt({"\u0275dir":tt}),Pt=tt({"\u0275pipe":tt}),Dt=tt({"\u0275mod":tt}),jt=tt({"\u0275loc":tt}),Lt=tt({"\u0275fac":tt}),Mt=tt({__NG_ELEMENT_ID__:tt});let Ft=0;function Vt(t){return wt(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Et.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||xt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ct.Emulated,id:"c",styles:t.styles||xt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Ft++,n.inputs=zt(t.inputs,e),n.outputs=zt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Ut):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(qt):null,n})}function Ut(t){return Wt(t)||function(t){return t[Rt]||null}(t)}function qt(t){return function(t){return t[Pt]||null}(t)}const Bt={};function Ht(t){const e={type:t.type,bootstrap:t.bootstrap||xt,declarations:t.declarations||xt,imports:t.imports||xt,exports:t.exports||xt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&wt(()=>{Bt[t.id]=t.type}),e}function zt(t,e){if(null==t)return At;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Kt=Vt;function Wt(t){return t[Nt]||null}function Gt(t,e){const n=t[Dt]||null;if(!n&&!0===e)throw new Error(`Type ${nt(t)} does not have '\u0275mod' property.`);return n}const $t=20,Qt=10;function Jt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Yt(t){return Array.isArray(t)&&!0===t[1]}function Xt(t){return 0!=(8&t.flags)}function Zt(t){return 2==(2&t.flags)}function te(t){return 1==(1&t.flags)}function ee(t){return null!==t.template}function ne(t,e){return t.hasOwnProperty(Lt)?t[Lt]:null}class re extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function ie(t){return"string"==typeof t?t:null==t?"":String(t)}function oe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ie(t)}function se(t,e){const n=e?" in "+e:"";throw new re("201",`No provider for ${oe(t)} found${n}`)}class ae{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ue(){return ce}function ce(t){return t.type.prototype.ngOnChanges&&(t.setInput=he),le}function le(){const t=fe(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===At)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function he(t,e,n,r){const i=fe(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:At,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new ae(u&&u.currentValue,e,s===At),t[r]=e}function fe(t){return t.__ngSimpleChanges__||null}ue.ngInherit=!0;let de=void 0;function pe(t){return!!t.listen}const me={createRenderer:(t,e)=>void 0!==de?de:"undefined"!=typeof document?document:void 0};function ge(t){for(;Array.isArray(t);)t=t[0];return t}function ve(t,e){return ge(e[t])}function ye(t,e){return ge(e[t.index])}function be(t,e){return t.data[e]}function _e(t,e){const n=e[t];return Jt(n)?n:n[0]}function we(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ee(t){return 4==(4&t[2])}function Ce(t){return 128==(128&t[2])}function Te(t,e){return null==e?null:t[e]}function Se(t){t[18]=0}function Ie(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Oe={lFrame:$e(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ke(){return Oe.bindingsEnabled}function Ae(){return Oe.lFrame.lView}function xe(){return Oe.lFrame.tView}function Ne(t){Oe.lFrame.contextLView=t}function Re(){let t=Pe();for(;null!==t&&64===t.type;)t=t.parent;return t}function Pe(){return Oe.lFrame.currentTNode}function De(t,e){const n=Oe.lFrame;n.currentTNode=t,n.isParent=e}function je(){return Oe.lFrame.isParent}function Le(){Oe.lFrame.isParent=!1}function Me(){return Oe.isInCheckNoChangesMode}function Fe(t){Oe.isInCheckNoChangesMode=t}function Ve(){return Oe.lFrame.bindingIndex++}function Ue(t,e){const n=Oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,qe(e)}function qe(t){Oe.lFrame.currentDirectiveIndex=t}function Be(){return Oe.lFrame.currentQueryIndex}function He(t){Oe.lFrame.currentQueryIndex=t}function ze(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Ke(t,e,n){if(n&vt.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&vt.Host||(r=ze(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Oe.lFrame=Ge();return r.currentTNode=e,r.lView=t,!0}function We(t){const e=Ge(),n=t[1];Oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Ge(){const t=Oe.lFrame,e=null===t?null:t.child;return null===e?$e(t):e}function $e(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Qe(){const t=Oe.lFrame;return Oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Je=Qe;function Ye(){const t=Qe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Xe(){return Oe.lFrame.selectedIndex}function Ze(t){Oe.lFrame.selectedIndex=t}function tn(){const t=Oe.lFrame;return be(t.tView,t.selectedIndex)}function en(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function nn(t,e,n){sn(t,e,3,n)}function rn(t,e,n,r){(3&t[2])===n&&sn(t,e,n,r)}function on(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function sn(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(an(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function an(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const un=-1;class cn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function ln(t,e,n){const r=pe(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];fn(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function hn(t){return 3===t||4===t||6===t}function fn(t){return 64===t.charCodeAt(0)}function dn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||pn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function pn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function mn(t){return t!==un}function gn(t){return 32767&t}function vn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let yn=!0;function bn(t){const e=yn;return yn=t,e}let _n=0;function wn(t,e){const n=Cn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,En(r.data,t),En(e,null),En(r.blueprint,null));const i=Tn(t,e),o=t.injectorIndex;if(mn(i)){const t=gn(i),n=vn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function En(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Cn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Tn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return un;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return un}function Sn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Mt)&&(r=n[Mt]),null==r&&(r=n[Mt]=_n++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function In(t,e,n){if(n&vt.Optional)return t;se(e,"NodeInjector")}function On(t,e,n,r){if(n&vt.Optional&&void 0===r&&(r=null),0==(n&(vt.Self|vt.Host))){const i=t[9],o=bt(void 0);try{return i?i.get(e,r,n&vt.Optional):_t(e,r,n&vt.Optional)}finally{bt(o)}}return In(r,e,n)}function kn(t,e,n,r=vt.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Mt)?t[Mt]:void 0;return"number"==typeof e?e>=0?255&e:xn:e}(n);if("function"==typeof o){if(!Ke(e,t,r))return r&vt.Host?In(i,n,r):On(e,n,r,i);try{const t=o();if(null!=t||r&vt.Optional)return t;se(n)}finally{Je()}}else if("number"==typeof o){let i=null,s=Cn(t,e),a=un,u=r&vt.Host?e[16][6]:null;for((-1===s||r&vt.SkipSelf)&&(a=-1===s?Tn(t,e):e[s+8],a!==un&&jn(r,!1)?(i=e[1],s=gn(a),e=vn(a,e)):s=-1);-1!==s;){const t=e[1];if(Dn(o,s,t.data)){const t=Nn(s,e,n,i,r,u);if(t!==An)return t}a=e[s+8],a!==un&&jn(r,e[1].data[s+8]===u)&&Dn(o,s,e)?(i=t,s=gn(a),e=vn(a,e)):s=-1}}}return On(e,n,r,i)}const An={};function xn(){return new Ln(Re(),Ae())}function Nn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Rn(a,s,n,null==r?Zt(a)&&yn:r!=s&&0!=(3&a.type),i&vt.Host&&o===a);return null!==u?Pn(e,s,u,a):An}function Rn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&ee(t)&&t.type===n)return u}return null}function Pn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof cn){const s=i;s.resolving&&function(t,e){throw new re("200","Circular dependency in DI detected for "+t)}(oe(o[n]));const a=bn(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?bt(s.injectImpl):null;Ke(t,r,vt.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=ce(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&bt(u),bn(a),s.resolving=!1,Je()}}return i}function Dn(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function jn(t,e){return!(t&vt.Self||t&vt.Host&&e)}class Ln{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return kn(this._tNode,this._lView,t,void 0,e)}}function Mn(t){const e=t;if(at(t))return()=>{const t=Mn(st(e));return t?t():null};let n=ne(e);if(null===n){const t=ft(e);n=t&&t.factory}return n||null}function Fn(t){return wt(()=>{const e=t.prototype.constructor,n=e[Lt]||Mn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Lt]||Mn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Vn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(hn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Re(),t)}const Un="__parameters__";function qn(t,e,n){return wt(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Un)?t[Un]:Object.defineProperty(t,Un,{value:[]})[Un];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Bn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ut({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const Hn=new Bn("AnalyzeForEntryComponents"),zn=Function;function Kn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Kn(r,e)):e!==t&&e.push(r)}return e}function Wn(t,e){t.forEach(t=>Array.isArray(t)?Wn(t,e):e(t))}function Gn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function $n(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Qn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function Jn(t,e,n){let r=Xn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Yn(t,e){const n=Xn(t,e);if(n>=0)return t[1|n]}function Xn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const Zn=qn("Inject",t=>({token:t})),tr=qn("Optional"),er=qn("Self"),nr=qn("SkipSelf"),rr={},ir=/\n/gm,or="__source",sr=tt({provide:String,useValue:tt});let ar=void 0;function ur(t){const e=ar;return ar=t,e}function cr(t,e=vt.Default){if(void 0===ar)throw new Error("inject() must be called from an injection context");return null===ar?_t(t,void 0,e):ar.get(t,e&vt.Optional?null:void 0,e)}function lr(t,e=vt.Default){return(yt||cr)(st(t),e)}const hr=lr;function fr(t){const e=[];for(let n=0;n<t.length;n++){const r=st(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=vt.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof tr||"Optional"===i.ngMetadataName||i===tr?n|=vt.Optional:i instanceof nr||"SkipSelf"===i.ngMetadataName||i===nr?n|=vt.SkipSelf:i instanceof er||"Self"===i.ngMetadataName||i===er?n|=vt.Self:t=i instanceof Zn||i===Zn?i.token:i}e.push(lr(t,n))}else e.push(lr(r))}return e}let dr;function pr(t){var e;return(null===(e=function(){if(void 0===dr&&(dr=null,kt.trustedTypes))try{dr=kt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return dr}())||void 0===e?void 0:e.createHTML(t))||t}class mr{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see https://g.co/ng/security#xss)"}}class gr extends mr{getTypeName(){return"HTML"}}class vr extends mr{getTypeName(){return"Style"}}class yr extends mr{getTypeName(){return"Script"}}class br extends mr{getTypeName(){return"URL"}}class _r extends mr{getTypeName(){return"ResourceURL"}}function wr(t){return t instanceof mr?t.changingThisBreaksApplicationSecurity:t}function Er(t,e){const n=Cr(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Cr(t){return t instanceof mr&&t.getTypeName()||null}class Tr{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(pr(t),"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Sr{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=pr(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=pr(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Ir=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Or=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function kr(t){return(t=String(t)).match(Ir)||t.match(Or)?t:"unsafe:"+t}function Ar(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function xr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Nr=Ar("area,br,col,hr,img,wbr"),Rr=Ar("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Pr=Ar("rp,rt"),Dr=xr(Pr,Rr),jr=xr(Nr,xr(Rr,Ar("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xr(Pr,Ar("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Dr),Lr=Ar("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Mr=Ar("srcset"),Fr=xr(Lr,Mr,Ar("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ar("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Vr=Ar("script,style,template");class Ur{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!jr.hasOwnProperty(e))return this.sanitizedSomething=!0,!Vr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Fr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Lr[o]&&(s=kr(s)),Mr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>kr(t.trim())).join(", ")),this.buf.push(" ",e,'="',Hr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();jr.hasOwnProperty(e)&&!Nr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Hr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const qr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Br=/([^\#-~ |!])/g;function Hr(t){return t.replace(/&/g,"&amp;").replace(qr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Br,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let zr;function Kr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Wr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Gr(t){return t.ngDebugContext}function $r(t){return t.ngOriginalError}function Qr(t,...e){t.error(...e)}class Jr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Qr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Gr(t)?Gr(t):this._findContext($r(t)):null}_findOriginalError(t){let e=$r(t);for(;e&&$r(e);)e=$r(e);return e}}function Yr(t,e){t.__ngContext__=e}const Xr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(kt))();function Zr(t){return{name:"window",target:t.ownerDocument.defaultView}}function ti(t){return t instanceof Function?t():t}var ei=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function ni(t,e){return(void 0)(t,e)}function ri(t){const e=t[3];return Yt(e)?e[3]:e}function ii(t){return si(t[13])}function oi(t){return si(t[4])}function si(t){for(;null!==t&&!Yt(t);)t=t[4];return t}function ai(t,e,n,r,i){if(null!=r){let o,s=!1;Yt(r)?o=r:Jt(r)&&(s=!0,r=r[0]);const a=ge(r);0===t&&null!==n?null==i?mi(e,n,a):pi(e,n,a,i||null,!0):1===t&&null!==n?pi(e,n,a,i||null,!0):2===t?function(t,e,n){const r=vi(t,e);r&&function(t,e,n,r){pe(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==ge(n)&&ai(e,t,r,o,i);for(let s=Qt;s<n.length;s++){const i=n[s];Ti(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function ui(t,e,n){return pe(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function ci(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ie(i,-1)),n.splice(r,1)}function li(t,e){if(t.length<=Qt)return;const n=Qt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&ci(o,r),e>0&&(t[n-1][4]=r[4]);const s=$n(t,Qt+e);Ti(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function hi(t,e){if(!(256&e[2])){const n=e[11];pe(n)&&n.destroyNode&&Ti(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return fi(t[1],t);for(;e;){let n=null;if(Jt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Jt(e)&&fi(e[1],e),e=e[3];null===e&&(e=t),Jt(e)&&fi(e[1],e),n=e&&e[4]}e=n}}(e)}}function fi(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof cn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n){for(let t=0;t<n.length-1;t+=2)if("string"==typeof n[t]){const o=n[t+1],s="function"==typeof o?o(e):ge(e[o]),a=r[i=n[t+2]],u=n[t+3];"boolean"==typeof u?s.removeEventListener(n[t],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),t+=2}else{const e=r[i=n[t+1]];n[t].call(e)}if(null!==r)for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&pe(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Yt(e[3])){n!==e[3]&&ci(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function di(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===Ct.None||e===Ct.Emulated)return null}return ye(r,n)}(t,e.parent,n)}function pi(t,e,n,r,i){pe(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function mi(t,e,n){pe(t)?t.appendChild(e,n):e.appendChild(n)}function gi(t,e,n,r,i){null!==r?pi(t,e,n,r,i):mi(t,e,n)}function vi(t,e){return pe(t)?t.parentNode(e):e.parentNode}function yi(t,e,n){return bi(t,e,n)}let bi=function(t,e,n){return 40&t.type?ye(t,n):null};function _i(t,e,n,r){const i=di(t,r,e),o=e[11],s=yi(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)gi(o,i,n[a],s,!1);else gi(o,i,n,s,!1)}function wi(t,e){if(null!==e){const n=e.type;if(3&n)return ye(e,t);if(4&n)return Ei(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return wi(t,n);{const n=t[e.index];return Yt(n)?Ei(-1,n):ge(n)}}if(32&n)return ni(e,t)()||ge(t[e.index]);{const n=t[16],r=n[6],i=ri(n),o=r.projection[e.projection];return null!=o?wi(i,o):wi(t,e.next)}}return null}function Ei(t,e){const n=Qt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return wi(t,r)}return e[7]}function Ci(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Yr(ge(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Ci(t,e,n.child,r,i,o,!1),ai(e,t,i,a,o);else if(32&u){const s=ni(n,r);let u;for(;u=s();)ai(e,t,i,u,o);ai(e,t,i,a,o)}else 16&u?Si(t,e,r,n,i,o):ai(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Ti(t,e,n,r,i,o){Ci(n,r,t.firstChild,e,i,o,!1)}function Si(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)ai(e,t,i,a[u],o);else Ci(t,e,a,s[3],i,o,!0)}function Ii(t,e,n){pe(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Oi(t,e,n){pe(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ki(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Ai="ng-template";function xi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ki(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Ni(t){return 4===t.type&&t.value!==Ai}function Ri(t,e,n){return e===(4!==t.type||n?t.value:Ai)}function Pi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(hn(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Ri(t,u,n)||""===u&&1===e.length){if(Di(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!xi(t.attrs,c,n)){if(Di(r))return!1;s=!0}continue}const l=ji(8&r?"class":u,i,Ni(t),n);if(-1===l){if(Di(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ki(e,c,0)||2&r&&c!==t){if(Di(r))return!1;s=!0}}}}else{if(!s&&!Di(r)&&!Di(u))return!1;if(s&&Di(u))continue;s=!1,r=u|1&r}}return Di(r)||s}function Di(t){return 0==(1&t)}function ji(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Li(t,e,n=!1){for(let r=0;r<e.length;r++)if(Pi(t,e[r],n))return!0;return!1}function Mi(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Fi(t,e){return t?":not("+e.trim()+")":e}function Vi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Di(s)||(e+=Fi(o,i),i=""),r=s,o=o||!Di(r);n++}return""!==i&&(e+=Fi(o,i)),e}const Ui={};function qi(t){Bi(xe(),Ae(),Xe()+t,Me())}function Bi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&nn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&rn(e,r,0,n)}Ze(n)}function Hi(t,e){return t<<17|e<<2}function zi(t){return t>>17&32767}function Ki(t){return 2|t}function Wi(t){return(131068&t)>>2}function Gi(t,e){return-131069&t|e<<2}function $i(t){return 1|t}function Qi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];He(i),n.contentQueries(2,e[o],o)}}}function Ji(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Se(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Yi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Pe(),s=je(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Oe.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return De(o,!0),o}function Xi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Zi(t,e,n){We(e);try{const r=t.viewQuery;null!==r&&xo(1,r,n);const i=t.template;null!==i&&no(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Qi(t,e),t.staticViewQueries&&xo(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)So(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Ye()}}function to(t,e,n,r){const i=e[2];if(256==(256&i))return;We(e);const o=Me();try{Se(e),Oe.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&no(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&nn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&rn(e,n,0,null),on(e,0)}if(function(t){for(let e=ii(t);null!==e;e=oi(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ie(r,1),n[2]|=1024}}}(e),function(t){for(let e=ii(t);null!==e;e=oi(e))for(let t=Qt;t<e.length;t++){const n=e[t],r=n[1];Ce(n)&&to(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Qi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&nn(e,n)}else{const n=t.contentHooks;null!==n&&rn(e,n,1),on(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)Ze(~r);else{const i=r,o=n[++t],s=n[++t];Ue(o,i),s(2,e[i])}}}finally{Ze(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Co(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&xo(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&nn(e,n)}else{const n=t.viewHooks;null!==n&&rn(e,n,2),on(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ie(e[3],-1))}finally{Ye()}}function eo(t,e,n,r){const i=e[10],o=!Me(),s=Ee(e);try{o&&!s&&i.begin&&i.begin(),s&&Zi(t,e,r),to(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function no(t,e,n,r,i){const o=Xe();try{Ze(-1),2&r&&e.length>$t&&Bi(t,e,$t,Me()),n(r,i)}finally{Ze(o)}}function ro(t,e,n){if(Xt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function io(t,e,n){ke()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||wn(n,e),Yr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ee(r);o&&bo(e,n,r);const u=Pn(e,t,a,n);Yr(u,e),null!==s&&_o(0,a-i,u,r,0,s),o&&(_e(n.index,e)[8]=u)}}(t,e,n,ye(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Oe.lFrame.currentDirectiveIndex;try{Ze(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];qe(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||po(r,i)}}finally{Ze(-1),qe(s)}}(t,e,n))}function oo(t,e,n=ye){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function so(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ao(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ao(t,e,n,r,i,o,s,a,u,c){const l=$t+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ui);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function uo(t,e,n,r){const i=Ro(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Po(t).push(r,i.length-1))}function co(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function lo(t,e,n,r,i,o,s,a){const u=ye(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(jo(t,n,c,r,i),Zt(e)&&function(t,e){const n=_e(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,pe(o)?o.setProperty(u,r,i):fn(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function ho(t,e,n,r){let i=!1;if(ke()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Li(n,s.selectors,!1)&&(i||(i=[]),Sn(wn(n,e),t,s.type),ee(s)?(mo(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,vo(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Xi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=dn(n.mergedAttrs,c.hostAttrs),yo(t,n,e,u,c),go(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Ni(e)?null:wo(n,i);o.push(c),s=co(n,u,s),a=co(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new re("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=dn(n.mergedAttrs,n.attrs),i}function fo(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function po(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function mo(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function go(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ee(e)&&(n[""]=t)}}function vo(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function yo(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ne(i.type)),s=new cn(o,ee(i),null);t.blueprint[r]=s,n[r]=s,fo(t,e,0,r,Xi(t,n,i.hostVars,Ui),i)}function bo(t,e,n){const r=ye(e,t),i=so(n),o=t[10],s=Io(t,Ji(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function _o(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function wo(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Eo(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Co(t,e){const n=_e(e,t);if(Ce(n)){const t=n[1];80&n[2]?to(t,n,t.template,n[8]):n[5]>0&&To(n)}}function To(t){for(let n=ii(t);null!==n;n=oi(n))for(let t=Qt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];to(t,e,t.template,e[8])}else e[5]>0&&To(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=_e(e[n],t);Ce(r)&&r[5]>0&&To(r)}}function So(t,e){const n=_e(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Zi(r,n,n[8])}function Io(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Oo(t){for(;t;){t[2]|=64;const e=ri(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function ko(t,e,n){const r=e[10];r.begin&&r.begin();try{to(t,e,t.template,n)}catch(i){throw Do(e,i),i}finally{r.end&&r.end()}}function Ao(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=we(n),i=r[1];eo(i,r,i.template,n)}}(t[8])}function xo(t,e,n){He(0),e(t,n)}const No=(()=>Promise.resolve(null))();function Ro(t){return t[7]||(t[7]=[])}function Po(t){return t.cleanup||(t.cleanup=[])}function Do(t,e){const n=t[9],r=n?n.get(Jr,null):null;r&&r.handleError(e)}function jo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Lo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=rt(i,t):2==o&&(r=rt(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Mo=new Bn("INJECTOR",-1);class Fo{get(t,e=rr){if(e===rr){const e=new Error(`NullInjectorError: No provider for ${nt(t)}!`);throw e.name="NullInjectorError",e}return e}}const Vo=new Bn("Set Injector scope."),Uo={},qo={},Bo=[];let Ho=void 0;function zo(){return void 0===Ho&&(Ho=new Fo),Ho}function Ko(t,e=null,n=null,r){return new Wo(t,n,e||zo(),r)}class Wo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Wn(e,n=>this.processProvider(n,t,e)),Wn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Mo,Qo(void 0,this));const o=this.records.get(Vo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:nt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=rr,n=vt.Default){this.assertNotDestroyed();const r=ur(this);try{if(!(n&vt.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Bn)&&lt(t);e=n&&this.injectableDefInScope(n)?Qo(Go(t),Uo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&vt.Self?zo():this.parent).get(t,e=n&vt.Optional&&e===rr?null:e)}catch(Ex){if("NullInjectorError"===Ex.name){if((Ex.ngTempTokenPath=Ex.ngTempTokenPath||[]).unshift(nt(t)),r)throw Ex;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[or]&&i.unshift(e[or]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=nt(e);if(Array.isArray(e))i=e.map(nt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):nt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ir,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(Ex,t,"R3InjectorError",this.source)}throw Ex}finally{ur(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(nt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=st(t)))return!1;let r=ft(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=ft(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Wn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Wn(r,t=>this.processProvider(t,n,r||Bo))}}this.injectorDefTypes.add(o),this.records.set(o,Qo(r.factory,Uo));const a=r.providers;if(null!=a&&!s){const e=t;Wn(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Yo(t=st(t))?t:st(t&&t.provide);const i=function(t,e,n){return Jo(t)?Qo(void 0,t.useValue):Qo($o(t),Uo)}(t);if(Yo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Qo(void 0,Uo,!0),e.factory=()=>fr(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Uo&&(e.value=qo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Go(t){const e=lt(t),n=null!==e?e.factory:ne(t);if(null!==n)return n;const r=ft(t);if(null!==r)return r.factory;if(t instanceof Bn)throw new Error(`Token ${nt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=Qn(e,"?");throw new Error(`Can't resolve all parameters for ${nt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[dt]||t[mt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function $o(t,e,n){let r=void 0;if(Yo(t)){const e=st(t);return ne(e)||Go(e)}if(Jo(t))r=()=>st(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...fr(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>lr(st(t.useExisting));else{const e=st(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return ne(e)||Go(e);r=()=>new e(...fr(t.deps))}var i;return r}function Qo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Jo(t){return null!==t&&"object"==typeof t&&sr in t}function Yo(t){return"function"==typeof t}const Xo=function(t,e,n){return function(t,e=null,n=null,r){const i=Ko(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Zo=(()=>{class t{static create(t,e){return Array.isArray(t)?Xo(t,e,""):Xo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=rr,t.NULL=new Fo,t.\u0275prov=ut({token:t,providedIn:"any",factory:()=>lr(Mo)}),t.__NG_ELEMENT_ID__=-1,t})();function ts(t,e){en(we(t)[1],Re())}function es(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(ee(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ns(t.inputs),e.declaredInputs=ns(t.declaredInputs),e.outputs=ns(t.outputs);const n=i.hostBindings;n&&os(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&rs(t,o),s&&is(t,s),et(t.inputs,i.inputs),et(t.declaredInputs,i.declaredInputs),et(t.outputs,i.outputs),ee(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===es&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=dn(i.hostAttrs,n=dn(n,i.hostAttrs))}}(r)}function ns(t){return t===At?{}:t===xt?[]:t}function rs(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function is(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function os(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let ss=null;function as(){if(!ss){const t=kt.Symbol;if(t&&t.iterator)ss=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ss=n)}}}return ss}function us(t){return!!cs(t)&&(Array.isArray(t)||!(t instanceof Map)&&as()in t)}function cs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ls(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function hs(t,e,n,r){const i=Ae();return ls(i,Ve(),e)&&(xe(),function(t,e,n,r,i,o){const s=ye(t,e);!function(t,e,n,r,i,o,s){if(null==o)pe(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?ie(o):s(o,r||"",i);pe(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(tn(),i,t,e,n,r)),hs}function fs(t,e,n,r){return ls(t,Ve(),n)?e+ie(n)+r:Ui}function ds(t,e,n,r,i,o,s,a){const u=Ae(),c=xe(),l=t+$t,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Yi(e,t,4,s||null,Te(c,a));ho(e,n,l,Te(c,u)),en(e,l);const h=l.tViews=ao(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];De(h,!1);const f=u[11].createComment("");_i(c,u,f,h),Yr(f,u),Io(u,u[l]=Eo(f,u,f,h)),te(h)&&io(c,u,h),null!=s&&oo(u,h,a)}function ps(t,e=vt.Default){const n=Ae();return null===n?lr(t,e):kn(Re(),n,st(t),e)}function ms(t,e,n){const r=Ae();return ls(r,Ve(),e)&&lo(xe(),tn(),r,t,e,r[11],n,!1),ms}function gs(t,e,n,r,i){const o=i?"class":"style";jo(t,n,e.inputs[o],o,r)}function vs(t,e,n,r){const i=Ae(),o=xe(),s=$t+t,a=i[11],u=i[s]=ui(a,e,Oe.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Yi(e,t,2,i,Te(a,o));return ho(e,n,u,Te(a,s)),null!==u.attrs&&Lo(u,u.attrs,!1),null!==u.mergedAttrs&&Lo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];De(c,!0);const l=c.mergedAttrs;null!==l&&ln(a,u,l);const h=c.classes;null!==h&&Oi(a,u,h);const f=c.styles;null!==f&&Ii(a,u,f),64!=(64&c.flags)&&_i(o,i,u,c),0===Oe.lFrame.elementDepthCount&&Yr(u,i),Oe.lFrame.elementDepthCount++,te(c)&&(io(o,i,c),ro(o,c,i)),null!==r&&oo(i,c)}function ys(){let t=Re();je()?Le():(t=t.parent,De(t,!1));const e=t;Oe.lFrame.elementDepthCount--;const n=xe();n.firstCreatePass&&(en(n,t),Xt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&gs(n,e,Ae(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&gs(n,e,Ae(),e.stylesWithoutHost,!1)}function bs(t,e,n,r){vs(t,e,n,r),ys()}function _s(t,e,n){const r=Ae(),i=xe(),o=t+$t,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Te(o,r),a=Yi(e,t,8,"ng-container",s);return null!==s&&Lo(a,s,!0),ho(e,n,a,Te(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];De(s,!0);const a=r[o]=r[11].createComment("");_i(i,r,a,s),Yr(a,r),te(s)&&(io(i,r,s),ro(i,s,r)),null!=n&&oo(r,s)}function ws(){let t=Re();const e=xe();je()?Le():(t=t.parent,De(t,!1)),e.firstCreatePass&&(en(e,t),Xt(t)&&e.queries.elementEnd(t))}function Es(){return Ae()}function Cs(t){return!!t&&"function"==typeof t.then}function Ts(t){return!!t&&"function"==typeof t.subscribe}function Ss(t,e,n=!1,r){const i=Ae(),o=xe(),s=Re();return function(t,e,n,r,i,o,s=!1,a){const u=te(r),c=t.firstCreatePass&&Po(t),l=Ro(e);let h=!0;if(3&r.type){const f=ye(r,e),d=a?a(f):At,p=d.target||f,m=l.length,g=a?t=>a(ge(t[r.index])).target:r.index;if(pe(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Os(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,g,m,m+1)}}else o=Os(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,m,s)}else o=Os(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Ss}function Is(t,e,n){try{return!1!==e(n)}catch(r){return Do(t,r),!1}}function Os(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?_e(t.index,e):e;0==(32&e[2])&&Oo(s);let a=Is(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Is(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ks(t=1){return function(t){return(Oe.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Oe.lFrame.contextLView))[8]}(t)}function As(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Li(t,o,!0):Mi(r,o))return i}else n=i}return n}function xs(t){const e=Ae()[16][6];if(!e.projection){const n=e.projection=Qn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?As(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Ns(t,e=0,n){const r=Ae(),i=xe(),o=Yi(i,$t+t,16,null,n||null);null===o.projection&&(o.projection=e),Le(),64!=(64&o.flags)&&function(t,e,n){Si(e[11],0,e,n,di(t,n,e),yi(n.parent||e[6],n,e))}(i,r,o)}function Rs(t,e,n){return Ps(t,"",e,"",n),Rs}function Ps(t,e,n,r,i){const o=Ae(),s=fs(o,e,n,r);return s!==Ui&&lo(xe(),tn(),o,t,s,o[11],i,!1),Ps}const Ds=[];function js(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?zi(o):Wi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Ls(t[a],e)&&(u=!0,t[a+1]=r?$i(n):Ki(n)),a=r?zi(n):Wi(n)}u&&(t[n+1]=r?Ki(o):$i(o))}function Ls(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Xn(t,e)>=0}function Ms(t,e){return function(t,e,n,r){const i=Ae(),o=xe(),s=function(t){const e=Oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Xe()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Oe.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Vs(n=Fs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Fs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==Wi(r))return t[zi(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Fs(null,t,e,n[1],r),n=Vs(n,e.attrs,r),function(t,e,n,r){t[zi(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Vs(r,t[o].hostAttrs,true);return Vs(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=zi(s),u=Wi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||Xn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=zi(t[a+1]);t[r+1]=Hi(e,a),0!==e&&(t[e+1]=Gi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Hi(a,0),0!==a&&(t[a+1]=Gi(t[a+1],r)),a=r;else t[r+1]=Hi(u,0),0===a?a=r:t[u+1]=Gi(t[u+1],r),u=r;l&&(t[r+1]=Ki(t[r+1])),js(t,c,r,!0),js(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&Xn(o,e)>=0&&(n[r+1]=$i(n[r+1]))}(e,c,t,r),s=Hi(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==Ui&&ls(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];qs(1==(1&c)?Us(u,e,n,i,Wi(c),s):void 0)||(qs(o)||function(t){return 2==(2&t)}(c)&&(o=Us(u,null,n,i,a,s)),function(t,e,n,r,i){const o=pe(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,ve(Xe(),n),i,o))}(o,o.data[Xe()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=nt(wr(t))),t}(e),true,s)}(t,e),Ms}function Fs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Vs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Vs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Jn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Us(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Ui&&(l=c?Ds:void 0);let h=c?Yn(l,r):u===r?l:void 0;if(o&&!qs(h)&&(h=Yn(e,r)),qs(h)&&(a=h,s))return a;const f=t[i+1];i=s?zi(f):Wi(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=Yn(t,r))}return a}function qs(t){return void 0!==t}function Bs(t,e=""){const n=Ae(),r=xe(),i=t+$t,o=r.firstCreatePass?Yi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return pe(t)?t.createText(e):t.createTextNode(e)}(n[11],e);_i(r,n,s,o),De(o,!1)}function Hs(t){return zs("",t,""),Hs}function zs(t,e,n){const r=Ae(),i=fs(r,t,e,n);return i!==Ui&&function(t,e,n){const r=ve(e,t);!function(t,e,n){pe(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,Xe(),i),zs}function Ks(t,e,n){const r=Ae();return ls(r,Ve(),e)&&lo(xe(),tn(),r,t,e,r[11],n,!0),Ks}const Ws=void 0;var Gs=["en",[["a","p"],["AM","PM"],Ws],[["AM","PM"],Ws,Ws],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ws,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ws,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ws,"{1} 'at' {0}",Ws],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let $s={};function Qs(t){return t in $s||($s[t]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[t]),$s[t]}var Js=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Ys="en-US";let Xs=Ys;function Zs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Xs=t.toLowerCase().replace(/_/g,"-"))}function ta(t,e,n,r,i){if(t=st(t),Array.isArray(t))for(let o=0;o<t.length;o++)ta(t[o],e,n,r,i);else{const o=xe(),s=Ae();let a=Yo(t)?t:st(t.provide),u=$o(t);const c=Re(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(Yo(t)||!t.multi){const r=new cn(u,i,ps),d=ra(a,e,i?l:l+f,h);-1===d?(Sn(wn(c,s),o,a),ea(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=ra(a,e,l+f,h),p=ra(a,e,l,l+f),m=d>=0&&n[d],g=p>=0&&n[p];if(i&&!g||!i&&!m){Sn(wn(c,s),o,a);const l=function(t,e,n,r,i){const o=new cn(t,n,ps);return o.multi=[],o.index=e,o.componentProviders=0,na(o,i,r&&!n),o}(i?oa:ia,n.length,i,r,u);!i&&g&&(n[p].providerFactory=l),ea(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else ea(o,t,d>-1?d:p,na(n[i?p:d],u,!i&&r));!i&&r&&g&&n[p].componentProviders++}}}function ea(t,e,n,r){const i=Yo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function na(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ra(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ia(t,e,n,r){return sa(this.multi,[])}function oa(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Pn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),sa(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],sa(i,o);return o}function sa(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function aa(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=xe();if(r.firstCreatePass){const i=ee(t);ta(n,r.data,r.blueprint,i,!0),ta(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class ua{}class ca{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${nt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let la=(()=>{class t{}return t.NULL=new ca,t})();function ha(...t){}function fa(t,e){return new pa(ye(t,e))}const da=function(){return fa(Re(),Ae())};let pa=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=da,t})();class ma{}let ga=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>va(),t})();const va=function(){const t=Ae(),e=_e(Re().index,t);return function(t){return t[11]}(Jt(e)?e:t)};let ya=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>null}),t})();class ba{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const _a=new ba("11.0.5");class wa{constructor(){}supports(t){return us(t)}create(t){return new Ca(t)}}const Ea=(t,e)=>e;class Ca{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ea}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Oa(n,r,i)?e:n,s=Oa(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!us(t))throw new Error(`Error trying to diff '${nt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[as()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Ta(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ia),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ia),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ta{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Sa{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ia{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Sa,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Oa(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ka{constructor(){}supports(t){return t instanceof Map||cs(t)}create(){return new Aa}}class Aa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||cs(t)))throw new Error(`Error trying to diff '${nt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new xa(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class xa{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Na=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new nr,new tr]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t([new wa])}),t})(),Ra=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new nr,new tr]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t([new ka])}),t})();function Pa(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(ge(o)),Yt(o))for(let t=Qt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Pa(e[1],e,n,r)}const s=n.type;if(8&s)Pa(t,e,n.child,r);else if(32&s){const t=ni(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=ri(t);Pa(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class Da{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return Pa(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}hi(this._lView[1],this._lView)}onDestroy(t){uo(this._lView[1],this._lView,null,t)}markForCheck(){Oo(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ko(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Fe(!0);try{ko(t,e,n)}finally{Fe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Ti(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ja extends Da{constructor(t){super(t),this._view=t}detectChanges(){Ao(this._view)}checkNoChanges(){!function(t){Fe(!0);try{Ao(t)}finally{Fe(!1)}}(this._view)}get context(){return null}}const La=function(t=!1){return function(t,e,n){if(!n&&Zt(t)){const n=_e(t.index,e);return new Da(n,n)}return 47&t.type?new Da(e[16],e):null}(Re(),Ae(),t)};let Ma=(()=>{class t{}return t.__NG_ELEMENT_ID__=La,t.__ChangeDetectorRef__=!0,t})();const Fa=[new ka],Va=new Na([new wa]),Ua=new Ra(Fa),qa=function(){return Ka(Re(),Ae())};let Ba=(()=>{class t{}return t.__NG_ELEMENT_ID__=qa,t})();const Ha=Ba,za=class extends Ha{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ji(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Zi(e,n,t),new Da(n)}};function Ka(t,e){return 4&t.type?new za(e,t,fa(t,e)):null}class Wa{}class Ga{}const $a=function(){return tu(Re(),Ae())};let Qa=(()=>{class t{}return t.__NG_ELEMENT_ID__=$a,t})();const Ja=Qa,Ya=class extends Ja{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return fa(this._hostTNode,this._hostLView)}get injector(){return new Ln(this._hostTNode,this._hostLView)}get parentInjector(){const t=Tn(this._hostTNode,this._hostLView);if(mn(t)){const e=vn(t,this._hostLView),n=gn(t);return new Ln(e[1].data[n+8],e)}return new Ln(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Xa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Qt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Wa,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(Yt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ya(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=Qt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-Qt?(e[4]=n[i],Gn(n,Qt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Ei(i,o),a=n[11],u=vi(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Ti(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),Gn(Za(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Xa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=li(this._lContainer,e);n&&($n(Za(this._lContainer),e),hi(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=li(this._lContainer,e);return n&&null!=$n(Za(this._lContainer),e)?new Da(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Xa(t){return t[8]}function Za(t){return t[8]||(t[8]=[])}function tu(t,e){let n;const r=e[t.index];if(Yt(r))n=r;else{let i;if(8&t.type)i=ge(r);else{const n=e[11];i=n.createComment("");const r=ye(t,e);pi(n,vi(n,r),i,function(t,e){return pe(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Eo(r,e,i,t),Io(e,n)}return new Ya(n,t,e)}const eu={};class nu extends la{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Wt(t);return new ou(e,this.ngModule)}}function ru(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const iu=new Bn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Xr});class ou extends ua{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Vi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ru(this.componentDef.inputs)}get outputs(){return ru(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,eu,i);return o!==eu||r===eu?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ma,me),s=i.get(ya,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(pe(t))return t.selectRootElement(e,n===Ct.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):ui(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Xr,clean:No,playerHandler:null,flags:0},f=ao(0,null,null,1,0,null,null,null,null,null),d=Ji(null,f,h,l,null,null,o,a,s,i);let p,m;We(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Yi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Lo(a,u,!0),null!==t&&(ln(i,t,u),null!==a.classes&&Oi(i,t,a.classes),null!==a.styles&&Ii(i,t,a.styles)));const c=r.createRenderer(t,e),l=Ji(n,so(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Sn(wn(a,n),s,e.type),mo(s,a),vo(a,n.length,1)),Io(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)ln(a,c,["ng-version",_a.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Di(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&ln(a,c,t),e&&e.length>0&&Oi(a,c,e.join(" "))}if(m=be(f,$t),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Re();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),yo(t,r,e,Xi(t,e,1,null),n));const i=Pn(e,t,r.directiveStart,r);Yr(i,e);const o=ye(r,e);return o&&Yr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Re();e.contentQueries(1,s,t.directiveStart)}const a=Re();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Ze(a.index),fo(n[1],a,0,a.directiveStart,a.directiveEnd,e),po(e,s)),s}(t,this.componentDef,d,h,[ts]),Zi(f,d,null)}finally{Ye()}return new su(this.componentType,p,fa(m,d),d,m)}}class su extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ja(r),this.componentType=t}get injector(){return new Ln(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const au=new Map;class uu extends Wa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new nu(this);const n=Gt(t),r=t[jt]||null;r&&Zs(r),this._bootstrapComponents=ti(n.bootstrap),this._r3Injector=Ko(t,e,[{provide:Wa,useValue:this},{provide:la,useValue:this.componentFactoryResolver}],nt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Zo.THROW_IF_NOT_FOUND,n=vt.Default){return t===Zo||t===Wa||t===Mo?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class cu extends Ga{constructor(t){super(),this.moduleType=t,null!==Gt(t)&&function(t){const e=new Set;!function t(n){const r=Gt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${nt(e)} vs ${nt(e.name)}`)}(i,au.get(i),n),au.set(i,n));const o=ti(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new uu(this.moduleType,t)}}const lu=class extends C{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,o=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(r,i,o);return t instanceof h&&t.add(s),s}};function hu(){return this._results[as()]()}class fu{constructor(){this.dirty=!0,this._results=[],this.changes=new lu,this.length=0;const t=as(),e=fu.prototype;e[t]||(e[t]=hu)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=Kn(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class du{constructor(t){this.queryList=t,this.matches=null}clone(){return new du(this.queryList)}setDirty(){this.queryList.setDirty()}}class pu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new pu(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Nu(t,e).matches&&this.queries[e].setDirty()}}class mu{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class gu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new gu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class vu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new vu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,yu(e,i)),this.matchTNodeWithReadOption(t,e,Rn(e,t,i,!1,!1))}else n===Ba?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Rn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===pa||r===Qa||r===Ba&&4&e.type)this.addMatch(e.index,-2);else{const n=Rn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function yu(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function bu(t,e,n,r){return-1===n?function(t,e){return 11&t.type?fa(t,e):4&t.type?Ka(t,e):null}(e,t):-2===n?function(t,e,n){return n===pa?fa(e,t):n===Ba?Ka(e,t):n===Qa?tu(e,t):void 0}(t,e,r):Pn(t,t[1],n,e)}function _u(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:bu(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function wu(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=_u(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=Qt;t<s.length;t++){const e=s[t];e[17]===e[3]&&wu(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];wu(n[1],n,i,r)}}}}}return r}function Eu(t){const e=Ae(),n=xe(),r=Be();He(r+1);const i=Nu(n,r);if(t.dirty&&Ee(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?wu(n,e,r,[]):_u(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Cu(t,e,n){Tu(xe(),Ae(),t,e,n,!1)}function Tu(t,e,n,r,i,o){t.firstCreatePass&&(xu(t,new mu(n,r,o,i),-1),o&&(t.staticViewQueries=!0)),Au(t,e)}function Su(t,e,n,r){Ou(xe(),Ae(),e,n,r,!1,Re(),t)}function Iu(t,e,n,r){Ou(xe(),Ae(),e,n,r,!0,Re(),t)}function Ou(t,e,n,r,i,o,s,a){t.firstCreatePass&&(xu(t,new mu(n,r,o,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a),o&&(t.staticContentQueries=!0)),Au(t,e)}function ku(){return t=Ae(),e=Be(),t[19].queries[e].queryList;var t,e}function Au(t,e){const n=new fu;uo(t,e,n,n.destroy),null===e[19]&&(e[19]=new pu),e[19].queries.push(new du(n))}function xu(t,e,n){null===t.queries&&(t.queries=new gu),t.queries.track(new vu(e,n))}function Nu(t,e){return t.queries.getByIndex(e)}const Ru=new Bn("Application Initializer");let Pu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ha,this.reject=ha,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Cs(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(lr(Ru,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Du=new Bn("AppId"),ju={provide:Du,useFactory:function(){return`${Lu()}${Lu()}${Lu()}`},deps:[]};function Lu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Mu=new Bn("Platform Initializer"),Fu=new Bn("Platform ID"),Vu=new Bn("appBootstrapListener");let Uu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const qu=new Bn("LocaleId"),Bu=new Bn("DefaultCurrencyCode");class Hu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const zu=function(t){return new cu(t)},Ku=zu,Wu=function(t){return Promise.resolve(zu(t))},Gu=function(t){const e=zu(t),n=ti(Gt(t).declarations).reduce((t,e)=>{const n=Wt(e);return n&&t.push(new ou(n)),t},[]);return new Hu(e,n)},$u=Gu,Qu=function(t){return Promise.resolve(Gu(t))};let Ju=(()=>{class t{constructor(){this.compileModuleSync=Ku,this.compileModuleAsync=Wu,this.compileModuleAndAllComponentsSync=$u,this.compileModuleAndAllComponentsAsync=Qu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Yu=(()=>Promise.resolve(0))();function Xu(t){"undefined"==typeof Zone?Yu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Zu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lu(!1),this.onMicrotaskEmpty=new lu(!1),this.onStable=new lu(!1),this.onError=new lu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=kt.requestAnimationFrame,e=kt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(kt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,nc(t),ec(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),nc(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return rc(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),ic(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return rc(t),e.invoke(r,i,o,s,a)}finally{ic(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,nc(t),ec(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Zu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,tc,ha,ha);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const tc={};function ec(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function nc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function rc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ic(t){t._nesting--,ec(t)}class oc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lu,this.onMicrotaskEmpty=new lu,this.onStable=new lu,this.onError=new lu}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let sc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zu.assertNotInAngularZone(),Xu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Xu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(lr(Zu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),ac=(()=>{class t{constructor(){this._applications=new Map,lc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return lc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class uc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let cc,lc=new uc,hc=!0,fc=!1;function dc(){return fc=!0,hc}const pc=new Bn("AllowMultipleToken");class mc{constructor(t,e){this.name=t,this.token=e}}function gc(t,e,n=[]){const r="Platform: "+e,i=new Bn(r);return(e=[])=>{let o=vc();if(!o||o.injector.get(pc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Vo,useValue:"platform"});!function(t){if(cc&&!cc.destroyed&&!cc.injector.get(pc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");cc=t.get(yc);const e=t.get(Mu,null);e&&e.forEach(t=>t())}(Zo.create({providers:t,name:r}))}return function(t){const e=vc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function vc(){return cc&&!cc.destroyed?cc:null}let yc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new oc:("zone.js"===t?void 0:t)||new Zu({enableLongStackTrace:dc(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Zu,useValue:n}];return n.run(()=>{const e=Zo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Jr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{wc(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Cs(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(Ex){throw e.runOutsideAngular(()=>t.handleError(Ex)),Ex}}(o,n,()=>{const t=i.injector.get(Pu);return t.runInitializers(),t.donePromise.then(()=>(Zs(i.injector.get(qu,Ys)||Ys),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=bc({},e);return function(t,e,n){const r=new cu(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(_c);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${nt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(lr(Zo))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function bc(t,e){return Array.isArray(e)?e.reduce(bc,t):Object.assign(Object.assign({},t),e)}let _c=(()=>{class t{constructor(t,e,n,r,i,o){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Zu.assertNotInAngularZone(),Xu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Zu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=K(s,a.pipe(Z()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ua?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Wa),i=n.create(Zo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(sc,null),a=s&&i.injector.get(ac);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),wc(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),dc()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(Ex){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(Ex))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;wc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Vu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(lr(Zu),lr(Uu),lr(Zo),lr(Jr),lr(la),lr(Pu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function wc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ec{}class Cc{}const Tc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Sc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Tc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Ic(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Ic(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(lr(Ju),lr(Cc,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Ic(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Oc=gc(null,"core",[{provide:Fu,useValue:"unknown"},{provide:yc,deps:[Zo]},{provide:ac,deps:[]},{provide:Uu,deps:[]}]),kc=[{provide:_c,useClass:_c,deps:[Zu,Uu,Zo,Jr,la,Pu]},{provide:iu,deps:[Zu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Pu,useClass:Pu,deps:[[new tr,Ru]]},{provide:Ju,useClass:Ju,deps:[]},ju,{provide:Na,useFactory:function(){return Va},deps:[]},{provide:Ra,useFactory:function(){return Ua},deps:[]},{provide:qu,useFactory:function(t){return Zs(t=t||"undefined"!=typeof $localize&&$localize.locale||Ys),t},deps:[[new Zn(qu),new tr,new nr]]},{provide:Bu,useValue:"USD"}];let Ac=(()=>{class t{constructor(t){}}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)(lr(_c))},providers:kc}),t})(),xc=null;function Nc(){return xc}const Rc=new Bn("DocumentToken");let Pc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:Dc,token:t,providedIn:"platform"}),t})();function Dc(){return lr(Lc)}const jc=new Bn("Location Initialized");let Lc=(()=>{class t extends Pc{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=Nc().getLocation(),this._history=Nc().getHistory()}getBaseHrefFromDOM(){return Nc().getBaseHref(this._doc)}onPopState(t){Nc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){Nc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Mc()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Mc()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(lr(Rc))},t.\u0275prov=ut({factory:Fc,token:t,providedIn:"platform"}),t})();function Mc(){return!!window.history.pushState}function Fc(){return new Lc(lr(Rc))}function Vc(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Uc(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function qc(t){return t&&"?"!==t[0]?"?"+t:t}let Bc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:Hc,token:t,providedIn:"root"}),t})();function Hc(t){const e=lr(Rc).location;return new Kc(lr(Pc),e&&e.origin||"")}const zc=new Bn("appBaseHref");let Kc=(()=>{class t extends Bc{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Vc(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+qc(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+qc(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+qc(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(lr(Pc),lr(zc,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Wc=(()=>{class t extends Bc{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Vc(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+qc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+qc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(lr(Pc),lr(zc,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Gc=(()=>{class t{constructor(t,e){this._subject=new lu,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Uc(Qc(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+qc(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Qc(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qc(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qc(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(lr(Bc),lr(Pc))},t.normalizeQueryParams=qc,t.joinWithSlash=Vc,t.stripTrailingSlash=Uc,t.\u0275prov=ut({factory:$c,token:t,providedIn:"root"}),t})();function $c(){return new Gc(lr(Bc),lr(Pc))}function Qc(t){return t.replace(/\/index.html$/,"")}var Jc=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class Yc{}let Xc=(()=>{class t extends Yc{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Qs(e);if(n)return n;const r=e.split("-")[0];if(n=Qs(r),n)return n;if("en"===r)return Gs;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Js.PluralCase]}(e||this.locale)(t)){case Jc.Zero:return"zero";case Jc.One:return"one";case Jc.Two:return"two";case Jc.Few:return"few";case Jc.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(lr(qu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Zc(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class tl{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let el=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new tl(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new nl(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new nl(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(ps(Qa),ps(Ba),ps(Na))},t.\u0275dir=Kt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class nl{constructor(t,e){this.record=t,this.view=e}}let rl=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new il,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ol("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ol("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(ps(Qa),ps(Ba))},t.\u0275dir=Kt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class il{constructor(){this.$implicit=null,this.ngIf=null}}function ol(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${nt(e)}'.`)}class sl{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let al=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Kt({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),ul=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new sl(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(ps(Qa),ps(Ba),ps(al,1))},t.\u0275dir=Kt({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),cl=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[{provide:Yc,useClass:Xc}]}),t})(),ll=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new hl(lr(Rc),window,lr(Jr))}),t})();class hl{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=fl(this.window.history)||fl(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function fl(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class dl extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new dl,xc||(xc=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=ml||(ml=document.querySelector("base"),ml)?ml.getAttribute("href"):null;return null==e?null:(n=e,pl||(pl=document.createElement("a")),pl.setAttribute("href",n),"/"===pl.pathname.charAt(0)?pl.pathname:"/"+pl.pathname);var n}resetBaseElement(){ml=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Zc(document.cookie,t)}}let pl,ml=null;const gl=new Bn("TRANSITION_ID"),vl=[{provide:Ru,useFactory:function(t,e,n){return()=>{n.get(Pu).donePromise.then(()=>{const n=Nc();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[gl,Rc,Zo],multi:!0}];class yl{static init(){var t;t=new yl,lc=t}addToWindow(t){kt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},kt.getAllAngularTestabilities=()=>t.getAllTestabilities(),kt.getAllAngularRootElements=()=>t.getAllRootElements(),kt.frameworkStabilizers||(kt.frameworkStabilizers=[]),kt.frameworkStabilizers.push(t=>{const e=kt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Nc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const bl=new Bn("EventManagerPlugins");let _l=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(lr(bl),lr(Zu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class wl{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Nc().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let El=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Cl=(()=>{class t extends El{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Nc().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(lr(Rc))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Tl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Sl=/%COMP%/g;function Il(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Il(t,i,n):(i=i.replace(Sl,t),n.push(i))}return n}function Ol(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let kl=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Al(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Ct.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new xl(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case Ct.ShadowDom:return new Nl(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Il(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(lr(_l),lr(Cl),lr(Du))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class Al{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Tl[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Tl[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Tl[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(ei.DashCase|ei.Important)?t.style.setProperty(e,n,r&ei.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&ei.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ol(n)):this.eventManager.addEventListener(t,e,Ol(n))}}class xl extends Al{constructor(t,e,n,r){super(t),this.component=n;const i=Il(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Sl,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Sl,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Nl extends Al{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Il(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Rl=(()=>{class t extends wl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(lr(Rc))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Pl=["alt","control","meta","shift"],Dl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ll={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Ml=(()=>{class t extends wl{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nc().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Pl.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&jl.hasOwnProperty(e)&&(e=jl[e]))}return Dl[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Pl.forEach(r=>{r!=n&&(0,Ll[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(lr(Rc))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Fl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return lr(Vl)},token:t,providedIn:"root"}),t})(),Vl=(()=>{class t extends Fl{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case Wr.NONE:return e;case Wr.HTML:return Er(e,"HTML")?wr(e):function(t,e){let n=null;try{zr=zr||function(t){return function(){try{return!!(new window.DOMParser).parseFromString(pr(""),"text/html")}catch(t){return!1}}()?new Tr:new Sr(t)}(t);let r=e?String(e):"";n=zr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=zr.getInertBodyElement(r)}while(r!==o);return(new Ur).sanitizeChildren(Kr(n)||n)}finally{if(n){const t=Kr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(this._doc,String(e));case Wr.STYLE:return Er(e,"Style")?wr(e):e;case Wr.SCRIPT:if(Er(e,"Script"))return wr(e);throw new Error("unsafe value used in a script context");case Wr.URL:return Cr(e),Er(e,"URL")?wr(e):kr(String(e));case Wr.RESOURCE_URL:if(Er(e,"ResourceURL"))return wr(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return new gr(t)}bypassSecurityTrustStyle(t){return new vr(t)}bypassSecurityTrustScript(t){return new yr(t)}bypassSecurityTrustUrl(t){return new br(t)}bypassSecurityTrustResourceUrl(t){return new _r(t)}}return t.\u0275fac=function(e){return new(e||t)(lr(Rc))},t.\u0275prov=ut({factory:function(){return t=lr(Mo),new Vl(t.get(Rc));var t},token:t,providedIn:"root"}),t})();const Ul=gc(Oc,"browser",[{provide:Fu,useValue:"browser"},{provide:Mu,useValue:function(){dl.makeCurrent(),yl.init()},multi:!0},{provide:Rc,useFactory:function(){return function(t){de=t}(document),document},deps:[]}]),ql=[[],{provide:Vo,useValue:"root"},{provide:Jr,useFactory:function(){return new Jr},deps:[]},{provide:bl,useClass:Rl,multi:!0,deps:[Rc,Zu,Fu]},{provide:bl,useClass:Ml,multi:!0,deps:[Rc]},[],{provide:kl,useClass:kl,deps:[_l,Cl,Du]},{provide:ma,useExisting:kl},{provide:El,useExisting:Cl},{provide:Cl,useClass:Cl,deps:[Rc]},{provide:sc,useClass:sc,deps:[Zu]},{provide:_l,useClass:_l,deps:[bl,Zu]},[]];let Bl=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Du,useValue:e.appId},{provide:gl,useExisting:Du},vl]}}}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)(lr(t,12))},providers:ql,imports:[cl,Ac]}),t})();function Hl(...t){let e=t[t.length-1];return S(e)?(t.pop(),j(t,e)):z(t)}"undefined"!=typeof window&&window;class zl extends C{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _;return this._value}next(t){super.next(this._value=t)}}class Kl extends p{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Wl extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Gl(t,e,n,r,i=new Wl(t,n,r)){if(!i.closed)return e instanceof y?e.subscribe(i):D(e)(i)}const $l={};class Ql{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Jl(t,this.resultSelector))}}class Jl extends Kl{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push($l),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Gl(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===$l?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Yl=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Xl=new y(t=>t.complete());function Zl(t){return t?function(t){return new y(e=>t.schedule(()=>e.complete()))}(t):Xl}function th(t){return new y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?L(n):Zl()).subscribe(e)})}function eh(){return H(1)}function nh(t,e){return function(n){return n.lift(new rh(t,e))}}class rh{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ih(t,this.predicate,this.thisArg))}}class ih extends p{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const oh=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function sh(t){return function(e){return 0===t?Zl():e.lift(new ah(t))}}class ah{constructor(t){if(this.total=t,this.total<0)throw new oh}call(t,e){return e.subscribe(new uh(t,this.total))}}class uh extends p{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ch(t=fh){return e=>e.lift(new lh(t))}class lh{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new hh(t,this.errorFactory))}}class hh extends p{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Ex){t=Ex}this.destination.error(t)}}}function fh(){return new Yl}function dh(t=null){return e=>e.lift(new ph(t))}class ph{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new mh(t,this.defaultValue))}}class mh extends p{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function gh(t,e){return"function"==typeof e?n=>n.pipe(gh((n,r)=>L(t(n,r)).pipe(I((t,i)=>e(n,t,r,i))))):e=>e.lift(new vh(t))}class vh{constructor(t){this.project=t}call(t,e){return e.subscribe(new yh(t,this.project))}}class yh extends F{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new M(this),r=this.destination;r.add(n),this.innerSubscription=V(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function bh(t){return e=>0===t?Zl():e.lift(new _h(t))}class _h{constructor(t){if(this.total=t,this.total<0)throw new oh}call(t,e){return e.subscribe(new wh(t,this.total))}}class wh extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Eh(...t){return eh()(Hl(...t))}function Ch(...t){const e=t[t.length-1];return S(e)?(t.pop(),n=>Eh(t,n,e)):e=>Eh(t,e)}class Th{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Sh(t,this.accumulator,this.seed,this.hasSeed))}}class Sh extends p{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Ih(t){return function(e){const n=new Oh(t),r=e.lift(n);return n.caught=r}}class Oh{constructor(t){this.selector=t}call(t,e){return e.subscribe(new kh(t,this.selector,this.caught))}}class kh extends F{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new M(this);this.add(r);const i=V(n,r);i!==r&&this.add(i)}}}function Ah(t,e){return U(t,e,1)}function xh(t,e){const n=arguments.length>=2;return r=>r.pipe(t?nh((e,n)=>t(e,n,r)):v,bh(1),n?dh(e):ch(()=>new Yl))}function Nh(){}function Rh(t,e,n){return function(r){return r.lift(new Ph(t,e,n))}}class Ph{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Dh(t,this.nextOrObserver,this.error,this.complete))}}class Dh extends p{constructor(t,e,n,i){super(t),this._tapNext=Nh,this._tapError=Nh,this._tapComplete=Nh,this._tapError=n||Nh,this._tapComplete=i||Nh,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Nh,this._tapError=e.error||Nh,this._tapComplete=e.complete||Nh)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function jh(t){return e=>e.lift(new Lh(t))}class Lh{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Mh(t,this.callback))}}class Mh extends p{constructor(t,e){super(t),this.add(new h(e))}}class Fh{constructor(t,e){this.id=t,this.url=e}}class Vh extends Fh{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Uh extends Fh{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qh extends Fh{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bh extends Fh{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hh extends Fh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zh extends Fh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kh extends Fh{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wh extends Fh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gh extends Fh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $h{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qh{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jh{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yh{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xh{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zh{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tf{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ef="primary";class nf{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function rf(t){return new nf(t)}function of(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function sf(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function af(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!uf(t[i],e[i]))return!1;return!0}function uf(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function cf(t){return Array.prototype.concat.apply([],t)}function lf(t){return t.length>0?t[t.length-1]:null}function hf(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ff(t){return Ts(t)?t:Cs(t)?L(Promise.resolve(t)):Hl(t)}function df(t,e,n){return n?function(t,e){return af(t,e)}(t.queryParams,e.queryParams)&&pf(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>uf(t[n],e[n]))}(t.queryParams,e.queryParams)&&mf(t.root,e.root)}function pf(t,e){if(!_f(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!pf(t.children[n],e.children[n]))return!1}return!0}function mf(t,e){return gf(t,e,e.segments)}function gf(t,e,n){if(t.segments.length>n.length)return!!_f(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!_f(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!mf(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!_f(t.segments,r)&&!!t.children.primary&&gf(t.children.primary,e,i)}}class vf{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rf(this.queryParams)),this._queryParamMap}toString(){return Tf.serialize(this)}}class yf{constructor(t,e){this.segments=t,this.children=e,this.parent=null,hf(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sf(this)}}class bf{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=rf(this.parameters)),this._parameterMap}toString(){return Rf(this)}}function _f(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function wf(t,e){let n=[];return hf(t.children,(t,r)=>{r===ef&&(n=n.concat(e(t,r)))}),hf(t.children,(t,r)=>{r!==ef&&(n=n.concat(e(t,r)))}),n}class Ef{}class Cf{parse(t){const e=new Mf(t);return new vf(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+If(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${kf(e)}=${kf(t)}`).join("&"):`${kf(e)}=${kf(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const Tf=new Cf;function Sf(t){return t.segments.map(t=>Rf(t)).join("/")}function If(t,e){if(!t.hasChildren())return Sf(t);if(e){const e=t.children.primary?If(t.children.primary,!1):"",n=[];return hf(t.children,(t,e)=>{e!==ef&&n.push(`${e}:${If(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=wf(t,(e,n)=>n===ef?[If(t.children.primary,!1)]:[`${n}:${If(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Sf(t)}/${e[0]}`:`${Sf(t)}/(${e.join("//")})`}}function Of(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kf(t){return Of(t).replace(/%3B/gi,";")}function Af(t){return Of(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xf(t){return decodeURIComponent(t)}function Nf(t){return xf(t.replace(/\+/g,"%20"))}function Rf(t){return`${Af(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Af(t)}=${Af(e[t])}`).join("")}`;var e}const Pf=/^[^\/()?;=#]+/;function Df(t){const e=t.match(Pf);return e?e[0]:""}const jf=/^[^=?&#]+/,Lf=/^[^?&#]+/;class Mf{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yf([],{}):new yf([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new yf(t,e)),n}parseSegment(){const t=Df(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new bf(xf(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Df(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Df(this.remaining);t&&(n=t,this.capture(n))}t[xf(e)]=xf(n)}parseQueryParam(t){const e=function(t){const e=t.match(jf);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Lf);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Nf(e),i=Nf(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Df(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=ef);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new yf([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Ff{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Vf(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Vf(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Uf(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Uf(t,this._root).map(t=>t.value)}}function Vf(t,e){if(t===e.value)return e;for(const n of e.children){const e=Vf(t,n);if(e)return e}return null}function Uf(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Uf(t,n);if(r.length)return r.unshift(e),r}return[]}class qf{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Bf(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Hf extends Ff{constructor(t,e){super(t),this.snapshot=e,Qf(this,t)}toString(){return this.snapshot.toString()}}function zf(t,e){const n=function(t,e){const n=new Gf([],{},{},"",{},ef,e,null,t.root,-1,{});return new $f("",new qf(n,[]))}(t,e),r=new zl([new bf("",{})]),i=new zl({}),o=new zl({}),s=new zl({}),a=new zl(""),u=new Kf(r,i,s,a,o,ef,e,n.root);return u.snapshot=n.root,new Hf(new qf(u,[]),n)}class Kf{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(I(t=>rf(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(I(t=>rf(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Wf(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Gf{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=rf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $f extends Ff{constructor(t,e){super(e),this.url=t,Qf(this,e)}toString(){return Jf(this._root)}}function Qf(t,e){e.value._routerState=t,e.children.forEach(e=>Qf(t,e))}function Jf(t){const e=t.children.length>0?` { ${t.children.map(Jf).join(", ")} } `:"";return`${t.value}${e}`}function Yf(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,af(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),af(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!af(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),af(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Xf(t,e){return af(t.params,e.params)&&function(t,e){return _f(t,e)&&t.every((t,n)=>af(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Xf(t.parent,e.parent))}function Zf(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Zf(t,e,r);return Zf(t,e)})}(t,e,n);return new qf(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return td(e,t),t}{const n=new Kf(new zl((r=e.value).url),new zl(r.params),new zl(r.queryParams),new zl(r.fragment),new zl(r.data),r.outlet,r.component,r),i=e.children.map(e=>Zf(t,e));return new qf(n,i)}}var r}function td(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)td(t.children[n],e.children[n])}function ed(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function nd(t){return"object"==typeof t&&null!=t&&t.outlets}function rd(t,e,n,r,i){let o={};return r&&hf(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new vf(n.root===t?e:id(n.root,t,e),o,i)}function id(t,e,n){const r={};return hf(t.children,(t,i)=>{r[i]=t===e?n:id(t,e,n)}),new yf(t.segments,r)}class od{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&ed(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(nd);if(r&&r!==lf(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sd{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ad(t,e,n){if(t||(t=new yf([],{})),0===t.segments.length&&t.hasChildren())return ud(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(nd(s))break;const a=""+s,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!fd(a,u,e))return o;r+=2}else{if(!fd(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new yf(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new yf(t.segments.slice(r.pathIndex),t.children),ud(e,0,i)}return r.match&&0===i.length?new yf(t.segments,{}):r.match&&!t.hasChildren()?cd(t,e,n):r.match?ud(t,0,i):cd(t,e,n)}function ud(t,e,n){if(0===n.length)return new yf(t.segments,{});{const r=function(t){return nd(t[0])?t[0].outlets:{[ef]:t}}(n),i={};return hf(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=ad(t.children[r],e,n))}),hf(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new yf(t.segments,i)}}function cd(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(nd(o)){const t=ld(o.outlets);return new yf(r,t)}if(0===i&&ed(n[0])){r.push(new bf(t.segments[e].path,n[0])),i++;continue}const s=nd(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&ed(a)?(r.push(new bf(s,hd(a))),i+=2):(r.push(new bf(s,{})),i++)}return new yf(r,{})}function ld(t){const e={};return hf(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=cd(new yf([],{}),0,t))}),e}function hd(t){const e={};return hf(t,(t,n)=>e[n]=""+t),e}function fd(t,e,n){return t==n.path&&af(e,n.parameters)}class dd{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Yf(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Bf(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),hf(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Bf(t),i=t.value.component?n.children:e;hf(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Bf(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Zh(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Yh(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Yf(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),pd(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function pd(t){Yf(t.value),t.children.forEach(pd)}class md{constructor(t,e){this.routes=t,this.module=e}}function gd(t){return"function"==typeof t}function vd(t){return t instanceof vf}const yd=Symbol("INITIAL_VALUE");function bd(){return gh(t=>function(...t){let e=void 0,n=void 0;return S(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),z(t,n).lift(new Ql(e))}(...t.map(t=>t.pipe(bh(1),Ch(yd)))).pipe(function(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Th(t,e,n))}}((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==yd)return t;if(r===yd&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||vd(r))return r}return t},t)},yd),nh(t=>t!==yd),I(t=>vd(t)?t:!0===t),bh(1)))}let _d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&bs(0,"router-outlet")},directives:function(){return[lp]},encapsulation:2}),t})();function wd(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Ed(r,Cd(e,r))}}function Ed(t,e){t.children&&wd(t.children,e)}function Cd(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Td(t){const e=t.children&&t.children.map(Td),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ef&&(n.component=_d),n}function Sd(t){return t.outlet||ef}class Id{constructor(t){this.segmentGroup=t||null}}class Od{constructor(t){this.urlTree=t}}function kd(t){return new y(e=>e.error(new Id(t)))}function Ad(t){return new y(e=>e.error(new Od(t)))}function xd(t){return new y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Nd{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Wa)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,ef).pipe(I(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ih(t=>{if(t instanceof Od)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Id)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,ef).pipe(I(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Ih(t=>{if(t instanceof Id)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new yf([],{[ef]:t}):t;return new vf(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(I(t=>new yf([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Hl({});const n=[],r=[],i={};return hf(t,(t,o)=>{const s=e(o,t).pipe(I(t=>i[o]=t));o===ef?n.push(s):r.push(s)}),Hl.apply(null,n.concat(r)).pipe(eh(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?nh((e,n)=>t(e,n,r)):v,sh(1),n?dh(e):ch(()=>new Yl))}(),I(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){const s=function(t){return t.reduce((t,e)=>{const n=Sd(e);return t.has(n)?t.get(n).push(e):t.set(n,[e]),t},new Map)}(n);s.has(i)||s.set(i,[]);const a=n=>L(n).pipe(Ah(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Ih(t=>{if(t instanceof Id)return Hl(null);throw t}))),xh(t=>null!==t),Ih(t=>{if(t instanceof Yl||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Hl(new yf([],{}));throw new Id(e)}throw t}));return L(Array.from(s.entries()).map(([t,e])=>{const n=a(e);return t===i?n:n.pipe(I(()=>null),Ih(()=>Hl(null)))})).pipe(t=>t.lift(new Ql(void 0)),xh(),I(t=>t.find(t=>null!==t)))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Sd(r)!==o&&""!==r.path?kd(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):kd(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Ad(i):this.lineralizeSegments(n,i).pipe(U(n=>{const i=new yf(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Rd(e,r,i);if(!s)return kd(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Ad(l):this.lineralizeSegments(r,l).pipe(U(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(I(t=>(n._loadedConfig=t,new yf(r,{})))):Hl(new yf(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=Rd(e,n,r);if(!i)return kd(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(U(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Dd(t,e,n)&&Sd(n)!==ef)}(t,n,r)?{segmentGroup:Pd(new yf(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&Sd(r)!==ef&&(n[Sd(r)]=new yf([],{}));return n}(r,new yf(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Dd(t,e,n))}(t,n,r)?{segmentGroup:Pd(new yf(t.segments,function(t,e,n,r){const i={};for(const o of n)Dd(t,e,o)&&!r[Sd(o)]&&(i[Sd(o)]=new yf([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(I(t=>new yf(o,t))):0===r.length&&0===s.length?Hl(new yf(o,{})):this.expandSegment(n,i,r,s,ef,!0).pipe(I(t=>new yf(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Hl(new md(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Hl(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(U(n=>n?this.configLoader.load(t.injector,e).pipe(I(t=>(e._loadedConfig=t,t))):function(t){return new y(e=>e.error(of(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Hl(new md([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Hl(r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&gd(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!gd(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return ff(o)})).pipe(bd(),Rh(t=>{if(!vd(t))return;const e=of(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),I(t=>!0===t)):Hl(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Hl(n);if(r.numberOfChildren>1||!r.children.primary)return xd(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new vf(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return hf(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return hf(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new yf(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Rd(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||sf)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Pd(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new yf(t.segments.concat(e.segments),e.children)}return t}function Dd(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}class jd{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Ld{constructor(t,e){this.component=t,this.route=e}}function Md(t,e,n){const r=t._root;return Vd(r,e?e._root:null,n,[r.value])}function Fd(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Vd(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Bf(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!_f(t.url,e.url);case"pathParamsOrQueryParamsChange":return!_f(t.url,e.url)||!af(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xf(t,e)||!af(t.queryParams,e.queryParams);case"paramsChange":default:return!Xf(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new jd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Vd(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ld(a.outlet.component,s))}else s&&Ud(e,a,i),i.canActivateChecks.push(new jd(r)),Vd(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),hf(o,(t,e)=>Ud(t,n.getContext(e),i)),i}function Ud(t,e,n){const r=Bf(t),i=t.value;hf(r,(t,r)=>{Ud(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Ld(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function qd(t,e){return null!==t&&e&&e(new Xh(t)),Hl(!0)}function Bd(t,e){return null!==t&&e&&e(new Jh(t)),Hl(!0)}function Hd(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Hl(r.map(r=>th(()=>{const i=Fd(r,e,n);let o;if(function(t){return t&&gd(t.canActivate)}(i))o=ff(i.canActivate(e,t));else{if(!gd(i))throw new Error("Invalid CanActivate guard");o=ff(i(e,t))}return o.pipe(xh())}))).pipe(bd()):Hl(!0)}function zd(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>th(()=>Hl(e.guards.map(i=>{const o=Fd(i,e.node,n);let s;if(function(t){return t&&gd(t.canActivateChild)}(o))s=ff(o.canActivateChild(r,t));else{if(!gd(o))throw new Error("Invalid CanActivateChild guard");s=ff(o(r,t))}return s.pipe(xh())})).pipe(bd())));return Hl(i).pipe(bd())}class Kd{}class Wd{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=Qd(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,ef),n=new Gf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ef,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new qf(n,e),i=new $f(this.url,r);return this.inheritParamsAndData(i._root),Hl(i)}catch(Ex){return new y(e=>e.error(Ex))}}inheritParamsAndData(t){const e=t.value,n=Wf(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=wf(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===ef?-1:e.value.outlet===ef?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(Ex){if(!(Ex instanceof Kd))throw Ex}if(this.noLeftoversInUrl(e,n,r))return[];throw new Kd}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Kd;if((t.outlet||ef)!==r)throw new Kd;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?lf(n).parameters:{};i=new Gf(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Yd(t),r,t.component,t,Gd(e),$d(e)+n.length,Xd(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Kd;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||sf)(n,t,e);if(!r)throw new Kd;const i={};hf(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new Gf(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Yd(t),r,t.component,t,Gd(e),$d(e)+o.length,Xd(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Qd(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new qf(i,t)]}if(0===a.length&&0===c.length)return[new qf(i,[])];const l=this.processSegment(a,u,c,ef);return[new qf(i,l)]}}function Gd(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function $d(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Qd(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Jd(t,e,n)&&Sd(n)!==ef)}(t,n,r)){const i=new yf(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Sd(o)!==ef){const n=new yf([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Sd(o)]=n}return i}(t,e,r,new yf(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Jd(t,e,n))}(t,n,r)){const o=new yf(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Jd(t,n,a)&&!i[Sd(a)]){const n=new yf([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Sd(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new yf(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Jd(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Yd(t){return t.data||{}}function Xd(t){return t.resolve||{}}function Zd(t){return function(e){return e.pipe(gh(e=>{const n=t(e);return n?L(n).pipe(I(()=>e)):L([e])}))}}class tp extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const ep=new Bn("ROUTES");class np{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(I(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new md(cf(r.injector.get(ep)).map(Td),r)}))}loadModuleFactory(t){return"string"==typeof t?L(this.loader.load(t)):ff(t()).pipe(U(t=>t instanceof Ga?Hl(t):L(this.compiler.compileModuleAsync(t))))}}class rp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ip,this.attachRef=null}}class ip{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new rp,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class op{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function sp(t){throw t}function ap(t,e,n){return e.parse("/")}function up(t,e){return Hl(null)}let cp=(()=>{class t{constructor(t,e,n,r,i,o,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new C,this.errorHandler=sp,this.malformedUriErrorHandler=ap,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:up,afterPreactivation:up},this.urlHandlingStrategy=new op,this.routeReuseStrategy=new tp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=i.get(Wa),this.console=i.get(Uu);const u=i.get(Zu);this.isNgZoneEnabled=u instanceof Zu,this.resetConfig(a),this.currentUrlTree=new vf(new yf([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new np(o,s,t=>this.triggerEvent(new $h(t)),t=>this.triggerEvent(new Qh(t))),this.routerState=zf(this.currentUrlTree,this.rootComponentType),this.transitions=new zl({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(nh(t=>0!==t.id),I(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),gh(t=>{let n=!1,r=!1;return Hl(t).pipe(Rh(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),gh(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Hl(t).pipe(gh(t=>{const n=this.transitions.getValue();return e.next(new Vh(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Xl:[t]}),gh(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(gh(t=>function(t,e,n,r,i){return new Nd(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(I(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Rh(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(U(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Wd(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(I(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Rh(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Rh(t=>{const n=new Hh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Vh(n,this.serializeUrl(r),i,o);e.next(a);const u=zf(r,this.rootComponentType).snapshot;return Hl(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Xl}),Zd(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Rh(t=>{const e=new zh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),I(t=>Object.assign(Object.assign({},t),{guards:Md(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(U(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Hl(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return L(t).pipe(U(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Hl(o.map(o=>{const s=Fd(o,e,i);let a;if(function(t){return t&&gd(t.canDeactivate)}(s))a=ff(s.canDeactivate(t,e,n,r));else{if(!gd(s))throw new Error("Invalid CanDeactivate guard");a=ff(s(t,e,n,r))}return a.pipe(xh())})).pipe(bd()):Hl(!0)}(t.component,t.route,n,e,r)),xh(t=>!0!==t,!0))}(s,r,i,t).pipe(U(n=>n&&"boolean"==typeof n?function(t,e,n,r){return L(e).pipe(Ah(e=>L([Bd(e.route.parent,r),qd(e.route,r),zd(t,e.path,n),Hd(t,e.route,n)]).pipe(eh(),xh(t=>!0!==t,!0))),xh(t=>!0!==t,!0))}(r,o,t,e):Hl(n)),I(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Rh(t=>{if(vd(t.guardsResult)){const e=of(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Rh(t=>{const e=new Kh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),nh(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new qh(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Zd(t=>{if(t.guards.canActivateChecks.length)return Hl(t).pipe(Rh(t=>{const e=new Wh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),gh(t=>{let n=!1;return Hl(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(U(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Hl(t);let o=0;return L(n).pipe(Ah(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Hl({});const o={};return L(i).pipe(U(i=>function(t,e,n,r){const i=Fd(t,e,r);return ff(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Rh(t=>{o[i]=t}))),sh(1),U(()=>Object.keys(o).length===i.length?Hl(o):Xl))}(t._resolve,t,e,r).pipe(I(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Wf(t,n).resolve),null)))}(t.route,e,r,i)),Rh(()=>o++),sh(1),U(e=>o===n.length?Hl(t):Xl))}))}),Rh({next:()=>n=!0,complete:()=>{if(!n){const n=new qh(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Rh(t=>{const e=new Gh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Zd(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),I(t=>{const e=function(t,e,n){const r=Zf(t,e._root,n?n._root:void 0);return new Hf(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Rh(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),I(t=>(new dd(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),Rh({next(){n=!0},complete(){n=!0}}),jh(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new qh(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Ih(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=vd(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new qh(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Bh(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return Xl}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){wd(t),this.config=t.map(Td),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return rd(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new od(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return hf(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new od(n,e,r)}(n);if(o.toRoot())return rd(e.root,new yf([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new sd(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new sd(t,t===e.root,0)}const r=ed(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new sd(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?ud(s.segmentGroup,s.index,o.commands):ad(s.segmentGroup,s.index,o.commands);return rd(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=vd(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Ex){e=this.malformedUriErrorHandler(Ex,this.urlSerializer,t)}return e}isActive(t,e){if(vd(t))return df(this.currentUrlTree,t,e);const n=this.parseUrl(t);return df(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Uh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(lr(zn),lr(Ef),lr(ip),lr(Gc),lr(Zo),lr(Ec),lr(Ju),lr(void 0))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),lp=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new lu,this.deactivateEvents=new lu,this.name=r||ef,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new hp(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(ps(ip),ps(Qa),ps(la),Vn("name"),ps(Ma))},t.\u0275dir=Kt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class hp{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Kf?this.route:t===ip?this.childContexts:this.parent.get(t,e)}}class fp{}class dp{preload(t,e){return Hl(null)}}let pp=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new np(e,n,e=>t.triggerEvent(new $h(e)),e=>t.triggerEvent(new Qh(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(nh(t=>t instanceof Uh),Ah(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Wa);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return L(n).pipe(H(),I(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(U(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(lr(cp),lr(Ec),lr(Ju),lr(Zo),lr(fp))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),mp=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Vh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Uh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof tf&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new tf(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(lr(cp),lr(ll),lr(void 0))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const gp=new Bn("ROUTER_CONFIGURATION"),vp=new Bn("ROUTER_FORROOT_GUARD"),yp=[Gc,{provide:Ef,useClass:Cf},{provide:cp,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new cp(null,t,e,n,r,i,o,cf(s));if(u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing){const t=Nc();l.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return l},deps:[Ef,ip,Gc,Zo,Ec,Ju,ep,gp,[class{},new tr],[class{},new tr]]},ip,{provide:Kf,useFactory:function(t){return t.routerState.root},deps:[cp]},{provide:Ec,useClass:Sc},pp,dp,class{preload(t,e){return e().pipe(Ih(()=>Hl(null)))}},{provide:gp,useValue:{enableTracing:!1}}];function bp(){return new mc("Router",cp)}let _p=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[yp,Tp(e),{provide:vp,useFactory:Cp,deps:[[cp,new tr,new nr]]},{provide:gp,useValue:n||{}},{provide:Bc,useFactory:Ep,deps:[Pc,[new Zn(zc),new tr],gp]},{provide:mp,useFactory:wp,deps:[cp,ll,gp]},{provide:fp,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:dp},{provide:mc,multi:!0,useFactory:bp},[Sp,{provide:Ru,multi:!0,useFactory:Ip,deps:[Sp]},{provide:kp,useFactory:Op,deps:[Sp]},{provide:Vu,multi:!0,useExisting:kp}]]}}static forChild(e){return{ngModule:t,providers:[Tp(e)]}}}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)(lr(vp,8),lr(cp,8))}}),t})();function wp(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new mp(t,e,n)}function Ep(t,e,n={}){return n.useHash?new Wc(t,e):new Kc(t,e)}function Cp(t){return"guarded"}function Tp(t){return[{provide:Hn,multi:!0,useValue:t},{provide:ep,multi:!0,useValue:t}]}let Sp=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new C}appInitializer(){return this.injector.get(jc,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(cp),r=this.injector.get(gp);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Hl(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(gp),n=this.injector.get(pp),r=this.injector.get(mp),i=this.injector.get(cp),o=this.injector.get(_c);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(lr(Zo))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Ip(t){return t.appInitializer.bind(t)}function Op(t){return t.bootstrapListener.bind(t)}const kp=new Bn("Router Initializer");function Ap(...t){if(1===t.length){const e=t[0];if(u(e))return xp(e,null);if(c(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return xp(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return xp(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(I(t=>e(...t)))}return xp(t,null)}function xp(t,e){return new y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=L(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Np=new Bn("NgValueAccessor"),Rp={provide:Np,useExisting:ot(()=>Pp),multi:!0};let Pp=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(ps(ga),ps(pa))},t.\u0275dir=Kt({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&Ss("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[aa([Rp])]}),t})();const Dp={provide:Np,useExisting:ot(()=>Lp),multi:!0},jp=new Bn("CompositionEventMode");let Lp=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Nc()?Nc().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(ps(ga),ps(pa),ps(jp,8))},t.\u0275dir=Kt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Ss("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[aa([Dp])]}),t})();function Mp(t){return null==t||0===t.length}function Fp(t){return null!=t&&"number"==typeof t.length}const Vp=new Bn("NgValidators"),Up=new Bn("NgAsyncValidators"),qp=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Bp{static min(t){return e=>{if(Mp(e.value)||Mp(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Mp(e.value)||Mp(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Mp(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Mp(t.value)||qp.test(t.value)?null:{email:!0}}static minLength(t){return e=>Mp(e.value)||!Fp(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>Fp(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Bp.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Mp(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(Hp);return 0==e.length?null:function(t){return Kp(Wp(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(Hp);return 0==e.length?null:function(t){return Ap(Wp(t,e).map(zp)).pipe(I(Kp))}}}function Hp(t){return null!=t}function zp(t){const e=Cs(t)?L(t):t;return Ts(e),e}function Kp(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Wp(t,e){return e.map(e=>e(t))}function Gp(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function $p(t){return null!=t?Bp.compose(Gp(t)):null}function Qp(t){return null!=t?Bp.composeAsync(Gp(t)):null}function Jp(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Yp(t){return t._rawValidators}function Xp(t){return t._rawAsyncValidators}let Zp=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=$p(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Qp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Kt({type:t}),t})(),tm=(()=>{class t extends Zp{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return em(e||t)},t.\u0275dir=Kt({type:t,features:[es]}),t})();const em=Fn(tm);class nm extends Zp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rm{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let im=(()=>{class t extends rm{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(ps(nm,2))},t.\u0275dir=Kt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&Ms("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[es]}),t})(),om=(()=>{class t extends rm{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(ps(tm,2))},t.\u0275dir=Kt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&Ms("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[es]}),t})();const sm={provide:Np,useExisting:ot(()=>am),multi:!0};let am=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(ps(ga),ps(pa))},t.\u0275dir=Kt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&Ss("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[aa([sm])]}),t})();const um={provide:Np,useExisting:ot(()=>lm),multi:!0};let cm=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),lm=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(nm),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(ps(ga),ps(pa),ps(cm),ps(Zo))},t.\u0275dir=Kt({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&Ss("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[aa([um])]}),t})();const hm={provide:Np,useExisting:ot(()=>fm),multi:!0};let fm=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(ps(ga),ps(pa))},t.\u0275dir=Kt({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&Ss("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[aa([hm])]}),t})();const dm={provide:Np,useExisting:ot(()=>pm),multi:!0};let pm=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(ps(ga),ps(pa))},t.\u0275dir=Kt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&Ss("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[aa([dm])]}),t})();const mm={provide:Np,useExisting:ot(()=>gm),multi:!0};let gm=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(ps(ga),ps(pa))},t.\u0275dir=Kt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&Ss("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[aa([mm])]}),t})();function vm(t,e){bm(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&wm(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&wm(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function ym(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function bm(t,e,n){const r=Yp(t);null!==e.validator?t.setValidators(Jp(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=Xp(t);if(null!==e.asyncValidator?t.setAsyncValidators(Jp(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();ym(e._rawValidators,n),ym(e._rawAsyncValidators,n)}}function _m(t,e,n){if(null!==t){if(null!==e.validator){const n=Yp(t);Array.isArray(n)&&n.length>0&&t.setValidators(n.filter(t=>t!==e.validator))}if(null!==e.asyncValidator){const n=Xp(t);Array.isArray(n)&&n.length>0&&t.setAsyncValidators(n.filter(t=>t!==e.asyncValidator))}}if(n){const t=()=>{};ym(e._rawValidators,t),ym(e._rawAsyncValidators,t)}}function wm(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Em(t,e){bm(t,e,!1)}function Cm(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}const Tm=[Pp,fm,am,pm,gm,lm];function Sm(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function Im(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===Lp?n=t:(e=t,Tm.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}function Om(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const km="VALID",Am="INVALID",xm="PENDING",Nm="DISABLED";function Rm(t){return(Lm(t)?t.validators:t)||null}function Pm(t){return Array.isArray(t)?$p(t):t||null}function Dm(t,e){return(Lm(e)?e.asyncValidators:t)||null}function jm(t){return Array.isArray(t)?Qp(t):t||null}function Lm(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Mm{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Pm(this._rawValidators),this._composedAsyncValidatorFn=jm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===km}get invalid(){return this.status===Am}get pending(){return this.status==xm}get disabled(){return this.status===Nm}get enabled(){return this.status!==Nm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Pm(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=jm(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=xm,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Nm,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=km,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==km&&this.status!==xm||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nm:km}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=xm,this._hasOwnPendingAsyncValidator=!0;const e=zp(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Vm?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Um&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new lu,this.statusChanges=new lu}_calculateStatus(){return this._allControlsDisabled()?Nm:this.errors?Am:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xm)?xm:this._anyControlsHaveStatus(Am)?Am:km}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Lm(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Fm extends Mm{constructor(t=null,e,n){super(Rm(e),Dm(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Om(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Om(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Vm extends Mm{constructor(t,e,n){super(Rm(e),Dm(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Fm?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Um extends Mm{constructor(t,e,n){super(Rm(e),Dm(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Fm?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const qm={provide:tm,useExisting:ot(()=>Hm)},Bm=(()=>Promise.resolve(null))();let Hm=(()=>{class t extends tm{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new lu,this.form=new Vm({},$p(t),Qp(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Bm.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),vm(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Bm.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Om(this._directives,t)})}addFormGroup(t){Bm.then(()=>{const e=this._findContainer(t.path),n=new Vm({});Em(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Bm.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Bm.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Sm(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(ps(Vp,10),ps(Up,10))},t.\u0275dir=Kt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&Ss("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[aa([qm]),es]}),t})(),zm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Kt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Km=new Bn("NgModelWithFormControlWarning"),Wm={provide:nm,useExisting:ot(()=>Gm)};let Gm=(()=>{class t extends nm{constructor(t,e,n,r){super(),this._ngModelWarningConfig=r,this.update=new lu,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(e),this.valueAccessor=Im(0,n)}set isDisabled(t){}ngOnChanges(t){this._isControlChanged(t)&&(vm(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Cm(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return t.\u0275fac=function(e){return new(e||t)(ps(Vp,10),ps(Up,10),ps(Np,10),ps(Km,8))},t.\u0275dir=Kt({type:t,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[aa([Wm]),es,ue]}),t._ngModelWarningSentOnce=!1,t})();const $m={provide:tm,useExisting:ot(()=>Qm)};let Qm=(()=>{class t extends tm{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new lu,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return vm(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Om(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);Em(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);Em(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,Sm(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){const n=()=>{};e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n),_m(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}(t.control||null,t),e&&vm(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){bm(this.form,this,!1),this._oldForm&&_m(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(ps(Vp,10),ps(Up,10))},t.\u0275dir=Kt({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&Ss("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[aa([$m]),es,ue]}),t})();const Jm={provide:nm,useExisting:ot(()=>Ym)};let Ym=(()=>{class t extends nm{constructor(t,e,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new lu,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=Im(0,r)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Cm(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(t,e){return[...e.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(ps(tm,13),ps(Vp,10),ps(Up,10),ps(Np,10),ps(Km,8))},t.\u0275dir=Kt({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[aa([Jm]),es,ue]}),t._ngModelWarningSentOnce=!1,t})(),Xm=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)}}),t})(),Zm=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new Vm(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new Fm(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Um(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Fm||t instanceof Vm||t instanceof Um?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),tg=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[cm],imports:[Xm]}),t})(),eg=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Km,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[Zm,cm],imports:[Xm]}),t})();var ng=n("zIRd");(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.i(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.i(t)},e.prototype.g=function(t){this.h(2,t)},e.prototype.i=function(t){this.h(1,t)},e.prototype.h=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Pa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Pa(e,n)})},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e(function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Pa(i(s.length-1),e),r=n.next()}while(!r.done)})},e});var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==h(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,g)&&t[g]||(t[g]=++v)}var g="closure_uid_"+(1e9*Math.random()>>>0),v=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:b).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function C(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(t){return t}function S(t,e,n){this.code=k+t,this.message=e||A[t]||"",this.a=n||null}function I(t){var e=t&&t.code;return e?new S(e.substring(k.length),t.message,t.serverResponse):null}C(S,Error),S.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},S.prototype.toJSON=function(){return this.w()};var O,k="auth/",A={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},x={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in x)if(x[e].id===t)return{firebaseEndpoint:(t=x[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function R(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function j(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function M(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function F(){this.b=this.a=null}O=N("__EID__")?"__EID__":void 0,C(P,Error),P.prototype.name="CustomError",C(D,P),D.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new L(function(){return new q},function(t){t.reset()});function U(){var t=ve,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function q(){this.next=this.b=this.a=null}F.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function G(t,e){return 0<=B(t,e)}function $(t,e){var n;return(n=0<=(e=B(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Q(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function J(t){return Array.prototype.concat.apply([],arguments)}function Y(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var X,Z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,rt=/"/g,it=/'/g,ot=/\x00/g,st=/[\x00&<>"']/;function at(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var ct=s.navigator;if(ct){var lt=ct.userAgent;if(lt){X=lt;break t}}X=""}function ht(t){return at(X,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function dt(t){for(var e in t)return!1;return!0}function pt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(p(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;j("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function yt(t,e){this.a=t===Et&&e||"",this.b=wt}function bt(t){return t instanceof yt&&t.constructor===yt&&t.b===wt?t.a:(j("expected object of type Const, got '"+t+"'"),"type_error:Const")}yt.prototype.sa=!0,yt.prototype.ra=function(){return this.a},yt.prototype.toString=function(){return"Const{"+this.a+"}"};var _t,wt={},Et={};function Ct(){if(void 0===_t){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:T,createScript:T,createScriptURL:T})}catch(n){s.console&&s.console.error(n.message)}_t=t}else _t=t}return _t}function Tt(t,e){this.a=e===At?t:""}function St(t){return t instanceof Tt&&t.constructor===Tt?t.a:(j("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function It(t,e){var n=bt(t);if(!kt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Ct();return new Tt(t=e?e.createScriptURL(t):t,At)}(t=n.replace(Ot,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof yt?bt(t):encodeURIComponent(String(t))}))}Tt.prototype.sa=!0,Tt.prototype.ra=function(){return this.a.toString()},Tt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ot=/%{(\w+)}/g,kt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,At={};function xt(t,e){this.a=e===Mt?t:""}function Nt(t){return t instanceof xt&&t.constructor===xt?t.a:(j("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}xt.prototype.sa=!0,xt.prototype.ra=function(){return this.a.toString()},xt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Rt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Pt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Dt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function jt(t){if(t instanceof xt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t))t=new xt(t,Mt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Pt);t=e&&Rt.test(e[1])?new xt(t,Mt):null}return t}function Lt(t){return t instanceof xt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t)||(t="about:invalid#zClosurez"),new xt(t,Mt))}var Mt={},Ft=new xt("about:invalid#zClosurez",Mt);function Vt(t,e,n){this.a=n===Ut?t:""}Vt.prototype.sa=!0,Vt.prototype.ra=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function qt(t,e,n,r){return t=t instanceof xt?t:Lt(t),e=e||s,n=n instanceof yt?bt(n):n||"",e.open(Nt(t),n,r,void 0)}function Bt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return st.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(rt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=l;var Kt,Wt,Gt=ht("Opera"),$t=ht("Trident")||ht("MSIE"),Qt=ht("Edge"),Jt=Qt||$t,Yt=ht("Gecko")&&!(at(X.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Xt=at(X.toLowerCase(),"webkit")&&!ht("Edge");function Zt(){var t=s.document;return t?t.documentMode:void 0}t:{var te="",ee=(Wt=X,Yt?/rv:([^\);]+)(\)|;)/.exec(Wt):Qt?/Edge\/([\d\.]+)/.exec(Wt):$t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Wt):Xt?/WebKit\/(\S+)/.exec(Wt):Gt?/(?:Version)[ \/]?(\S+)/.exec(Wt):void 0);if(ee&&(te=ee?ee[1]:""),$t){var ne=Zt();if(null!=ne&&ne>parseFloat(te)){Kt=String(ne);break t}}Kt=te}var re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Z(String(Kt)).split("."),r=Z(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ut(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ut(0==s[2].length,0==a[2].length)||ut(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var oe=s.document&&$t&&(Zt()||parseInt(Kt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Wt){}var se=!$t||9<=Number(oe);function ae(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ue(t,e){ft(e,function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:he.hasOwnProperty(n)?t.setAttribute(he[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var ce,le,he={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||p(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(p(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){s="function"==typeof o.item;break t}}s=!1}H(s?Y(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function pe(t){s.setTimeout(function(){throw t},0)}function me(t,e){le||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);le=function(){t.then(ye)}}else le=function(){var t=ye;!d(s.setImmediate)||s.Window&&s.Window.prototype&&!ht("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(ce||(ce=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),ce(t)):s.setImmediate(t)}}(),ge||(le(),ge=!0),ve.add(t,e)}var ge=!1,ve=new F;function ye(){for(var t;t=U();){try{t.a.call(t.b)}catch(e){pe(e)}M(V,t)}ge=!1}function be(t,e){if(this.a=_e,this.h=void 0,this.f=this.b=this.c=null,this.g=this.i=!1,t!=l)try{var n=this;t.call(e,function(t){Pe(n,we,t)},function(t){if(!(t instanceof Ue))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(Ex){}Pe(n,Ee,t)})}catch(r){Pe(this,Ee,r)}}var _e=0,we=2,Ee=3;function Ce(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ce.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Te=new L(function(){return new Ce},function(t){t.reset()});function Se(t,e,n){var r=Te.get();return r.g=t,r.b=e,r.f=n,r}function Ie(t){if(t instanceof be)return t;var e=new be(l);return Pe(e,we,t),e}function Oe(t){return new be(function(e,n){n(t)})}function ke(t,e,n){De(t,e,n,null)||me(w(e,t))}function Ae(t){return new be(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)ke(t[o],w(i,o,!0),w(i,o,!1));else e(r)})}function xe(t,e){if(t.a==_e)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==_e&&1==r?xe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Le(n),Me(n,i,Ee,e)))}t.c=null}else Pe(t,Ee,e)}function Ne(t,e){t.b||t.a!=we&&t.a!=Ee||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=Se(null,null,null);return i.a=new be(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ue?o(e):t(i)}catch(s){o(s)}}:o}),i.a.c=t,Ne(t,i),i.a}function Pe(t,e,n){t.a==_e&&(t===n&&(e=Ee,n=new TypeError("Promise cannot resolve to itself")),t.a=1,De(n,t.Zc,t.$c,t)||(t.h=n,t.a=e,t.c=null,je(t),e!=Ee||n instanceof Ue||function(t,e){t.g=!0,me(function(){t.g&&Ve.call(null,e)})}(t,n)))}function De(t,e,n,r){if(t instanceof be)return Ne(t,Se(e||l,n||null,r)),!0;if(R(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function je(t){t.i||(t.i=!0,me(t.fc,t))}function Le(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Me(t,e,n,r){if(n==Ee&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Fe(e,n,r);else try{e.c?e.g.call(e.f):Fe(e,n,r)}catch(Ex){Ve.call(null,Ex)}M(Te,e)}function Fe(t,e,n){e==we?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return Re(this,d(t)?t:null,d(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).na=function(t,e){return(t=Se(t,t,e)).c=!0,Ne(this,t),this},t.o=function(t,e){return Re(this,null,t,e)},t.cancel=function(t){if(this.a==_e){var e=new Ue(t);me(function(){xe(this,e)},this)}},t.Zc=function(t){this.a=_e,Pe(this,we,t)},t.$c=function(t){this.a=_e,Pe(this,Ee,t)},t.fc=function(){for(var t;t=Le(this);)Me(this,t,this.a,this.h);this.i=!1};var Ve=pe;function Ue(t){P.call(this,t)}function qe(){0!=Be&&(He[m(this)]=this),this.xa=this.xa,this.oa=this.oa}C(Ue,P),Ue.prototype.name="cancel";var Be=0,He={};function ze(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Be)){var e=m(t);if(0!=Be&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete He[e]}}qe.prototype.xa=!1,qe.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Ke=Object.freeze||function(t){return t},We=!$t||9<=Number(oe),Ge=$t&&!ie("9"),$e=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(n){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Je(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Yt){t:{try{zt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ye[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},C(Je,Qe);var Ye=Ke({2:"touch",3:"pen",4:"mouse"});Je.prototype.preventDefault=function(){Je.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ge)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Je.prototype.g=function(){return this.a};var Xe="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++Ze,this.va=this.Oa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&$(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new tn(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)ln(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Xe]?wn(t,e,n,p(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i,a=vn(t);if(a||(t[sn]=a=new nn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=gn,e=We?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(dn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=bn(n),t&&t[Xe]?En(t,e,n,p(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=bn(n),t&&t[Xe]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=vn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Xe])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(dn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vn(e))?(rn(n,t),0==n.b&&(n.src=null,e[sn]=null)):en(t)}}}function dn(t){return t in an?an[t]:an[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=vn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=mn(o,r),i=i&&!1!==o)}return i}function mn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&fn(t),n.call(r,e)}function gn(t,e){if(t.va)return!0;if(!We){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Je(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return mn(t,new Je(e,this))}function vn(t){return(t=t[sn])instanceof nn?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return d(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function _n(){qe.call(this),this.v=new nn(this),this.$b=this,this.fb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function En(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Cn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Ua||s.src;s.Oa&&rn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Tn(t,e,n){if(d(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Sn(t){var e=null;return new be(function(n,r){-1==(e=Tn(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw s.clearTimeout(e),t})}function In(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function On(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}C(_n,qe),_n.prototype[Xe]=!0,_n.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},_n.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},_n.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;gt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Cn(s,r,!0,t)&&i}if(i=Cn(s=t.b=n,r,!0,t)&&i,i=Cn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Cn(s=t.b=e[o],r,!1,t)&&i;return i},_n.prototype.Da=function(){if(_n.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=kn.prototype).V=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return An(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return xn(this.b,t)?this.b[t]:e},t.set=function(t,e){xn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Nn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.i=this.c="",this.h=!1,t instanceof Rn?(this.h=void 0!==e?e:t.h,Pn(this,t.f),this.l=t.l,this.a=t.a,Dn(this,t.g),this.c=t.c,jn(this,tr(t.b)),this.i=t.i):t&&(n=String(t).match(Nn))?(this.h=!!e,Pn(this,n[1]||"",!0),this.l=Un(n[2]||""),this.a=Un(n[3]||"",!0),Dn(this,n[4]),this.c=Un(n[5]||"",!0),jn(this,n[6]||"",!0),this.i=Un(n[7]||"")):(this.h=!!e,this.b=new $n(null,this.h))}function Pn(t,e,n){t.f=n?Un(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Dn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Yn(this,e),Zn(this,n,t))},t)),t.f=e}(t.b,t.h)):(n||(e=qn(e,Wn)),t.b=new $n(e,t.h))}function Ln(t,e,n){t.b.set(e,n)}function Mn(t,e){return t.b.get(e)}function Fn(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function Vn(t,e,n,r){var i=new Rn(null,void 0);return t&&Pn(i,t),e&&(i.a=e),n&&Dn(i,n),r&&(i.c=r),i}function Un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qn(e,Hn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Hn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Kn:zn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",qn(n,Gn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.f;n?Pn(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)Dn(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(at(i,"./")||at(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?jn(e,tr(t.b)):n=!!t.i,n&&(e.i=t.i),e};var Hn=/[#\/\?@]/g,zn=/[#\?:]/g,Kn=/[#\?]/g,Wn=/[#\?@]/g,Gn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Jn(t){var e=On(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=In(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Yn(t,e){Qn(t),e=er(t,e),xn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}function Xn(t,e){return Qn(t),e=er(t,e),xn(t.a.b,e)}function Zn(t,e,n){Yn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),Y(n)),t.b+=n.length)}function tr(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new kn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),ar(r,n),n.push(":"),ir(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ar(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Qn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach(function(n,r){H(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){Qn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Qn(this);var e=[];if("string"==typeof t)Xn(this,t)&&(e=J(e,this.a.get(er(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,Xn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(t,e){e.push('"',t.replace(sr,function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e}),'"')}function ur(){var t=kr();return $t&&!!oe&&11==oe||/Edge\/\d+/.test(t)}function cr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function lr(t,e){e=e||s.window;var n="about:blank";t&&(n=Nt(jt(t)||Ft)),e.location.href=n}function hr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<hr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||kr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function dr(t){t=t||s.window;try{t.close()}catch(e){}}function pr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=kr().toLowerCase(),r&&(e.target=r,at(n,"crios/")&&(e.target="_blank")),Sr(kr())==Cr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof xt?n:jt(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(s=de(document,"A"),"HTMLAnchorElement"),e=e instanceof xt?e:Lt(e),s.href=Nt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=qt("",r,n,s),t=Nt(e),s&&(Jt&&at(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new Vt(t=(r=Ct())?r.createHTML(t):t,null,Ut),r=s.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(j("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}(t)),r.close())):(s=qt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var mr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gr=/^[^@]+@[^@]+$/;function vr(){var t=null;return new be(function(e){"complete"==s.document.readyState?e():(t=function(){e()},ln(window,"load",t))}).o(function(e){throw hn(window,"load",t),e})}function yr(t){return t=t||kr(),!("file:"!==Pr()&&"ionic:"!==Pr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function _r(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function wr(){return ng.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ng.a.INTERNAL.hasOwnProperty("node")?"Node":_r()?"Worker":"Browser"}function Er(){var t=wr();return"ReactNative"===t||"Node"===t}var Cr="Firefox",Tr="Chrome";function Sr(t){var e=t.toLowerCase();return at(e,"opera/")||at(e,"opr/")||at(e,"opios/")?"Opera":at(e,"iemobile")?"IEMobile":at(e,"msie")||at(e,"trident/")?"IE":at(e,"edge/")?"Edge":at(e,"firefox/")?Cr:at(e,"silk/")?"Silk":at(e,"blackberry")?"Blackberry":at(e,"webos")?"Webos":!at(e,"safari/")||at(e,"chrome/")||at(e,"crios/")||at(e,"android")?!at(e,"chrome/")&&!at(e,"crios/")||at(e,"edge/")?at(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Tr:"Safari"}var Ir={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Or(t,e){e=e||[];var n,r=[],i={};for(n in Ir)i[Ir[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=wr())?r=Sr(i=kr()):"Worker"===r&&(r=Sr(i=kr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function kr(){return s.navigator&&s.navigator.userAgent||""}function Ar(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function xr(){try{var t=s.localStorage,e=Fr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!s.indexedDB}catch(n){return _r()&&!!s.indexedDB}return!1}function Nr(){return(Rr()||"chrome-extension:"===Pr()||yr())&&!Er()&&xr()&&!_r()}function Rr(){return"http:"===Pr()||"https:"===Pr()}function Pr(){return s.location&&s.location.protocol||null}function Dr(t){return!fr(t=t||kr())&&Sr(t)!=Cr}function jr(t){return void 0===t?null:nr(t)}function Lr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Mr(t){if(null!==t)return JSON.parse(t)}function Fr(t){return t||Math.floor(1e9*Math.random()).toString()}function Vr(t){return"Safari"!=Sr(t=t||kr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ur(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=kr(),e=wr(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Hr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function zr(){return!(!Ar("fireauth.oauthhelper",s)&&!Ar("fireauth.iframe",s))}qr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==Pr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Kr,Wr={};function Gr(t){Wr[t]||(Wr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Kr=2==$r.abcd}catch(Wt){Kr=!1}function Qr(t,e,n){Kr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Jr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function Yr(t){var e={};return Jr(e,t),e}function Xr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,Xr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new S("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[ri]),Qr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(n){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),Qr(this,"phoneNumber",t[ii])}function si(t){var e={},n=t[li],r=t[fi],i=t[di];if(t=ti(t[hi]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==ai&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[mi]=n||null,e[vi]=n||null,e[pi]=r):(e[mi]=r||null,e[vi]=r||null,e[pi]=n||null),e[gi]=t||null,Qr(this,bi,i),Qr(this,yi,Xr(e))}C(oi,Zr),oi.prototype.w=function(){var t=oi.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ai="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",li="email",hi="mfaInfo",fi="newEmail",di="requestType",pi="email",mi="fromEmail",gi="multiFactorInfo",vi="previousEmail",yi="data",bi="operation";function _i(t){var e=Mn(t=Fn(t),wi)||null,n=Mn(t,Ei)||null,r=Mn(t,Si)||null;if(r=r&&Oi[r]||null,!e||!n||!r)throw new S("argument-error",wi+", "+Ei+"and "+Si+" are required in a valid action code URL.");Jr(this,{apiKey:e,operation:r,code:n,continueUrl:Mn(t,Ci)||null,languageCode:Mn(t,Ti)||null,tenantId:Mn(t,Ii)||null})}var wi="apiKey",Ei="oobCode",Ci="continueUrl",Ti="languageCode",Si="mode",Ii="tenantId",Oi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ai,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function ki(t){try{return new _i(t)}catch(e){return null}}function Ai(t){var e=t[Di];if(void 0===e)throw new S("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new S("invalid-continue-uri");this.i=e,this.b=this.a=null,this.g=!1;var n=t[xi];if(n&&"object"==typeof n){e=n[Mi];var r=n[ji];if(n=n[Li],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new S("argument-error",ji+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new S("argument-error",Li+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new S("argument-error",Mi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new S("missing-android-pkg-name")}}else if(void 0!==n)throw new S("argument-error",xi+" property must be a non null object when specified.");if(this.f=null,(e=t[Pi])&&"object"==typeof e){if("string"==typeof(e=e[Fi])&&e.length)this.f=e;else if(void 0!==e)throw new S("argument-error",Fi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new S("argument-error",Pi+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new S("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ni])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new S("argument-error",Ni+" property must be a non empty string when specified.");this.h=t||null}var xi="android",Ni="dynamicLinkDomain",Ri="handleCodeInApp",Pi="iOS",Di="url",ji="installApp",Li="minimumVersion",Mi="packageName",Fi="bundleId";function Vi(t){var e={};for(var n in e.continueUrl=t.i,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.h,e)null===e[n]&&delete e[n];return e}var Ui=null;function qi(t){var e=Hi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.i=t,this.a=e.exp,this.h=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Bi(t){try{return new qi(t)}catch(e){return null}}function Hi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ui[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ui){Ui={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ui[o]&&(Ui[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}(t))}catch(r){}return null}qi.prototype.S=function(){return this.f},qi.prototype.l=function(){return this.c},qi.prototype.toString=function(){return this.i};var zi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ki=["client_id","response_type","scope","redirect_uri","state"],Wi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Ki},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Ki},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Ki},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:zi},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Gi(t){for(var e in Wi)if(Wi[e].fa==t)return Wi[e];return null}function $i(t){var e={};e["facebook.com"]=Zi,e["google.com"]=eo,e["github.com"]=to,e["twitter.com"]=no;var n=t&&t[Ji];try{if(n)return e[n]?new e[n](t):new Xi(t);if(void 0!==t[Qi])return new Yi(t)}catch(r){}return null}var Qi="idToken",Ji="providerId";function Yi(t){var e=t[Ji];if(!e&&t[Qi]){var n=Bi(t[Qi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function Xi(t){Yi.call(this,t),Qr(this,"profile",Xr((t=Mr(t.rawUserInfo||"{}"))||{}))}function Zi(t){if(Xi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if(Xi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function eo(t){if(Xi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(Xi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function ro(t){var e=Fn(t),n=Mn(e,"link"),r=Mn(Fn(n),"link");return e=Mn(e,"deep_link_id"),Mn(Fn(e),"link")||e||r||n||t}function io(t,e){if(!t&&!e)throw new S("internal-error","Internal assert: no raw session string available");if(t&&e)throw new S("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?oo:so}C(Xi,Yi),C(Zi,Xi),C(to,Xi),C(eo,Xi),C(no,Xi);var oo="enroll",so="signin";function ao(){}function uo(t,e){return t.then(function(t){if(t[Qs]){var n=Bi(t[Qs]);if(!n||e!=n.h)throw new S("user-mismatch");return t}throw new S("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==k+"user-not-found"?new S("user-mismatch"):t})}function co(t,e){if(!e)throw new S("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ho(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new co(t.providerId,t.pendingToken)}catch(e){}return null}function fo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new S("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function po(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Jn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function mo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new fo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function go(t,e){this.Pc=e||[],Jr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Gi(t)||{}).Ja||null,this.nb=null}function vo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new S("argument-error",'SAML provider IDs must be prefixed with "saml."');go.call(this,t,[])}function yo(t){go.call(this,t,Ki),this.a=[]}function bo(){yo.call(this,"facebook.com")}function _o(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function wo(){yo.call(this,"github.com")}function Eo(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function Co(){yo.call(this,"google.com"),this.Ca("profile")}function To(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new Co).credential({idToken:n,accessToken:e})}function So(){go.call(this,"twitter.com",zi)}function Io(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new S("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new fo("twitter.com",n,"twitter.com")}function Oo(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Ao.EMAIL_LINK_SIGN_IN_METHOD?Ao.EMAIL_LINK_SIGN_IN_METHOD:Ao.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ko(t){return t&&t.email&&t.password?new Oo(t.email,t.password,t.signInMethod):null}function Ao(){Jr(this,{providerId:"password",isOAuthProvider:!1})}function xo(t,e){if(!(e=No(e)))throw new S("argument-error","Invalid email link!");return new Oo(t,e.code,Ao.EMAIL_LINK_SIGN_IN_METHOD)}function No(t){return(t=ki(t=ro(t)))&&t.operation===ui?t:null}function Ro(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new S("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Po(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Ro(e)}return null}function Do(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function jo(t){try{this.a=t||ng.a.auth()}catch(e){throw new S("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Jr(this,{providerId:"phone",isOAuthProvider:!1})}function Lo(t,e){if(!t)throw new S("missing-verification-id");if(!e)throw new S("missing-verification-code");return new Ro({cb:t,bb:e})}function Mo(t){if(t.temporaryProof&&t.phoneNumber)return new Ro({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return To(o,n);case"facebook.com":return _o(n);case"github.com":return Eo(n);case"twitter.com":return Io(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new co(e,s):new fo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new yo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Fo(t){if(!t.isOAuthProvider)throw new S("invalid-oauth-provider")}function Vo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.h=o||null,this.i=s||null,this.a=i||null,!this.g&&!this.a)throw new S("invalid-auth-event");if(this.g&&this.a)throw new S("invalid-auth-event");if(this.g&&!this.f)throw new S("invalid-auth-event")}function Uo(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&I(t.error),t.postBody,t.tenantId):null}function qo(){this.b=null,this.a=[]}io.prototype.Ha=function(){return Ie(this.a?this.a:this.b)},io.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ao.prototype.ja=function(){},ao.prototype.b=function(){},ao.prototype.c=function(){},ao.prototype.w=function(){},co.prototype.ja=function(t){return ga(t,lo(this))},co.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,va(t,n)},co.prototype.c=function(t,e){return uo(ya(t,lo(this)),e)},co.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},fo.prototype.ja=function(t){return ga(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,va(t,n)},fo.prototype.c=function(t,e){return uo(ya(t,po(this)),e)},fo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},go.prototype.Ka=function(t){return this.Hb=pt(t),this},C(vo,go),C(yo,go),yo.prototype.Ca=function(t){return G(this.a,t)||this.a.push(t),this},yo.prototype.Pb=function(){return Y(this.a)},yo.prototype.credential=function(t,e){var n;if(!(n=p(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new S("argument-error","credential failed: must provide the ID token and/or the access token.");return new fo(this.providerId,n,this.providerId)},C(bo,yo),Qr(bo,"PROVIDER_ID","facebook.com"),Qr(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(wo,yo),Qr(wo,"PROVIDER_ID","github.com"),Qr(wo,"GITHUB_SIGN_IN_METHOD","github.com"),C(Co,yo),Qr(Co,"PROVIDER_ID","google.com"),Qr(Co,"GOOGLE_SIGN_IN_METHOD","google.com"),C(So,go),Qr(So,"PROVIDER_ID","twitter.com"),Qr(So,"TWITTER_SIGN_IN_METHOD","twitter.com"),Oo.prototype.ja=function(t){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?Za(t,Ia,{email:this.a,oobCode:this.f}):Za(t,$a,{email:this.a,password:this.f})},Oo.prototype.b=function(t,e){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?Za(t,Oa,{idToken:e,email:this.a,oobCode:this.f}):Za(t,Ua,{idToken:e,email:this.a,password:this.f})},Oo.prototype.c=function(t,e){return uo(this.ja(t),e)},Oo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Jr(Ao,{PROVIDER_ID:"password"}),Jr(Ao,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Jr(Ao,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ja=function(t){return t.eb(Do(this))},Ro.prototype.b=function(t,e){var n=Do(this);return n.idToken=e,Za(t,Ja,n)},Ro.prototype.c=function(t,e){var n=Do(this);return n.operation="REAUTH",uo(t=Za(t,Ya,n),e)},Ro.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},jo.prototype.eb=function(t,e){var n=this.a.a;return Ie(e.verify()).then(function(r){if("string"!=typeof r)throw new S("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=p(t)?t.session:null,o=p(t)?t.phoneNumber:t;return(i&&i.type==oo?i.Ha().then(function(t){return function(t,e){return Za(t,Ba,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==so?i.Ha().then(function(e){return function(t,e){return Za(t,Ha,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return Za(t,Fa,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new S("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Jr(jo,{PROVIDER_ID:"phone"}),Jr(jo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.i&&t.push(this.i),t.join("-")},Vo.prototype.S=function(){return this.i},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,tenantId:this.i,error:this.a&&this.a.w()}};var Bo,Ho=null;function zo(t){var e="unauthorized-domain",n=void 0,r=Fn(t);t=r.a,"chrome-extension"==(r=r.f)?n=Bt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Bt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",S.call(this,e,n)}function Ko(t,e,n){S.call(this,t,n),(t=e||{}).Ib&&Qr(this,"email",t.Ib),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.Yb&&Qr(this,"tenantId",t.Yb)}function Wo(t){if(t.code){var e=t.code||"";0==e.indexOf(k)&&(e=e.substring(k.length));var n={credential:Mo(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new S(e,t.message||void 0);return new Ko(e,n,t.message)}return null}function Go(){}function $o(){}function Qo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(Ex){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Yo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.pc,this),this.a.onerror=_(this.Rb,this),this.a.onprogress=_(this.qc,this),this.a.ontimeout=_(this.uc,this)}function Xo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Zo(t,e,n){this.reset(t,e,n,void 0,void 0)}function ts(t){this.f=t,this.b=this.c=this.a=null}function es(t,e){this.name=t,this.value=e}C(zo,S),C(Ko,S),Ko.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&gt(t,e),t},Ko.prototype.toJSON=function(){return this.w()},Go.prototype.c=null,C($o,Go),$o.prototype.a=function(){var t=Qo(this);return t?new ActiveXObject(t):new XMLHttpRequest},$o.prototype.b=function(){var t={};return Qo(this)&&(t[0]=!0,t[1]=!0),t},Bo=new $o,C(Jo,Go),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Yo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Yo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Xo(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",Xo(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,Xo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Zo.prototype.a=null,Zo.prototype.reset=function(t,e,n,r,i){r||E(),delete this.a},es.prototype.toString=function(){return this.name};var ns=new es("SEVERE",1e3),rs=new es("WARNING",900),is=new es("CONFIG",700),os=new es("FINE",500);function ss(t){return t.c?t.c:t.a?ss(t.a):(j("Root logger has no level set."),null)}ts.prototype.log=function(t,e,n){if(t.value>=ss(this).value)for(d(e)&&(e=e()),t=new Zo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var as={},us=null;function cs(t){var e;if(us||(us=new ts(""),as[""]=us,us.c=is),!(e=as[t])){e=new ts(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=cs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,as[t]=e}return e}function ls(t,e){t&&t.log(os,e,void 0)}function hs(t){this.f=t}function fs(t){_n.call(this),this.u=t,this.i=void 0,this.readyState=ds,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.h=cs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}C(hs,Go),hs.prototype.a=function(){return new fs(this.f)},hs.prototype.b=function(t){return function(){return t}}({}),C(fs,_n);var ds=0;function ps(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function ms(t){t.readyState=4,t.g=null,t.c=null,t.m=null,gs(t)}function gs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function vs(t){_n.call(this),this.headers=new kn,this.O=t||null,this.c=!1,this.A=this.a=null,this.i=this.P=this.l="",this.f=this.N=this.h=this.G=!1,this.g=0,this.s=null,this.m=ys,this.u=this.R=!1}(t=fs.prototype).open=function(t,e){if(this.readyState!=ds)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,gs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.i,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this)),this.readyState=ds},t.tc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,gs(this)),this.a&&(this.readyState=3,gs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ps(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ms(this):gs(this),3==this.readyState&&ps(this)}},t.sc=function(t){this.a&&(this.response=this.responseText=t,ms(this))},t.rc=function(t){this.a&&(this.response=t,ms(this))},t.Ta=function(t){var e=this.h;e&&e.log(rs,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ms(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(rs,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(rs,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return"include"===this.i},set:function(t){this.i=t?"include":"same-origin"}}),C(vs,_n);var ys="";vs.prototype.b=cs("goog.net.XhrIo");var bs=/^https?$/i,_s=["POST","PUT"];function ws(t){return"content-type"==t.toLowerCase()}function Es(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.i=e,Cs(t),Ss(t)}function Cs(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ts(t){if(t.c&&void 0!==o)if(t.A[1]&&4==Os(t)&&2==ks(t))ls(t.b,As(t,"Local request error detected and ignored"));else if(t.h&&4==Os(t))Tn(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==Os(t)){ls(t.b,As(t,"Request complete")),t.c=!1;try{var e,n=ks(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(Nn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!bs.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Os(t)?t.a.statusText:""}catch(l){ls(t.b,"Can not get status: "+l.message),c=""}t.i=c+" ["+ks(t)+"]",Cs(t)}}finally{Ss(t)}}}function Ss(t,e){if(t.a){Is(t);var n=t.a,r=t.A[0]?l:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(Ex){(t=t.b)&&t.log(ns,"Problem encountered resetting onreadystatechange: "+Ex.message,void 0)}}}function Is(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Os(t){return t.a?t.a.readyState:0}function ks(t){try{return 2<Os(t)?t.a.status:-1}catch(e){return-1}}function As(t,e){return e+" ["+t.P+" "+t.l+" "+ks(t)+"]"}function xs(t){var e=qs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.h=!1,this.i=0,this.b=null,this.l=0}function Ns(t,e,n){t.a=!0,t.c=n,t.f=!e,js(t)}function Rs(t){if(t.a){if(!t.m)throw new Ls(t);t.m=!1}}function Ps(t,e,n,r){t.g.push([e,n,r]),t.a&&js(t)}function Ds(t){return W(t.g,function(t){return d(t[1])})}function js(t){if(t.i&&t.a&&Ds(t)){var e=t.i,n=Vs[e];n&&(s.clearTimeout(n.a),delete Vs[e]),t.i=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.h;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(R(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.h=!0)}catch(c){e=c,t.f=!0,Ds(t)||(n=!0)}}t.c=e,r&&(u=_(t.v,t,!0),r=_(t.v,t,!1),e instanceof xs?(Ps(e,u,r),e.A=!0):e.then(u,r)),n&&(e=new Fs(e),Vs[e.a]=e,t.i=e.a)}function Ls(){P.call(this)}function Ms(){P.call(this)}function Fs(t){this.a=s.setTimeout(_(this.c,this),0),this.b=t}(t=vs.prototype).Ma=function(){void 0!==o&&this.a&&(this.i="Timed out after "+this.g+"ms, aborting",ls(this.b,As(this,this.i)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ls(this.b,As(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ss(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ss(this,!0)),vs.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.h||this.f?Ts(this):this.Ic())},t.Ic=function(){Ts(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ys:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ns,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ls(this.b,"Can not get response: "+e.message),null}},xs.prototype.cancel=function(t){if(this.a)this.c instanceof xs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.m=!0,this.a||(t=new Ms(this),Rs(this),Ns(this,!1,t))}},xs.prototype.v=function(t,e){this.h=!1,Ns(this,t,e)},xs.prototype.then=function(t,e,n){var r,i,o=new be(function(t,e){r=t,i=e});return Ps(this,r,function(t){t instanceof Ms?o.cancel():i(t)}),o.then(t,e,n)},xs.prototype.$goog_Thenable=!0,C(Ls,P),Ls.prototype.message="Deferred has already fired",Ls.prototype.name="AlreadyCalledError",C(Ms,P),Ms.prototype.message="Deferred was canceled",Ms.prototype.name="CanceledError",Fs.prototype.c=function(){throw delete Vs[this.a],this.b};var Vs={};function Us(t){var e={},n=e.document||document,r=St(t).toString(),i=de(document,"SCRIPT"),o={Vb:i,Ma:void 0},a=new xs(o),l=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(l=window.setTimeout(function(){Bs(i,!0);var t=new Ks(zs,"Timeout reached for loading script "+r);Rs(a),Ns(a,!1,t)},h),o.Ma=l),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Bs(i,e.wd||!1,l),Rs(a),Ns(a,!0,null))},i.onerror=function(){Bs(i,!0,l);var t=new Ks(Hs,"Error while loading script "+r);Rs(a),Ns(a,!1,t)},gt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ue(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=St(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function qs(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&Bs(t,!0,this.Ma)}}function Bs(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Hs=0,zs=1;function Ks(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function Ws(t){this.f=t}function Gs(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||Js,this.g=pt(t.secureTokenHeaders||Ys),this.i=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||Xs,this.a=pt(t.firebaseHeaders||Zs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==wr(),!(n=s.XMLHttpRequest||n&&ng.a.INTERNAL.node&&ng.a.INTERNAL.node.XMLHttpRequest)&&!_r())throw new S("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=_r()?new hs(self):Er()?new Ws(n):new Jo,this.b=null}C(Ks,P),C(Ws,Go),Ws.prototype.a=function(){return new this.f},Ws.prototype.b=function(){return{}};var $s,Qs="idToken",Js=new qr(3e4,6e4),Ys={"Content-Type":"application/x-www-form-urlencoded"},Xs=new qr(3e4,6e4),Zs={"Content-Type":"application/json"};function ta(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ea(t,e){e&&(t.l=na("https://securetoken.googleapis.com/v1/token",e),t.i=na("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.h=na("https://identitytoolkit.googleapis.com/v2/",e))}function na(t,e){return t=Fn(t),e=Fn(e.url),t.c=t.a+t.c,Pn(t,e.f),t.a=e.a,Dn(t,e.g),t.toString()}function ra(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ia(t,e,n,r,i,o,a){(function(){var t=kr();return!((t=Sr(t)!=Tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||$t&&oe&&!(9<oe))})()||_r()?t=_(t.u,t):($s||($s=new be(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[sa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ps(t,null,e,void 0)}(Us(It(oa,{onload:sa})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=_(t.s,t)),t(e,n,r,i,o,a)}Gs.prototype.S=function(){return this.b},Gs.prototype.u=function(t,e,n,r,i,o){if(_r()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new S("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new vs(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout(function(){a.dispatchEvent("timeout")},o)}wn(a,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ls(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),En(a,"ready",function(){u&&clearTimeout(u),ze(this)}),En(a,"timeout",function(){u&&clearTimeout(u),ze(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.i="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():Bo.a(),t.A=function(t){return t.c||(t.c=t.b())}(t.O?t.O:Bo),t.a.onreadystatechange=_(t.Ub,t);try{ls(t.b,As(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(a){return ls(t.b,As(t,"Error opening Xhr: "+a.message)),void Es(t,a)}e=r||"";var o=new kn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)H(t,e,void 0);else for(var n=On(t),r=In(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=ws,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!G(_s,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{Is(t),0<t.g&&(t.u=function(t){return $t&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ls(t.b,As(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=Tn(t.Ma,t.g,t)),ls(t.b,As(t,"Sending request")),t.h=!0,t.a.send(e),t.h=!1}catch(a){ls(t.b,As(t,"Send error: "+a.message)),Es(t,a)}}(a,t,n,r,i)};var oa=new yt(Et,"https://apis.google.com/js/client.js?onload=%{onload}"),sa="__fcb"+Math.floor(1e6*Math.random()).toString();function aa(t){if("string"!=typeof(t=t.email)||!gr.test(t))throw new S("invalid-email")}function ua(t){"email"in t&&aa(t)}function ca(t){if(!t[Qs]){if(t.mfaPendingCredential)throw new S("multi-factor-auth-required",null,pt(t));throw new S("internal-error")}}function la(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new S("internal-error")}else{if(!t.sessionInfo)throw new S("missing-verification-id");if(!t.code)throw new S("missing-verification-code")}}Gs.prototype.s=function(t,e,n,r,i){var o=this;$s.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Gs.prototype.yb=function(){return Za(this,qa,{})},Gs.prototype.Ab=function(t,e){return Za(this,Va,{idToken:t,email:e})},Gs.prototype.Bb=function(t,e){return Za(this,Ua,{idToken:t,password:e})};var ha={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function fa(t){if(!t.phoneVerificationInfo)throw new S("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new S("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new S("missing-verification-code")}function da(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new S("internal-error")}function pa(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Xn(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ma(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Wo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Wo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Wo(t)):t.errorMessage&&(e=tu(t.errorMessage)),e)throw e;ca(t)}function ga(t,e){return e.returnIdpCredential=!0,Za(t,za,e)}function va(t,e){return e.returnIdpCredential=!0,Za(t,Wa,e)}function ya(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Za(t,Ka,e)}function ba(t){if(!t.oobCode)throw new S("invalid-action-code")}(t=Gs.prototype).Cb=function(t,e){var n={idToken:t},r=[];return ft(ha,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Za(this,Va,n)},t.ub=function(t,e){return gt(t={requestType:"PASSWORD_RESET",email:t},e),Za(this,Da,t)},t.vb=function(t,e){return gt(t={requestType:"EMAIL_SIGNIN",email:t},e),Za(this,Na,t)},t.tb=function(t,e){return gt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Za(this,Ra,t)},t.Db=function(t,e,n){return gt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Za(this,Pa,t)},t.eb=function(t){return Za(this,Qa,t)},t.mb=function(t,e){return Za(this,Ma,{oobCode:t,newPassword:e})},t.Qa=function(t){return Za(this,wa,{oobCode:t})},t.ib=function(t){return Za(this,_a,{oobCode:t})};var _a={endpoint:"setAccountInfo",B:ba,Z:"email",C:!0},wa={endpoint:"resetPassword",B:ba,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new S("internal-error")},C:!0},Ea={endpoint:"signupNewUser",B:function(t){if(aa(t),!t.password)throw new S("weak-password")},F:ca,U:!0,C:!0},Ca={endpoint:"createAuthUri",C:!0},Ta={endpoint:"deleteAccount",M:["idToken"]},Sa={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if(!Array.isArray(t.deleteProvider))throw new S("internal-error")}},Ia={endpoint:"emailLinkSignin",M:["email","oobCode"],B:aa,F:ca,U:!0,C:!0},Oa={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:aa,F:ca,U:!0},ka={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:fa,F:ca,C:!0,Na:!0},Aa={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:fa,F:ca,C:!0,Na:!0},xa={endpoint:"getAccountInfo"},Na={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new S("internal-error");aa(t)},Z:"email",C:!0},Ra={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",C:!0},Pa={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",C:!0},Da={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new S("internal-error");aa(t)},Z:"email",C:!0},ja={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},La={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new S("internal-error")}},Ma={endpoint:"resetPassword",B:ba,Z:"email",C:!0},Fa={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Va={endpoint:"setAccountInfo",M:["idToken"],B:ua,U:!0},Ua={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(ua(t),!t.password)throw new S("weak-password")},F:ca,U:!0},qa={endpoint:"signupNewUser",F:ca,U:!0,C:!0},Ba={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new S("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new S("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new S("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new S("internal-error")},C:!0,Na:!0},Ha={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new S("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new S("internal-error")},C:!0,Na:!0},za={endpoint:"verifyAssertion",B:da,Xa:pa,F:ma,U:!0,C:!0},Ka={endpoint:"verifyAssertion",B:da,Xa:pa,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new S("user-not-found");if(t.errorMessage)throw tu(t.errorMessage);ca(t)},U:!0,C:!0},Wa={endpoint:"verifyAssertion",B:function(t){if(da(t),!t.idToken)throw new S("internal-error")},Xa:pa,F:ma,U:!0},Ga={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new S("invalid-custom-token")},F:ca,U:!0,C:!0},$a={endpoint:"verifyPassword",B:function(t){if(aa(t),!t.password)throw new S("wrong-password")},F:ca,U:!0,C:!0},Qa={endpoint:"verifyPhoneNumber",B:la,F:ca,C:!0},Ja={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new S("internal-error");la(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Wo(t);ca(t)}},Ya={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:la,F:ca,C:!0},Xa={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Qs]^!!t.refreshToken)throw new S("internal-error")},C:!0,Na:!0};function Za(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return Oe(new S("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return Ie(n).then(e.B).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Fn(e+n);Ln(a,"key",t.c),s&&Ln(a,"cb",E().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(a,c,i[c]);return new be(function(e,n){ia(t,a.toString(),function(t){t?t.error?n(eu(t,o||{})):e(t):n(new S("network-request-failed"))},r,u?void 0:nr(Lr(i)),t.a,t.m.get())})}(t,i?t.h:t.i,e.endpoint,o,n,e.Gb,e.kb||!1)}).then(function(t){return r=t,e.Xa?e.Xa(n,r):r}).then(e.F).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new S("internal-error");return r[e.Z]})}function tu(t){return eu({error:{errors:[{message:t}],code:400,message:t}})}function eu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new S(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",gt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new S(r[i],e);return!e&&t&&(e=jr(t)),new S("internal-error",e)}function nu(t){this.b=t,this.a=null,this.qb=function(t){return(su||(su=new be(function(t,e){function n(){Ur(),Ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ur(),e(Error("Network Error"))},timeout:iu.get()})}if(Ar("gapi.iframes.Iframe"))t();else if(Ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Ar("gapi.load")?n():e(Error("Network Error"))},Ie(Us(r=It(ru,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw su=null,t}))).then(function(){return new be(function(e,n){Ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},ou.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var ru=new yt(Et,"https://apis.google.com/js/api.js?onload=%{onload}"),iu=new qr(3e4,6e4),ou=new qr(5e3,15e3),su=null;function au(t,e,n,r){this.l=t,this.i=e,this.h=n,this.g=r,this.f=null,t=this.g?Vn((t=Fn(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.i),Ln(this.a,"appName",this.h),this.b=null,this.c=[]}function uu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.v=r,this.m=o,this.h=this.g=this.l=null,this.a=i,this.i=this.f=null}function cu(t){try{return ng.a.app(t).auth().Ga()}catch(e){return[]}}function lu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.h=i||null,this.l=this.u=this.A=null,this.i=[],this.v=this.a=null}function hu(t){var e=cr();return function(t){return Za(t,ja,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Fn(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Fn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:mr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new zo(cr())})}function fu(t){return t.v||(t.v=vr().then(function(){if(!t.u){var e=t.c,n=t.h,r=cu(t.b),i=new au(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Y(r||[]),t.u=i.toString()}t.m=new nu(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then(function(){t.a.register("authEvent",e,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.m,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Uo(e.authEvent),n=0;n<t.i.length;n++)r=t.i[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ie(n)}return n.status="ERROR",Ie(n)})}(t)})),t.v}function du(t){return t.l||(t.A=t.c?Or(t.c,cu(t.b)):null,t.l=new Gs(t.g,N(t.h),t.A),t.f&&ea(t.l,t.f)),t.l}function pu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new uu(t,e,n,r,i,h)).l=o,t.g=s,t.h=a,t.b=pt(u||null),t.f=c,t.xb(l).toString()}function mu(t){if(this.a=t||ng.a.INTERNAL.reactNative&&ng.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new S("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function gu(t){this.b=t,this.a={},this.f=_(this.c,this)}au.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Yn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Yn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Yn(this.a.b,"fw"),this.a.toString()},uu.prototype.xb=function(t){return this.i=t,this},uu.prototype.toString=function(){if(this.m){var t=Fn(this.m.url);t=Vn(t.f,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.v),this.a.isOAuthProvider){var e=this.a;try{var n=ng.a.app(this.c).auth().ka()}catch(a){n=null}for(var r in e.nb=n,Ln(t,"providerId",this.a.providerId),e=Lr((n=this.a).Hb))e[r]=e[r].toString();r=n.Pc,e=pt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.ob&&n.nb&&!e[n.ob]&&(e[n.ob]=n.nb),dt(e)||Ln(t,"customParameters",jr(e))}if("function"==typeof this.a.Pb&&(n=this.a.Pb()).length&&Ln(t,"scopes",n.join(",")),this.l?Ln(t,"redirectUrl",this.l):Yn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Yn(t.b,"eventId"),this.h?Ln(t,"v",this.h):Yn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Mn(t,s)&&Ln(t,s,this.b[s]);return this.i?Ln(t,"tid",this.i):Yn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Yn(t.b,"eid"),(s=cu(this.c)).length&&Ln(t,"fw",s.join(",")),t.toString()},(t=lu.prototype).Nb=function(t,e,n){var r=new S("popup-closed-by-user"),i=new S("web-storage-unsupported"),o=this,s=!1;return this.la().then(function(){(function(t){var e={type:"webStorageSupport"};return fu(t).then(function(){return function(t,e){return t.qb.then(function(){return new be(function(n){t.a.send(e.type,e,n,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.m,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&dr(t),e(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(t){return new be(function(e){return function n(){Sn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return Sn(n).then(function(){e(r)})})},t.Wb=function(){var t=kr();return!Dr(t)&&!Vr(t)},t.Sb=function(){return!1},t.Lb=function(t,e,n,r,i,o,s,a){if(!t)return Oe(new S("popup-blocked"));if(s&&!Dr())return this.la().o(function(e){dr(t),i(e)}),r(),Ie();this.a||(this.a=hu(du(this)));var u=this;return this.a.then(function(){var e=u.la().o(function(e){throw dr(t),i(e),e});return r(),e}).then(function(){Fo(n),s||lr(pu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.h,a,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Mb=function(t,e,n,r){this.a||(this.a=hu(du(this)));var i=this;return this.a.then(function(){Fo(e),lr(pu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.h,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.la=function(){var t=this;return fu(this).then(function(){return t.m.qb}).o(function(){throw t.a=null,new S("network-request-failed")})},t.Zb=function(){return!0},t.Ea=function(t){this.i.push(t)},t.Ra=function(t){Q(this.i,function(e){return e==t})},(t=mu.prototype).get=function(t){return Ie(this.a.getItem(t)).then(function(t){return t&&Mr(t)})},t.set=function(t,e){return Ie(this.a.setItem(t,jr(e)))},t.T=function(t){return Ie(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var vu,yu=[];function bu(t,e,n){dt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function _u(t){this.a=t}function wu(t){this.c=t,this.b=!1,this.a=[]}function Eu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Oe(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Cu(t,c),e}).o(function(e){throw Cu(t,c),e})}function Cu(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),Q(t.a,function(t){return t==e})}}function Tu(){if(!ku())throw new S("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.v=s.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.l=null,this.s=!1,this.i=null;var t=this;_r()&&self?(this.m=function(){var t=_r()?self:null;if(H(yu,function(n){n.b==t&&(e=n)}),!e){var e=new gu(t);yu.push(e)}return e}(),bu(this.m,"keyChanged",function(e,n){return Pu(t).then(function(e){return 0<e.length&&H(t.a,function(t){t(e)}),{keyProcessed:G(e,n.key)}})}),bu(this.m,"ping",function(){return Ie(["keyChanged"])})):function(){var t=s.navigator;return t&&t.serviceWorker?Ie().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Ie(null)}().then(function(e){(t.i=e)&&(t.g=new wu(new _u(e)),Eu(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&G(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function Su(t){return new be(function(e,n){var r=t.v.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be(function(e,n){var r=t.v.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return Su(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function Iu(t){return t.h||(t.h=Su(t)),t.h}function Ou(t,e){var n=0;return new be(function r(i,o){Iu(t).then(e).then(i).o(function(e){if(!(3<++n))return Iu(t).then(function(e){return e.close(),t.h=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function ku(){try{return!!s.indexedDB}catch(Wt){return!1}}function Au(t){return t.objectStore("firebaseLocalStorage")}function xu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Nu(t){return new be(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Ru(t,e){return t.g&&t.i&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.i?Eu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Ie()}function Pu(t){return Iu(t).then(function(t){var e=Au(xu(t,!1));return e.getAll?Nu(e.getAll()):new be(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=hr(t.c,n),t.c=n}return r})}function Du(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ju(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ie().then(function(){if(ku()){var t=Fr(),r="__sak"+t;return vu||(vu=new Tu),(n=vu).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){H(e.a,function(e){e(t)})}),t})}function Lu(){this.a={},this.type="inMemory"}function Mu(){if(!function(){var t="Node"==wr();if(!(t=Fu()||t&&ng.a.INTERNAL.node&&ng.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wr())throw new S("internal-error","The LocalStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=Fu()||ng.a.INTERNAL.node.localStorage,this.type="localStorage"}function Fu(){try{var t=s.localStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Vu(){this.type="nullStorage"}function Uu(){if(!function(){var t="Node"==wr();if(!(t=qu()||t&&ng.a.INTERNAL.node&&ng.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wr())throw new S("internal-error","The SessionStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=qu()||ng.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function qu(){try{var t=s.sessionStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Bu(){var t={};t.Browser=Ku,t.Node=Wu,t.ReactNative=Gu,t.Worker=$u,this.a=t[wr()]}gu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];H(r,function(e){i.push(Ie().then(function(){return e(t.origin,t.data.data)}))}),Ae(i).then(function(r){var i=[];H(r,function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})}),H(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},_u.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},wu.prototype.close=function(){for(;0<this.a.length;)Cu(this,this.a[0]);this.b=!0},(t=Tu.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,function(e){return Nu((e=Au(xu(e,!0))).get(t))}).then(function(i){return Ou(n,function(o){if(o=Au(xu(o,!0)),i)return i.value=e,Nu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Nu(o.add(s))})}).then(function(){return n.c[t]=e,Ru(n,t)}).na(function(){r&&n.b--})},t.get=function(t){return Ou(this,function(e){return Nu(Au(xu(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.T=function(t){var e=this,n=!1;return Ou(this,function(r){return n=!0,e.b++,Nu(Au(xu(r,!0)).delete(t))}).then(function(){return delete e.c[t],Ru(e,t)}).na(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){Du(t),function e(){t.f=setTimeout(function(){t.l=Pu(t).then(function(e){0<e.length&&H(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){Q(this.a,function(e){return e==t}),0==this.a.length&&Du(this)},(t=ju.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.T=function(t){return this.b.then(function(e){return e.T(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){Q(this.a,function(e){return e==t})},(t=Lu.prototype).get=function(t){return Ie(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ie()},t.T=function(t){return delete this.a[t],Ie()},t.ca=function(){},t.ia=function(){},(t=Mu.prototype).get=function(t){var e=this;return Ie().then(function(){return Mr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Ie().then(function(){var r=jr(e);null===r?n.T(t):n.a.setItem(t,r)})},t.T=function(t){var e=this;return Ie().then(function(){e.a.removeItem(t)})},t.ca=function(t){s.window&&un(s.window,"storage",t)},t.ia=function(t){s.window&&hn(s.window,"storage",t)},(t=Vu.prototype).get=function(){return Ie(null)},t.set=function(){return Ie()},t.T=function(){return Ie()},t.ca=function(){},t.ia=function(){},(t=Uu.prototype).get=function(t){var e=this;return Ie().then(function(){return Mr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Ie().then(function(){var r=jr(e);null===r?n.T(t):n.a.setItem(t,r)})},t.T=function(t){var e=this;return Ie().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Hu,zu,Ku={D:Mu,ab:Uu},Wu={D:Mu,ab:Uu},Gu={D:mu,ab:Vu},$u={D:Mu,ab:Vu},Qu={qd:"local",NONE:"none",sd:"session"};function Ju(){var t=!(Vr(kr())||!br()),e=Dr(),n=xr();this.v=t,this.i=e,this.l=n,this.a={},Hu||(Hu=new Bu),t=Hu;try{this.g=!ur()&&zr()||!s.indexedDB?new t.a.D:new ju(_r()?new Lu:new t.a.D)}catch(r){this.g=new Lu,this.i=!0}try{this.h=new t.a.ab}catch(r){this.h=new Lu}this.m=new Lu,this.f=_(this.Xb,this),this.b={}}function Yu(){return zu||(zu=new Ju),zu}function Xu(t,e){switch(e){case"session":return t.h;case"none":return t.m;default:return t.g}}function Zu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function tc(t,e,n){return n=Zu(e,n),"local"==e.D&&(t.b[n]=null),Xu(t,e.D).T(n)}function ec(t){t.c&&(clearInterval(t.c),t.c=null)}function nc(t){this.a=t,this.b=Yu()}(t=Ju.prototype).get=function(t,e){return Xu(this,t.D).get(Zu(t,e))},t.set=function(t,e,n){var r=Zu(t,n),i=this,o=Xu(this,t.D);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.D&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=Zu(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),dt(this.a)&&(Xu(this,"local").ca(this.f),this.i||(ur()||!zr())&&s.indexedDB||!this.l||function(t){ec(t),t.c=setInterval(function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Je({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Zu(t,e),this.a[t]&&(Q(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),dt(this.a)&&(Xu(this,"local").ia(this.f),ec(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Xu(this,"local").ia(this.f):ec(this),this.v)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.lb(e))},$t&&oe&&10==oe&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,_(this.lb,this))},t.lb=function(t){this.a[t]&&H(this.a[t],function(t){t()})};var rc,ic={name:"authEvent",D:"local"};function oc(){this.a=Yu()}function sc(t,e){this.b=ac,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.h=t,this.i=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===rc&&(rc=s.Int32Array?new Int32Array(pc):pc),this.reset()}C(sc,function(){this.b=-1});for(var ac=64,uc=ac-1,cc=[],lc=0;lc<uc;lc++)cc[lc]=0;var hc=J(128,cc);function fc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|rc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function dc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(fc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(fc(t),i=0)}}t.c=i,t.g+=n}sc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.i):Y(this.i)};var pc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function mc(){sc.call(this,8,gc)}C(mc,sc);var gc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function vc(t,e,n,r,i,o){this.m=t,this.h=e,this.l=n,this.v=r||null,this.u=i||null,this.s=o,this.i=e+":"+n,this.A=new oc,this.g=new nc(this.i),this.f=null,this.b=[],this.a=this.c=null}function yc(t){return new S("invalid-cordova-configuration",t)}function bc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function _c(t){return t.f||(t.f=t.la().then(function(){return new be(function(e){t.Ea(function n(r){return e(r),t.Ra(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),wc(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ro(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Mr(Mn(o=Fn(i),"firebaseError")||null))?I(o):null)?new Vo(r.c,r.b,null,null,o,null,r.S()):new Vo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}bc(t,i)})}var n=new Vo("unknown",null,null,null,new S("no-auth-event")),r=!1,i=Sn(500).then(function(){return wc(t).then(function(){r||bc(t,n)})}),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ar("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Ho||(Ho=new qo),function(t){var e=Ho;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ar("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)})})),t.f}function wc(t){var e=null;return function(t){return t.b.get(ic,t.a).then(function(t){return Uo(t)})}(t.g).then(function(n){return e=n,tc((n=t.g).b,ic,n.a)}).then(function(){return e})}function Ec(t){this.a=t,this.b=Yu()}(t=vc.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(yr(void 0)?vr().then(function(){return new be(function(t,e){var n=s.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Oe(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Ar("universalLinks.subscribe",s))throw yc("cordova-universal-links-plugin-fix is not installed");if(void 0===Ar("BuildInfo.packageName",s))throw yc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ar("cordova.plugins.browsertab.openUrl",s))throw yc("cordova-plugin-browsertab is not installed");if("function"!=typeof Ar("cordova.InAppBrowser.open",s))throw yc("cordova-plugin-inappbrowser is not installed")},function(){throw new S("cordova-not-ready")})},t.Nb=function(t,e){return e(new S("operation-not-supported-in-this-environment")),Ie()},t.Lb=function(){return Oe(new S("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return Oe(new S("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Ie().then(function(){return Fo(e),_c(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Vo(e,r,null,o,new S("no-auth-event"),null,i),u=Ar("BuildInfo.packageName",s);if("string"!=typeof u)throw new S("invalid-cordova-configuration");var c=Ar("BuildInfo.displayName",s),l={};if(kr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!kr().toLowerCase().match(/android/))return Oe(new S("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new mc;dc(e,t),t=[];var n=8*e.g;dc(e,hc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(fc(e),r=n=0;r<e.h;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=pu(t.m,t.h,t.l,e,n,null,r,t.v,l,t.u,i,t.s);return t.la().then(function(){var e=t.i;return t.A.a.set(ic,a.w(),e)}).then(function(){var e=Ar("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new S("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=Ar("cordova.plugins.browsertab.openUrl",s)))throw new S("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Ar("cordova.InAppBrowser.open",s)))throw new S("invalid-cordova-configuration");e=kr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new be(function(t,e){u=function(){var e=Ar("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){Br()&&c()},o.addEventListener("resume",c=function(){a||(a=Sn(2e3).then(function(){e(new S("redirect-cancelled-by-user"))}))},!1),kr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(t){return wc(i).then(function(){throw t})})}).na(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Ra(u),i.c=null})},t.Ea=function(t){this.b.push(t),_c(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new S("no-auth-event")),t(e))})},t.Ra=function(t){Q(this.b,function(e){return e==t})};var Cc={name:"pendingRedirect",D:"session"};function Tc(t){return tc(t.b,Cc,t.a)}function Sc(t,e,n,r){this.h={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.i=[],this.f=!1,this.l=_(this.s,this),this.b=new Uc,this.A=new Kc,this.g=new Ec(Fc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Ic(this.O,this.m,this.v,O,this.G)}function Ic(t,e,n,r,i){var o=ng.a.SDK_VERSION||null;return yr()?new vc(t,e,n,o,r,i):new lu(t,e,n,o,r,i)}function Oc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().o(function(n){throw t.a==e&&t.reset(),n})}function kc(t){t.a.Wb()&&Oc(t).o(function(e){var n=new Vo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Dc(e)&&t.s(n)}),t.a.Sb()||qc(t.b)}function Ac(t,e){G(t.i,e)||t.i.push(e),t.f||function(t){return t.b.get(Cc,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Tc(t.g).then(function(){Oc(t).o(function(e){var n=new Vo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Dc(e)&&t.s(n)})}):kc(t)}).o(function(){kc(t)})}function xc(t,e){Q(t.i,function(t){return t==e})}Sc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Ic(this.O,this.m,this.v,null,this.G),this.h={}},Sc.prototype.s=function(t){if(!t)throw new S("invalid-auth-event");if(6e5<=E()-this.u&&(this.h={},this.u=0),t&&t.getUid()&&this.h.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.i.length;n++){var r=this.i[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.i(t,r),t&&(t.f||t.b)&&(this.h[t.getUid()]=!0,this.u=E())),e=!0;break}}return qc(this.b),e};var Nc=new qr(2e3,1e4),Rc=new qr(3e4,6e4);function Pc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Dc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function jc(t,e,n,r,i){var o;return function(t){return t.b.set(Cc,"pending",t.a)}(t.g).then(function(){return t.a.Mb(e,n,r,i).o(function(e){if(Dc(e))throw new S("operation-not-supported-in-this-environment");return o=e,Tc(t.g).then(function(){throw o})}).then(function(){return t.a.Zb()?new be(function(){}):Tc(t.g).then(function(){return t.qa()}).then(function(){}).o(function(){})})})}function Lc(t,e,n,r,i){return t.a.Nb(r,function(t){e.ma(n,null,t,i)},Nc.get())}Sc.prototype.qa=function(){return this.b.qa()};var Mc={};function Fc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Vc(t,e,n,r){var i=Fc(e,n,r);return Mc[i]||(Mc[i]=new Sc(t,e,n,r)),Mc[i]}function Uc(){this.b=null,this.f=[],this.c=[],this.a=null,this.h=this.g=!1}function qc(t){t.g||(t.g=!0,zc(t,!1,null,null))}function Bc(t){t.g&&!t.h&&zc(t,!1,null,null)}function Hc(t,e){if(t.b=function(){return Ie(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function zc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Oe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Hc(t,n):Hc(t,{user:null}),t.f=[],t.c=[]}function Kc(){}function Wc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Gc(t,e){this.a=e,Qr(this,"verificationId",t)}function $c(t,e,n,r){return new jo(t).eb(e,n).then(function(t){return new Gc(t,r)})}function Qc(t){var e=Hi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new S("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Jr(this,{token:t,expirationTime:Hr(1e3*e.exp),authTime:Hr(1e3*e.auth_time),issuedAtTime:Hr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Jc(t,e,n){var r=e&&e[Xc];if(!r)throw new S("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=pt(e),this.g=n,this.c=new io(null,r),this.b=[];var i=this;H(e[Yc]||[],function(t){(t=ti(t))&&i.b.push(t)}),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Uc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Uc.prototype.i=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.h=!(!i&&!o),"unknown"!=n||i||o?t.a?(zc(this,!0,null,t.a),Ie()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.h,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){zc(t,a,e,null)}).o(function(e){zc(t,a,null,e)})}(this,t,e):Oe(new S("invalid-auth-event")):(zc(this,!1,null,null),Ie())}else Oe(new S("invalid-auth-event"))},Uc.prototype.qa=function(){var t=this;return new be(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new S("timeout");t.a&&t.a.cancel(),t.a=Sn(Rc.get()).then(function(){t.b||(t.g=!0,zc(t,!0,null,e))})}(t))})},Kc.prototype.i=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),Ie()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.h).then(function(t){e.ma(r,t,null,n)}).o(function(t){e.ma(r,null,t,n)})}(t,e):Oe(new S("invalid-auth-event"))}else Oe(new S("invalid-auth-event"))},Gc.prototype.confirm=function(t){return t=Lo(this.verificationId,t),this.a(t)};var Yc="mfaInfo",Xc="mfaPendingCredential";function Zc(t,e,n,r){S.call(this,"multi-factor-auth-required",r,e),this.b=new Jc(t,e,n),Qr(this,"resolver",this.b)}function tl(t,e,n){if(t&&p(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Zc(e,t.serverResponse,n,t.message)}catch(r){}return null}function el(){}function nl(t){Qr(this,"factorId",t.fa),this.a=t}function rl(t){if(nl.call(this,t),this.a.fa!=jo.PROVIDER_ID)throw new S("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function il(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function ol(t,e){this.a=t,this.b=[],this.c=_(this.xc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(i){}t=e}else t=null;t&&n.push(t)}),sl(this,n)}function sl(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function al(t,e,n){if(this.i=t,this.h=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ul(t,e){t.stop(),t.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=s.document,e=null;return Br()||!t?Ie():new be(function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.i()}).then(function(){ul(t,!0)}).o(function(e){t.h(e)&&ul(t,!1)})}function cl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function ll(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function hl(t,e){t.b=Bi(e[Qs]||""),t.a=e.refreshToken,ll(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function fl(t,e){this.a=t||null,this.b=e||null,Jr(this,{lastSignInTime:Hr(e||null),creationTime:Hr(t||null)})}function dl(t,e,n,r,i,o){Jr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function pl(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=ng.a.SDK_VERSION?Or(ng.a.SDK_VERSION):null;this.a=new Gs(this.l,N(O),r),t.emulatorConfig&&ea(this.a,t.emulatorConfig),this.b=new cl(this.a),El(this,e[Qs]),hl(this.b,e),Qr(this,"refreshToken",this.b.a),Sl(this,n||{}),_n.call(this),this.P=!1,this.s&&Nr()&&(this.h=Vc(this.s,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new al(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0})}(this),this.$=_(this.gb,this);var i=this;this.pa=null,this.Ba=function(t){i.wa(t.i)},this.ba=null,this.za=function(t){ea(i.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){vl(i,t.f)},this.aa=null,this.N=new ol(this,n),Qr(this,"multiFactor",this.N)}function ml(t,e){t.ba&&hn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&un(e,"languageCodeChanged",t.Ba)}function gl(t,e){t.W&&hn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&un(e,"emulatorConfigChanged",t.za)}function vl(t,e){t.X=e,ra(t.a,ng.a.SDK_VERSION?Or(ng.a.SDK_VERSION,t.X):null)}function yl(t,e){t.aa&&hn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&un(e,"frameworkChanged",t.Aa)}function bl(t){try{return ng.a.app(t.m).auth()}catch(e){throw new S("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function _l(t){t.A||t.u.b||(t.u.start(),hn(t,"tokenChanged",t.$),un(t,"tokenChanged",t.$))}function wl(t){hn(t,"tokenChanged",t.$),t.u.stop()}function El(t,e){t.ya=e,Qr(t,"_lat",e)}function Cl(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Ae(e).then(function(){return t})}function Tl(t){t.h&&!t.P&&(t.P=!0,Ac(t.h,t))}function Sl(t,e){Jr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new fl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Il(){}function Ol(t){return Ie().then(function(){if(t.A)throw new S("app-deleted")})}function kl(t){return K(t.providerData,function(t){return t.providerId})}function Al(t,e){e&&(xl(t,e.providerId),t.providerData.push(e))}function xl(t,e){Q(t.providerData,function(t){return t.providerId==e})}function Nl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function Rl(t,e){t!=e&&(Jr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Qr(t,"metadata",e.metadata?function(t){return new fl(t.a,t.b)}(e.metadata):new fl),H(e.providerData,function(e){Al(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Qr(t,"refreshToken",t.b.a),sl(t.N,e.N.b))}function Pl(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return Za(t.a,xa,{idToken:e}).then(_(t.Jc,t))}(t,e).then(function(){return n||Nl(t,"isAnonymous",!1),e})})}function Dl(t,e){e[Qs]&&t.ya!=e[Qs]&&(hl(t.b,e),t.dispatchEvent(new il("tokenChanged")),El(t,e[Qs]),Nl(t,"refreshToken",t.b.a))}function jl(t,e){return Pl(t).then(function(){if(G(kl(t),e))return Cl(t).then(function(){throw new S("provider-already-linked")})})}function Ll(t,e,n){return Yr({user:t,credential:Mo(e),additionalUserInfo:e=$i(e),operationType:n})}function Ml(t,e){return Dl(t,e),t.reload().then(function(){return t})}function Fl(t,e,n,r,i){if(!Nr())return Oe(new S("operation-not-supported-in-this-environment"));if(t.f&&!i)return Oe(t.f);var o=Gi(n.providerId),s=Fr(t.uid+":::"),a=null;(!Dr()||br())&&t.s&&n.isOAuthProvider&&(a=pu(t.s,t.l,t.m,e,n,null,s,ng.a.SDK_VERSION||null,null,null,t.tenantId));var u=pr(a,o&&o.ua,o&&o.ta);return r=r().then(function(){if(Ul(t),!i)return t.I().then(function(){})}).then(function(){return Pc(t.h,u,e,n,s,!!a,t.tenantId)}).then(function(){return new be(function(n,r){t.ma(e,null,new S("cancelled-popup-request"),t.i||null),t.g=n,t.O=r,t.i=s,t.c=Lc(t.h,t,e,u,s)})}).then(function(t){return u&&dr(u),t?Yr(t):null}).o(function(t){throw u&&dr(u),t}),ql(t,r,i)}function Vl(t,e,n,r,i){if(!Nr())return Oe(new S("operation-not-supported-in-this-environment"));if(t.f&&!i)return Oe(t.f);var o=null,s=Fr(t.uid+":::");return r=r().then(function(){if(Ul(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,Cl(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(zl,t.w(),e.a)),e}).then(function(){return jc(t.h,e,n,s,t.tenantId)}).o(function(e){if(o=e,t.ha)return Kl(t.ha);throw o}).then(function(){if(o)throw o}),ql(t,r,i)}function Ul(t){if(!t.h||!t.P){if(t.h&&!t.P)throw new S("internal-error");throw new S("auth-domain-config-required")}}function ql(t,e,n){var r=function(t,e,n){return t.f&&!n?(e.cancel(),Oe(t.f)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new il("userInvalidated")),t.f=e),e})}(t,e,n);return t.G.push(r),r.na(function(){$(t.G,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=tl(e.w(),bl(t),_(t.ic,t))),n||e})}function Bl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Qs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new pl(e,n,t);return t.providerData&&H(t.providerData,function(t){t&&Al(i,Yr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Hl(t){this.a=t,this.b=Yu()}Jc.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then(function(t){var n=pt(e.f);return delete n[Yc],delete n[Xc],gt(n,t),e.g(n)})},C(Zc,S),el.prototype.rb=function(t,e,n){return e.type==oo?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),gt(n,{phoneVerificationInfo:Do(t.a)}),Za(e,ka,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return gt(n={mfaPendingCredential:n},{phoneVerificationInfo:Do(t.a)}),Za(e,Aa,n)})}(this,t,e)},C(nl,el),C(rl,nl),C(il,Qe),(t=ol.prototype).xc=function(t){sl(this,function(t){var e=[];return H(t.mfaInfo||[],function(t){(t=ti(t))&&e.push(t)}),e}(t.gd))},t.Qb=function(){return this.a.I().then(function(t){return new io(t,null)})},t.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then(function(n){return t.rb(r,n,e)}).then(function(t){return Dl(n.a,t),n.a.reload()})},t.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return Za(r,Xa,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=z(e.b,function(t){return t.uid!=n});return sl(e,r),Dl(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,function(t){return t.w()})}}},al.prototype.start=function(){this.a=this.c,ul(this,!0)},al.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},cl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},cl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Oe(new S("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new be(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ia(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(eu(t)):t.access_token&&t.refresh_token?n(t):r(new S("internal-error")):r(new S("network-request-failed"))},"POST",Jn(e).toString(),t.g,t.v.get()):r(new S("internal-error"))})}(t.f,e).then(function(e){return t.b=Bi(e.access_token),t.a=e.refresh_token,ll(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ie(null):Ie({accessToken:this.b.toString(),refreshToken:this.a})},fl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(pl,_n),pl.prototype.wa=function(t){this.pa=t,ta(this.a,t)},pl.prototype.ka=function(){return this.pa},pl.prototype.Ga=function(){return Y(this.X)},pl.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Qr(pl.prototype,"providerId","firebase"),(t=pl.prototype).reload=function(){var t=this;return ql(this,Ol(this).then(function(){return Pl(t).then(function(){return Cl(t)}).then(Il)}))},t.nc=function(t){return this.I(t).then(function(t){return new Qc(t)})},t.I=function(t){var e=this;return ql(this,Ol(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new S("internal-error");return t.accessToken!=e.ya&&(El(e,t.accessToken),e.dispatchEvent(new il("tokenChanged"))),Nl(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new S("internal-error");Sl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,function(t){return new dl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Al(this,e[n]);Nl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new il("userReloaded",{gd:t}))},t.Kc=function(t){return Gr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return ql(this,t.c(this.a,this.uid).then(function(t){return Dl(e,t),n=Ll(e,t,"reauthenticate"),e.f=null,e.reload()}).then(function(){return n}),!0)},t.Bc=function(t){return Gr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return ql(this,jl(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Ll(e,t,"link"),Ml(e,t)}).then(function(){return n}))},t.Cc=function(t,e){var n=this;return ql(this,jl(this,"phone").then(function(){return $c(bl(n),t,e,_(n.pb,n))}))},t.Lc=function(t,e){var n=this;return ql(this,Ie().then(function(){return $c(bl(n),t,e,_(n.sb,n))}),!0)},t.Ab=function(t){var e=this;return ql(this,this.I().then(function(n){return e.a.Ab(n,t)}).then(function(t){return Dl(e,t),e.reload()}))},t.dd=function(t){var e=this;return ql(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return Dl(e,t),e.reload()}))},t.Bb=function(t){var e=this;return ql(this,this.I().then(function(n){return e.a.Bb(n,t)}).then(function(t){return Dl(e,t),e.reload()}))},t.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Ol(this);var e=this;return ql(this,this.I().then(function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Dl(e,t),Nl(e,"displayName",t.displayName||null),Nl(e,"photoURL",t.photoUrl||null),H(e.providerData,function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))}),Cl(e)}).then(Il))},t.bd=function(t){var e=this;return ql(this,Pl(this).then(function(n){return G(kl(e),t)?function(t,e,n){return Za(t,Sa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return H(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),H(kl(e),function(t){n[t]||xl(e,t)}),n[jo.PROVIDER_ID]||Qr(e,"phoneNumber",null),Cl(e)}):Cl(e).then(function(){throw new S("no-such-provider")})}))},t.delete=function(){var t=this;return ql(this,this.I().then(function(e){return Za(t.a,Ta,{idToken:e})}).then(function(){t.dispatchEvent(new il("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");ml(t,null),gl(t,null),yl(t,null),t.G=[],t.A=!0,wl(t),Qr(t,"refreshToken",null),t.h&&xc(t.h,t)})},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.i||null)==e&&this.g||"reauthViaPopup"==t&&(this.i||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.i||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.i||null)?_(this.Jb,this):"reauthViaPopup"==t&&e==(this.i||null)?_(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Kb,this):null},t.Dc=function(t){var e=this;return Fl(this,"linkViaPopup",t,function(){return jl(e,t.providerId).then(function(){return Cl(e)})},!1)},t.Mc=function(t){return Fl(this,"reauthViaPopup",t,function(){return Ie()},!0)},t.Ec=function(t){var e=this;return Vl(this,"linkViaRedirect",t,function(){return jl(e,t.providerId)},!1)},t.Nc=function(t){return Vl(this,"reauthViaRedirect",t,function(){return Ie()},!0)},t.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ql(this,this.I().then(function(n){return va(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Ll(i,t,"link"),Ml(i,t)}).then(function(){return o}))},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ql(this,Ie().then(function(){return uo(ya(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ll(i,t,"reauthenticate"),Dl(i,t),i.f=null,i.reload()}).then(function(){return o}),!0)},t.tb=function(t){var e=this,n=null;return ql(this,this.I().then(function(e){return n=e,void 0===t||dt(t)?{}:Vi(new Ai(t))}).then(function(t){return e.a.tb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Db=function(t,e){var n=this,r=null;return ql(this,this.I().then(function(t){return r=t,void 0===e||dt(e)?{}:Vi(new Ai(e))}).then(function(e){return n.a.Db(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.ic=function(t){var e=null,n=this;return ql(this,t=uo(Ie(t),n.uid).then(function(t){return e=Ll(n,t,"reauthenticate"),Dl(n,t),n.f=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&gt(t,this.metadata.w()),H(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),gt(t,this.N.w()),t};var zl={name:"redirectUser",D:"session"};function Kl(t){return tc(t.b,zl,t.a)}function Wl(t){this.a=t,this.b=Yu(),this.c=null,this.f=function(t){var e=Ql("local"),n=Ql("session"),r=Ql("none");return function(t,e,n){var r=Zu(e,n),i=Xu(t,e.D);return t.get(e,n).then(function(o){var a=null;try{a=Mr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get($l,t.a).then(function(t){return t?Ql(t):e})})})}).then(function(e){return t.c=e,Gl(t,e.D)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Ql("local"),this.a,_(this.g,this))}function Gl(t,e){var n,r=[];for(n in Qu)Qu[n]!==e&&r.push(tc(t.b,Ql(Qu[n]),t.a));return r.push(tc(t.b,$l,t.a)),function(t){return new be(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)ke(t[a],w(o,a),s);else e(i)})}(r)}Wl.prototype.g=function(){var t=this,e=Ql("local");Zl(this,function(){return Ie().then(function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null}).then(function(n){if(n)return Gl(t,"local").then(function(){t.c=e})})})};var $l={name:"persistence",D:"session"};function Ql(t){return{name:"authUser",D:t}}function Jl(t,e){return Zl(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Yl(t){return Zl(t,function(){return tc(t.b,t.c,t.a)})}function Xl(t,e,n){return Zl(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Bl(t||{})})})}function Zl(t,e){return t.f=t.f.then(e,e),t.f}function th(t){if(this.m=!1,Qr(this,"settings",new Wc),Qr(this,"app",t),!uh(this).options||!uh(this).options.apiKey)throw new S("invalid-api-key");t=ng.a.SDK_VERSION?Or(ng.a.SDK_VERSION):null,this.a=new Gs(uh(this).options&&uh(this).options.apiKey,N(O),t),this.R=[],this.u=[],this.P=[],this.ac=ng.a.INTERNAL.createSubscribe(_(this.yc,this)),this.X=void 0,this.bc=ng.a.INTERNAL.createSubscribe(_(this.zc,this)),sh(this,null),this.l=new Wl(uh(this).options.apiKey+":"+uh(this).name),this.G=new Hl(uh(this).options.apiKey+":"+uh(this).name),this.$=fh(this,function(t){var e=uh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(zl,t.a).then(function(t){return t&&e&&(t.authDomain=e),Bl(t||{})})}(t.G,uh(t).options.authDomain).then(function(e){return(t.s=e)&&(e.ha=t.G),Kl(t.G)});return fh(t,e)}(t).then(function(){return Xl(t.l,e,t.f)}).then(function(e){return e?(e.ha=t.G,t.s&&(t.s.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Jl(t.l,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Yl(t.l)})):null}).then(function(e){sh(t,e||null)});return fh(t,n)}(this)),this.h=fh(this,function(t){return t.$.then(function(){return oh(t)}).o(function(){}).then(function(){if(!t.m)return t.pa()}).o(function(){}).then(function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(Ql("local"),e.a,t.pa)}})}(this)),this.ba=!1,this.pa=_(this.Yc,this),this.Ba=_(this.da,this),this.ya=_(this.kc,this),this.za=_(this.vc,this),this.Aa=_(this.wc,this),this.b=null,function(t){var e=uh(t).options.authDomain,n=uh(t).options.apiKey;e&&Nr()&&(t.gb=t.$.then(function(){if(!t.m){if(t.b=Vc(e,n,uh(t).name,t.f),Ac(t.b,t),ch(t)&&Tl(ch(t)),t.s){Tl(t.s);var r=t.s;r.wa(t.ka()),ml(r,t),vl(r=t.s,t.N),yl(r,t),ea((r=t.s).a,t.f),gl(r,t),t.s=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Fc,this),this.A=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function eh(t){Qe.call(this,"languageCodeChanged"),this.i=t}function nh(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function rh(t){Qe.call(this,"frameworkChanged"),this.f=t}function ih(t){return t.gb||Oe(new S("auth-domain-config-required"))}function oh(t){if(!Nr())return Oe(new S("operation-not-supported-in-this-environment"));var e=ih(t).then(function(){return t.b.qa()}).then(function(t){return t?Yr(t):null});return fh(t,e)}function sh(t,e){ch(t)&&(function(t,e){Q(t.R,function(t){return t==e})}(ch(t),t.Ba),hn(ch(t),"tokenChanged",t.ya),hn(ch(t),"userDeleted",t.za),hn(ch(t),"userInvalidated",t.Aa),wl(ch(t))),e&&(e.R.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.A&&_l(e)),Qr(t,"currentUser",e),e&&(e.wa(t.ka()),ml(e,t),vl(e,t.N),yl(e,t),ea(e.a,t.f),gl(e,t))}function ah(t,e){var n=null,r=null;return fh(t,e.then(function(e){return n=Mo(e),r=$i(e),function(t,e){var n={};return n.apiKey=uh(t).options.apiKey,n.authDomain=uh(t).options.authDomain,n.appName=uh(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then(function(){return function(t,e,n,r){var i=new pl(t,e);return n&&(i.ha=n),r&&vl(i,r),i.reload().then(function(){return i})}(n,e,t.G,t.Ga())}).then(function(e){return ch(t)&&e.uid==ch(t).uid?(Rl(ch(t),e),t.da(e)):(sh(t,e),Tl(e),t.da(e))}).then(function(){hh(t)})}(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=tl(e.w(),t,_(t.jc,t))),n||e}).then(function(){return Yr({user:ch(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function uh(t){return t.app}function ch(t){return t.currentUser}function lh(t){return ch(t)&&ch(t)._lat||null}function hh(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](lh(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](lh(t))}}function fh(t,e){return t.R.push(e),e.na(function(){$(t.R,e)}),e}function dh(){}function ph(){this.a={},this.b=1e12}Wl.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new S("invalid-persistence-type"),n=new S("unsupported-persistence-type");t:{for(r in Qu)if(Qu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!ku()&&"none"!==t)throw n;break;default:if(!xr()&&"none"!==t)throw n}}(t),Zl(this,function(){return t!=n.c.D?n.b.get(n.c,n.a).then(function(r){return e=r,Gl(n,t)}).then(function(){if(n.c=Ql(t),e)return n.b.set(n.c,e,n.a)}):Ie()})},C(th,_n),C(eh,Qe),C(nh,Qe),C(rh,Qe),(t=th.prototype).wb=function(t){return fh(this,t=this.l.wb(t))},t.wa=function(t){this.aa===t||this.m||(this.aa=t,ta(this.a,this.aa),this.dispatchEvent(new eh(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=s.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t,e){if(!this.f){if(!/^https?:\/\//.test(t))throw new S("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");!function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&vr().then(function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)})}(!!e&&!!e.disableWarnings),this.f={url:t},this.settings.hb=!0,ea(this.a,this.f),this.dispatchEvent(new nh(this.f))}},t.Fc=function(t){this.N.push(t),ra(this.a,ng.a.SDK_VERSION?Or(ng.a.SDK_VERSION,this.N):null),this.dispatchEvent(new rh(this.N))},t.Ga=function(){return Y(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:uh(this).options.apiKey,authDomain:uh(this).options.authDomain,appName:uh(this).name,currentUser:ch(this)&&ch(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.i==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.i==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.i==e&&this.g?_(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return ah(i,ga(i.a,o))})},t.Wc=function(t){if(!Nr())return Oe(new S("operation-not-supported-in-this-environment"));var e=this,n=Gi(t.providerId),r=Fr(),i=null;(!Dr()||br())&&uh(this).options.authDomain&&t.isOAuthProvider&&(i=pu(uh(this).options.authDomain,uh(this).options.apiKey,uh(this).name,"signInViaPopup",t,null,r,ng.a.SDK_VERSION||null,null,null,this.S(),this.f));var o=pr(i,n&&n.ua,n&&n.ta);return fh(this,n=ih(this).then(function(n){return Pc(n,o,"signInViaPopup",t,r,!!i,e.S())}).then(function(){return new be(function(t,n){e.ma("signInViaPopup",null,new S("cancelled-popup-request"),e.i),e.g=t,e.O=n,e.i=r,e.c=Lc(e.b,e,"signInViaPopup",o,r)})}).then(function(t){return o&&dr(o),t?Yr(t):null}).o(function(t){throw o&&dr(o),t}))},t.Xc=function(t){if(!Nr())return Oe(new S("operation-not-supported-in-this-environment"));var e=this;return fh(this,ih(this).then(function(){return function(t){return Zl(t,function(){return t.b.set($l,t.c.D,t.a)})}(e.l)}).then(function(){return jc(e.b,"signInViaRedirect",t,void 0,e.S())}))},t.qa=function(){var t=this;return oh(this).then(function(e){return t.b&&Bc(t.b.b),e}).o(function(e){throw t.b&&Bc(t.b.b),e})},t.cd=function(t){if(!t)return Oe(new S("null-user"));if(this.W!=t.tenantId)return Oe(new S("tenant-id-mismatch"));var e=this,n={};n.apiKey=uh(this).options.apiKey,n.authDomain=uh(this).options.authDomain,n.appName=uh(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Qs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new pl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&vl(e,r),Rl(e,t),e}(t,n,e.G,e.Ga());return fh(this,this.h.then(function(){if(uh(e).options.apiKey!=t.l)return r.reload()}).then(function(){return ch(e)&&t.uid==ch(e).uid?(Rl(ch(e),t),e.da(t)):(sh(e,r),Tl(r),e.da(r))}).then(function(){hh(e)}))},t.zb=function(){var t=this;return fh(this,this.h.then(function(){return t.b&&Bc(t.b.b),ch(t)?(sh(t,null),Yl(t.l).then(function(){hh(t)})):Ie()}))},t.Yc=function(){var t=this;return Xl(this.l,uh(this).options.authDomain).then(function(e){if(!t.m){var n;if(n=ch(t)&&e){n=ch(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Rl(ch(t),e),ch(t).I();(ch(t)||e)&&(sh(t,e),e&&(Tl(e),e.ha=t.G),t.b&&Ac(t.b,t),hh(t))}})},t.da=function(t){return Jl(this.l,t)},t.kc=function(){hh(this),this.da(ch(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.h.then(function(){return ah(e,Ie(t))})},t.yc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(ch(e))})},t.zc=function(t){var e=this;!function(t,e){t.P.push(e),fh(t,t.h.then(function(){!t.m&&G(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(lh(t)))}))}(this,function(){t.next(ch(e))})},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(ch(r)):"function"==typeof t.next&&t.next(ch(r))}),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(ch(r)):"function"==typeof t.next&&t.next(ch(r))}),this.bc(t,e,n)},t.mc=function(t){var e=this;return fh(this,this.h.then(function(){return ch(e)?ch(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Sc=function(t){var e=this;return this.h.then(function(){return ah(e,Za(e.a,Ga,{token:t}))}).then(function(t){var n=t.user;return Nl(n,"isAnonymous",!1),e.da(n),t})},t.Tc=function(t,e){var n=this;return this.h.then(function(){return ah(n,Za(n.a,$a,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return ah(n,Za(n.a,Ea,{email:t,password:e}))})},t.Za=function(t){var e=this;return this.h.then(function(){return ah(e,t.ja(e.a))})},t.Rc=function(t){return Gr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var t=this;return this.h.then(function(){var e=ch(t);if(e&&e.isAnonymous){var n=Yr({providerId:null,isNewUser:!1});return Yr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ah(t,t.a.yb()).then(function(e){var n=e.user;return Nl(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return ch(this)&&ch(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&ch(this)&&_l(ch(this))},t.Oc=function(t){var e=this;H(this.u,function(n){n==t&&e.A--}),0>this.A&&(this.A=0),0==this.A&&ch(this)&&wl(ch(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),fh(this,this.h.then(function(){e.m||G(e.u,t)&&t(lh(e))}))},t.removeAuthTokenListener=function(t){Q(this.u,function(e){return e==t})},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Ql("local"),t.a,this.pa),this.b&&(xc(this.b,this),Bc(this.b.b)),Promise.resolve()},t.gc=function(t){return fh(this,function(t,e){return Za(t,Ca,{identifier:e,continueUri:Rr()?cr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Ac=function(t){return!!No(t)},t.vb=function(t,e){var n=this;return fh(this,Ie().then(function(){var t=new Ai(e);if(!t.c)throw new S("argument-error",Ri+" must be true when sending sign in link to email");return Vi(t)}).then(function(e){return n.a.vb(t,e)}).then(function(){}))},t.hd=function(t){return this.Qa(t).then(function(t){return t.data.email})},t.mb=function(t,e){return fh(this,this.a.mb(t,e).then(function(){}))},t.Qa=function(t){return fh(this,this.a.Qa(t).then(function(t){return new si(t)}))},t.ib=function(t){return fh(this,this.a.ib(t).then(function(){}))},t.ub=function(t,e){var n=this;return fh(this,Ie().then(function(){return void 0===e||dt(e)?{}:Vi(new Ai(e))}).then(function(e){return n.a.ub(t,e)}).then(function(){}))},t.Vc=function(t,e){return fh(this,$c(this,t,e,_(this.Za,this)))},t.Uc=function(t,e){var n=this;return fh(this,Ie().then(function(){var r=e||cr(),i=xo(t,r);if(!(r=No(r)))throw new S("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new S("tenant-id-mismatch");return n.Za(i)}))},dh.prototype.render=function(){},dh.prototype.reset=function(){},dh.prototype.getResponse=function(){},dh.prototype.execute=function(){};var mh=null;function gh(t,e){return(e=vh(e))&&t.a[e]||null}function vh(t){return(t=void 0===t?1e12:t)?t.toString():null}function yh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.i="invisible"!==this.c.size,this.f=ae(t);var n=this;this.h=function(){n.execute()},this.i?this.execute():un(this.f,"click",this.h)}function bh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function _h(){}function wh(){}ph.prototype.render=function(t,e){return this.a[this.b.toString()]=new yh(t,e),this.b++},ph.prototype.reset=function(t){var e=gh(this,t);t=vh(t),e&&t&&(e.delete(),delete this.a[t])},ph.prototype.getResponse=function(t){return(t=gh(this,t))?t.getResponse():null},ph.prototype.execute=function(t){(t=gh(this,t))&&t.execute()},yh.prototype.getResponse=function(){return bh(this),this.b},yh.prototype.execute=function(){bh(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.i&&t.execute()},6e4)},500))},yh.prototype.delete=function(){bh(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.h)},Qr(_h,"FACTOR_ID","phone"),wh.prototype.g=function(){return mh||(mh=new ph),Ie(mh)},wh.prototype.c=function(){};var Eh=null;function Ch(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Th=new yt(Et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Sh=new qr(3e4,6e4);Ch.prototype.g=function(t){var e=this;return new be(function(n,r){var i=setTimeout(function(){r(new S("network-request-failed"))},Sh.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new S("internal-error"));delete s[e.a]},Ie(Us(It(Th,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new S("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(s.grecaptcha))})},Ch.prototype.c=function(){this.b--};var Ih=null;function Oh(t,e,n,r,i,o,a){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,a?(Eh||(Eh=new wh),a=Eh):(Ih||(Ih=new Ch),a=Ih),this.v=a,this.a=n||{theme:"light",type:"image"},this.i=[],this.a[xh])throw new S("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[Nh],!s.document)throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ae(e)||!this.h&&ae(e).hasChildNodes())throw new S("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Gs(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[kh];this.a[kh]=function(t){if(Rh(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ar(c,s);"function"==typeof e&&e(t)}};var l=this.a[Ah];this.a[Ah]=function(){if(Rh(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Ar(l,s);"function"==typeof t&&t()}}}var kh="callback",Ah="expired-callback",xh="sitekey",Nh="size";function Rh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Ph(t,e){return t.i.push(e),e.na(function(){$(t.i,e)}),e}function Dh(t){if(t.A)throw new S("internal-error","RecaptchaVerifier instance has been destroyed.")}function jh(t,e,n){var r=!1;try{this.b=n||ng.a.app()}catch(s){throw new S("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new S("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=ng.a.SDK_VERSION?Or(ng.a.SDK_VERSION,o):null,Oh.call(this,n,t,e,function(){try{var t=i.b.auth().ka()}catch(e){t=null}return t},o,N(O),r)}function Lh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new S("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=Mh.length)throw new S("internal-error","Argument validator received an unsupported number of arguments.");n=Mh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new S("argument-error",t+" failed: "+r)}(t=Oh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Ph(this,Ie().then(function(){if(Rr()&&!_r())return vr();throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.v.g(t.u())}).then(function(e){return t.g=e,Za(t.s,La,{})}).then(function(e){t.a[xh]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){Dh(this);var t=this;return Ph(this,this.Ia().then(function(){if(null===t.c){var e=t.m;if(!t.h){var n=ae(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!se&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ht(s.name),'"'),s.type){o.push(' type="',Ht(s.type),'"');var a={};gt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=de(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ue(o,s)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Dh(this);var t=this;return Ph(this,this.render().then(function(e){return new be(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Q(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.h&&t.g.execute(t.c)}})}))},t.reset=function(){Dh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Dh(this),this.A=!0,this.v.c();for(var t=0;t<this.i.length;t++)this.i[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){t=ae(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},C(jh,Oh);var Mh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Fh(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Vh(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Uh(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:p}}function qh(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Bh(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Hh(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){return!!e&&!(!e.ja||t&&e.providerId!==t)}}}function zh(t,e){return p(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Kh(t){return p(t)&&"string"==typeof t.uid}function Wh(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Gh(t,e){for(var n in e){var r=e[n].name;t[r]=Jh(r,t[n],e[n].j)}}function $h(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w(function(t){return this[t]},n),set:w(function(t,e,n,r){Lh(t,[n],[r],!0),this[e]=r},r,n,e[n].jb),enumerable:!0})}}function Qh(t,e,n,r){t[e]=Jh(e,n,r)}function Jh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Lh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Gh(th.prototype,{ib:{name:"applyActionCode",j:[Fh("code")]},Qa:{name:"checkActionCode",j:[Fh("code")]},mb:{name:"confirmPasswordReset",j:[Fh("code"),Fh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Fh("email"),Fh("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Fh("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Fh("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Wh(Uh(),qh(),"nextOrObserver"),qh("opt_error",!0),qh("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Wh(Uh(),qh(),"nextOrObserver"),qh("opt_error",!0),qh("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Fh("email"),Wh(Uh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Fh("email"),Uh("actionCodeSettings")]},wb:{name:"setPersistence",j:[Fh("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Hh()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Hh()]},Sc:{name:"signInWithCustomToken",j:[Fh("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Fh("email"),Fh("password")]},Uc:{name:"signInWithEmailLink",j:[Fh("email"),Fh("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Fh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[Wh({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof pl)}},Bh(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Fh(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Fh("url"),Uh("options",!0)]},hd:{name:"verifyPasswordResetCode",j:[Fh("code")]}}),$h(th.prototype,{lc:{name:"languageCode",jb:Wh(Fh(),Bh(),"languageCode")},ti:{name:"tenantId",jb:Wh(Fh(),Bh(),"tenantId")}}),(th.Persistence=Qu).LOCAL="local",th.Persistence.SESSION="session",th.Persistence.NONE="none",Gh(pl.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Vh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Vh("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Hh()]},pb:{name:"linkWithCredential",j:[Hh()]},Cc:{name:"linkWithPhoneNumber",j:[Fh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Hh()]},sb:{name:"reauthenticateWithCredential",j:[Hh()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Fh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Wh(Uh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Fh(null,!0)]},bd:{name:"unlink",j:[Fh("provider")]},Ab:{name:"updateEmail",j:[Fh("email")]},Bb:{name:"updatePassword",j:[Fh("password")]},dd:{name:"updatePhoneNumber",j:[Hh("phone")]},Cb:{name:"updateProfile",j:[Uh("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Fh("email"),Wh(Uh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]}}),Gh(ph.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Gh(dh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Gh(be.prototype,{na:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),$h(Wc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Vh("appVerificationDisabledForTesting")}}),Gh(Gc.prototype,{confirm:{name:"confirm",j:[Fh("verificationCode")]}}),Qh(ao,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[mo,ko,Po,ho],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Wh(Fh(),Uh(),"json")]),Qh(Ao,"credential",function(t,e){return new Oo(t,e)},[Fh("email"),Fh("password")]),Gh(Oo.prototype,{w:{name:"toJSON",j:[Fh(null,!0)]}}),Gh(bo.prototype,{Ca:{name:"addScope",j:[Fh("scope")]},Ka:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),Qh(bo,"credential",_o,[Wh(Fh(),Uh(),"token")]),Qh(Ao,"credentialWithLink",xo,[Fh("email"),Fh("emailLink")]),Gh(wo.prototype,{Ca:{name:"addScope",j:[Fh("scope")]},Ka:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),Qh(wo,"credential",Eo,[Wh(Fh(),Uh(),"token")]),Gh(Co.prototype,{Ca:{name:"addScope",j:[Fh("scope")]},Ka:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),Qh(Co,"credential",To,[Wh(Fh(),Wh(Uh(),Bh()),"idToken"),Wh(Fh(),Bh(),"accessToken",!0)]),Gh(So.prototype,{Ka:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),Qh(So,"credential",Io,[Wh(Fh(),Uh(),"token"),Fh("secret",!0)]),Gh(yo.prototype,{Ca:{name:"addScope",j:[Fh("scope")]},credential:{name:"credential",j:[Wh(Fh(),Wh(Uh(),Bh()),"optionsOrIdToken"),Wh(Fh(),Bh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),Gh(fo.prototype,{w:{name:"toJSON",j:[Fh(null,!0)]}}),Gh(co.prototype,{w:{name:"toJSON",j:[Fh(null,!0)]}}),Qh(jo,"credential",Lo,[Fh("verificationId"),Fh("verificationCode")]),Gh(jo.prototype,{eb:{name:"verifyPhoneNumber",j:[Wh(Fh(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?zh(t.session,oo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?zh(t.session,so)&&Kh(t.multiFactorHint):t.session&&t.multiFactorUid?zh(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Gh(Ro.prototype,{w:{name:"toJSON",j:[Fh(null,!0)]}}),Gh(S.prototype,{toJSON:{name:"toJSON",j:[Fh(null,!0)]}}),Gh(Ko.prototype,{toJSON:{name:"toJSON",j:[Fh(null,!0)]}}),Gh(zo.prototype,{toJSON:{name:"toJSON",j:[Fh(null,!0)]}}),Gh(Zc.prototype,{toJSON:{name:"toJSON",j:[Fh(null,!0)]}}),Gh(Jc.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),Gh(ol.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Fh("displayName",!0)]},ad:{name:"unenroll",j:[Wh({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Kh},Fh(),"multiFactorInfoIdentifier")]}}),Gh(jh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Qh(_i,"parseLink",ki,[Fh("link")]),Qh(_h,"assertion",function(t){return new rl(t)},[Hh("phone")]),function(){if(void 0===ng.a||!ng.a.INTERNAL||!ng.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ai,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:th,AuthCredential:ao,Error:S};Qh(t,"EmailAuthProvider",Ao,[]),Qh(t,"FacebookAuthProvider",bo,[]),Qh(t,"GithubAuthProvider",wo,[]),Qh(t,"GoogleAuthProvider",Co,[]),Qh(t,"TwitterAuthProvider",So,[]),Qh(t,"OAuthProvider",yo,[Fh("providerId")]),Qh(t,"SAMLAuthProvider",vo,[Fh("providerId")]),Qh(t,"PhoneAuthProvider",jo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof th)}}]),Qh(t,"RecaptchaVerifier",jh,[Wh(Fh(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Uh("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof ng.a.app.App)}}]),Qh(t,"ActionCodeURL",_i,[]),Qh(t,"PhoneMultiFactorGenerator",_h,[]),ng.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new th(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),ng.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.mc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),ng.a.registerVersion("@firebase/auth","0.16.1"),ng.a.INTERNAL.extendNamespace({User:pl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),n("6Uf2");var rg=n("q/0M"),ig=n("qOnz"),og=function(t,e){return(og=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function sg(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ag,ug="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},cg=cg||{},lg=ug||self;function hg(){}function fg(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function dg(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var pg="closure_uid_"+(1e9*Math.random()>>>0),mg=0;function gg(t,e,n){return t.call.apply(t.bind,arguments)}function vg(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function yg(t,e,n){return(yg=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gg:vg).apply(null,arguments)}function bg(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function _g(){return Date.now()}function wg(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Eg(){this.j=this.j,this.i=this.i}Eg.prototype.j=!1,Eg.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,pg)&&t[pg]||(t[pg]=++mg)}(this)},Eg.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Cg=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Tg=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Sg(t){return Array.prototype.concat.apply([],arguments)}function Ig(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Og(t){return/^[\s\xa0]*$/.test(t)}var kg,Ag=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function xg(t,e){return-1!=t.indexOf(e)}function Ng(t,e){return t<e?-1:t>e?1:0}t:{var Rg=lg.navigator;if(Rg){var Pg=Rg.userAgent;if(Pg){kg=Pg;break t}}kg=""}function Dg(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function jg(t){var e={};for(var n in t)e[n]=t[n];return e}var Lg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mg(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Lg.length;o++)n=Lg[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Fg(t){return Fg[" "](t),t}Fg[" "]=hg;var Vg,Ug,qg=xg(kg,"Opera"),Bg=xg(kg,"Trident")||xg(kg,"MSIE"),Hg=xg(kg,"Edge"),zg=Hg||Bg,Kg=xg(kg,"Gecko")&&!(xg(kg.toLowerCase(),"webkit")&&!xg(kg,"Edge"))&&!(xg(kg,"Trident")||xg(kg,"MSIE"))&&!xg(kg,"Edge"),Wg=xg(kg.toLowerCase(),"webkit")&&!xg(kg,"Edge");function Gg(){var t=lg.document;return t?t.documentMode:void 0}t:{var $g="",Qg=(Ug=kg,Kg?/rv:([^\);]+)(\)|;)/.exec(Ug):Hg?/Edge\/([\d\.]+)/.exec(Ug):Bg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ug):Wg?/WebKit\/(\S+)/.exec(Ug):qg?/(?:Version)[ \/]?(\S+)/.exec(Ug):void 0);if(Qg&&($g=Qg?Qg[1]:""),Bg){var Jg=Gg();if(null!=Jg&&Jg>parseFloat($g)){Vg=String(Jg);break t}}Vg=$g}var Yg={};function Xg(t){return function(t,e){var n=Yg;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Ag(String(Vg)).split("."),r=Ag(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Ng(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Ng(0==s[2].length,0==a[2].length)||Ng(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Zg=lg.document&&Bg&&(Gg()||parseInt(Vg,10))||void 0,tv=!Bg||9<=Number(Zg),ev=Bg&&!Xg("9"),nv=function(){if(!lg.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{lg.addEventListener("test",hg,e),lg.removeEventListener("test",hg,e)}catch(n){}return t}();function rv(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function iv(t,e){if(rv.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Kg){t:{try{Fg(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ov[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}rv.prototype.b=function(){this.defaultPrevented=!0},wg(iv,rv);var ov={2:"touch",3:"pen",4:"mouse"};iv.prototype.b=function(){iv.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ev)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var sv="closure_listenable_"+(1e6*Math.random()|0),av=0;function uv(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++av,this.Y=this.Z=!1}function cv(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function lv(t){this.src=t,this.a={},this.b=0}function hv(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Cg(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(cv(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function fv(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}lv.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=fv(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new uv(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var dv="closure_lm_"+(1e6*Math.random()|0),pv={};function mv(t,e,n,r,i){if(r&&r.once)return vv(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)mv(t,e[o],n,r,i);return null}return n=Sv(n),t&&t[sv]?t.va(e,n,dg(r)?!!r.capture:!!r,i):gv(t,e,n,!1,r,i)}function gv(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=dg(i)?!!i.capture:!!i;if(s&&!tv)return null;var a=Cv(t);if(a||(t[dv]=a=new lv(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ev,e=tv?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nv||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(_v(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function vv(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)vv(t,e[o],n,r,i);return null}return n=Sv(n),t&&t[sv]?t.wa(e,n,dg(r)?!!r.capture:!!r,i):gv(t,e,n,!0,r,i)}function yv(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)yv(t,e[o],n,r,i);else r=dg(r)?!!r.capture:!!r,n=Sv(n),t&&t[sv]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=fv(o=t.a[e],n,r,i))&&(cv(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Cv(t))&&(e=t.a[e.toString()],t=-1,e&&(t=fv(e,n,r,i)),(n=-1<t?e[t]:null)&&bv(n))}function bv(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[sv])hv(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_v(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Cv(e))?(hv(n,t),0==n.b&&(n.src=null,e[dv]=null)):cv(t)}}}function _v(t){return t in pv?pv[t]:pv[t]="on"+t}function wv(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&bv(t),n.call(r,e)}function Ev(t,e){if(t.Y)return!0;if(!tv){if(!e)t:{e=["window","event"];for(var n=lg,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return wv(t,e=new iv(e,this))}return wv(t,new iv(e,this))}function Cv(t){return(t=t[dv])instanceof lv?t:null}var Tv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sv(t){return"function"==typeof t?t:(t[Tv]||(t[Tv]=function(e){return t.handleEvent(e)}),t[Tv])}function Iv(){Eg.call(this),this.c=new lv(this),this.J=this,this.C=null}function Ov(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new rv(e,t);else if(e instanceof rv)e.target=e.target||t;else{var i=e;Mg(e=new rv(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=kv(s,r,!0,e)&&i}if(i=kv(s=e.a=t,r,!0,e)&&i,i=kv(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=kv(s=e.a=n[o],r,!1,e)&&i}function kv(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&hv(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}wg(Iv,Eg),Iv.prototype[sv]=!0,(ag=Iv.prototype).addEventListener=function(t,e,n,r){mv(this,t,e,n,r)},ag.removeEventListener=function(t,e,n,r){yv(this,t,e,n,r)},ag.G=function(){if(Iv.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)cv(n[r]);delete e.a[t],e.b--}}this.C=null},ag.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ag.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Av=lg.JSON.stringify;function xv(){this.b=this.a=null}var Nv,Rv=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Dv},function(t){t.reset()});function Pv(){var t=Fv,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Dv(){this.next=this.b=this.a=null}function jv(t){lg.setTimeout(function(){throw t},0)}function Lv(t,e){Nv||function(){var t=lg.Promise.resolve(void 0);Nv=function(){t.then(Vv)}}(),Mv||(Nv(),Mv=!0),Fv.add(t,e)}xv.prototype.add=function(t,e){var n=Rv.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Dv.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Dv.prototype.reset=function(){this.next=this.b=this.a=null};var Mv=!1,Fv=new xv;function Vv(){for(var t;t=Pv();){try{t.a.call(t.b)}catch(n){jv(n)}var e=Rv;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Mv=!1}function Uv(t,e){Iv.call(this),this.b=t||1,this.a=e||lg,this.f=yg(this.Za,this),this.g=_g()}function qv(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Bv(t,e,n){if("function"==typeof t)n&&(t=yg(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=yg(t.handleEvent,t)}return 2147483647<Number(e)?-1:lg.setTimeout(t,e||0)}function Hv(t){t.a=Bv(function(){t.a=null,t.c&&(t.c=!1,Hv(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}wg(Uv,Iv),(ag=Uv.prototype).aa=!1,ag.M=null,ag.Za=function(){if(this.aa){var t=_g()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ov(this,"tick"),this.aa&&(qv(this),this.start()))}},ag.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=_g())},ag.G=function(){Uv.X.G.call(this),qv(this),delete this.a};var zv=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}og(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Hv(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(lg.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Eg);function Kv(t){Eg.call(this),this.b=t,this.a={}}wg(Kv,Eg);var Wv=[];function Gv(t,e,n,r){Array.isArray(n)||(n&&(Wv[0]=n.toString()),n=Wv);for(var i=0;i<n.length;i++){var o=mv(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function $v(t){Dg(t.a,function(t,e){this.a.hasOwnProperty(e)&&bv(t)},t),t.a={}}function Qv(){this.a=!0}function Jv(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Av(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Kv.prototype.G=function(){Kv.X.G.call(this),$v(this)},Kv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qv.prototype.info=function(){};var Yv={},Xv=null;function Zv(){return Xv=Xv||new Iv}function ty(t){rv.call(this,Yv.Fa,t)}function ey(t){var e=Zv();Ov(e,new ty(e,t))}function ny(t,e){rv.call(this,Yv.STAT_EVENT,t),this.stat=e}function ry(t){var e=Zv();Ov(e,new ny(e,t))}function iy(t){rv.call(this,Yv.Ga,t)}function oy(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return lg.setTimeout(function(){t()},e)}Yv.Fa="serverreachability",wg(ty,rv),Yv.STAT_EVENT="statevent",wg(ny,rv),Yv.Ga="timingevent",wg(iy,rv);var sy={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ay={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function uy(){}function cy(){}uy.prototype.a=null;var ly,hy={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function fy(){rv.call(this,"d")}function dy(){rv.call(this,"c")}function py(){}function my(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Kv(this),this.P=gy,this.R=new Uv(t=zg?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}wg(fy,rv),wg(dy,rv),wg(py,uy),ly=new py;var gy=45e3,vy={},yy={};function by(t,e,n){t.H=1,t.i=qy(jy(e)),t.j=n,t.I=!0,_y(t,null)}function _y(t,e){t.u=_g(),Cy(t),t.l=jy(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),tb(n.b,"t",r),t.D=0,t.a=$b(t.g,t.g.C?e:null),0<t.O&&(t.F=new zv(yg(t.Ca,t,t.a),t.O)),Gv(t.J,t.a,"readystatechange",t.Xa),e=t.B?jg(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ey(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function wy(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ey(t,n);if(i==yy){4==e&&(t.h=4,ry(14),r=!1),Jv(t.c,t.f,null,"[Incomplete Response]");break}if(i==vy){t.h=4,ry(15),Jv(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Jv(t.c,t.f,i,null),ky(t,i)}4==e&&0==n.length&&(t.h=1,ry(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ub(e),e.F=!0,ry(11))):(Jv(t.c,t.f,n,"[Invalid Chunked Response]"),Oy(t),Iy(t))}function Ey(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?yy:(n=Number(e.substring(n,r)),isNaN(n)?vy:(r+=1)+n>e.length?yy:(e=e.substr(r,n),t.D=r+n,e))}function Cy(t){t.T=_g()+t.P,Ty(t,t.P)}function Ty(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=oy(yg(t.Va,t),e)}function Sy(t){t.o&&(lg.clearTimeout(t.o),t.o=null)}function Iy(t){0==t.g.v||t.A||Hb(t.g,t)}function Oy(t){Sy(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,qv(t.R),$v(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ky(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||ab(n.b,t)))if(n.I=t.N,!t.C&&ab(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Bb(n),Nb(n)}Vb(n),ry(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=oy(yg(n.Sa,n),6e3));if(1>=sb(n.b)&&n.ea){try{n.ea()}catch(g){}n.ea=void 0}}else Kb(n,11)}else if((t.C||n.a==t)&&Bb(n),!Og(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(xg(l,"spdy")||xg(l,"quic")||xg(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(ub(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Uy(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=_g()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Gb(u,u.C?u.ga:null,u.fa),d.C){cb(u.b,d);var p=d,m=u.D;m&&p.setTimeout(m),p.o&&(Sy(p),Cy(p)),u.a=d}else Fb(u);0<n.g.length&&Db(n)}else"stop"!=i[0]&&"close"!=i[0]||Kb(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Kb(n,7):xb(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);ey(4)}catch(g){}}function Ay(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(fg(t)||"string"==typeof t)Tg(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(fg(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(fg(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function xy(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xy)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ny(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ry(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ry(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ry(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ag=my.prototype).setTimeout=function(t){this.P=t},ag.Xa=function(t){t=t.target;var e=this.F;e&&3==Ib(t)?e.f():this.Ca(t)},ag.Ca=function(t){try{if(t==this.a)t:{var e=Ib(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!zg&&!this.a.$())){this.A||4!=e||7==n||ey(8==n||0>=r?3:2),Sy(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Og(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,ry(12),Oy(this),Iy(this);break t}Jv(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ky(this,u)}this.I?(wy(this,e,o),zg&&this.b&&3==e&&(Gv(this.J,this.R,"tick",this.Wa),this.R.start())):(Jv(this.c,this.f,o,null),ky(this,o)),4==e&&Oy(this),this.b&&!this.A&&(4==e?Hb(this.g,this):(this.b=!1,Cy(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ry(12)):(this.h=0,ry(13)),Oy(this),Iy(this)}}}catch(c){}},ag.Wa=function(){if(this.a){var t=Ib(this.a),e=this.a.$();this.D<e.length&&(Sy(this),wy(this,t,e),this.b&&4!=t&&Cy(this))}},ag.cancel=function(){this.A=!0,Oy(this)},ag.Va=function(){this.o=null;var t=_g();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(ey(3),ry(17)),Oy(this),this.h=2,Iy(this)):Ty(this,this.T-t)},(ag=xy.prototype).K=function(){Ny(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ag.L=function(){return Ny(this),this.a.concat()},ag.get=function(t,e){return Ry(this.b,t)?this.b[t]:e},ag.set=function(t,e){Ry(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ag.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Py=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dy(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Dy){this.a=void 0!==e?e:t.a,Ly(this,t.f),this.j=t.j,My(this,t.c),Fy(this,t.h),this.g=t.g,e=t.b;var n=new Jy;n.c=e.c,e.a&&(n.a=new xy(e.a),n.b=e.b),Vy(this,n),this.i=t.i}else t&&(n=String(t).match(Py))?(this.a=!!e,Ly(this,n[1]||"",!0),this.j=By(n[2]||""),My(this,n[3]||"",!0),Fy(this,n[4]),this.g=By(n[5]||"",!0),Vy(this,n[6]||"",!0),this.i=By(n[7]||"")):(this.a=!!e,this.b=new Jy(null,this.a))}function jy(t){return new Dy(t)}function Ly(t,e,n){t.f=n?By(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function My(t,e,n){t.c=n?By(e,!0):e}function Fy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Vy(t,e,n){e instanceof Jy?(t.b=e,function(t,e){e&&!t.f&&(Yy(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Xy(this,e),tb(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Hy(e,$y)),t.b=new Jy(e,t.a))}function Uy(t,e,n){t.b.set(e,n)}function qy(t){return Uy(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_g()).toString(36)),t}function By(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hy(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,zy),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zy(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Dy.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Hy(e,Ky,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Hy(e,Ky,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hy(n,"/"==n.charAt(0)?Gy:Wy,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Hy(n,Qy)),t.join("")};var Ky=/[#\/\?@]/g,Wy=/[#\?:]/g,Gy=/[#\?]/g,$y=/[#\?@]/g,Qy=/#/g;function Jy(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yy(t){t.a||(t.a=new xy,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Xy(t,e){Yy(t),e=eb(t,e),Ry(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ry((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ny(t)))}function Zy(t,e){return Yy(t),e=eb(t,e),Ry(t.a.b,e)}function tb(t,e,n){Xy(t,e),0<n.length&&(t.c=null,t.a.set(eb(t,e),Ig(n)),t.b+=n.length)}function eb(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ag=Jy.prototype).add=function(t,e){Yy(this),this.c=null,t=eb(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ag.forEach=function(t,e){Yy(this),this.a.forEach(function(n,r){Tg(n,function(n){t.call(e,n,r,this)},this)},this)},ag.L=function(){Yy(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ag.K=function(t){Yy(this);var e=[];if("string"==typeof t)Zy(this,t)&&(e=Sg(e,this.a.get(eb(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Sg(e,t[n])}return e},ag.set=function(t,e){return Yy(this),this.c=null,Zy(this,t=eb(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ag.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ag.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var nb=function(){return function(t,e){this.b=t,this.a=e}}();function rb(t){this.g=t||ib,t=lg.PerformanceNavigationTiming?0<(t=lg.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(lg.ia&&lg.ia.ya&&lg.ia.ya()&&lg.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var ib=10;function ob(t){return!!t.b||!!t.a&&t.a.size>=t.f}function sb(t){return t.b?1:t.a?t.a.size:0}function ab(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ub(t,e){t.a?t.a.add(e):t.b=e}function cb(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function lb(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=sg(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ig(t.c)}function hb(){}function fb(){this.a=new hb}function db(t,e,n){var r=n||"";try{Ay(t,function(t,n){var i=t;dg(t)&&(i=Av(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Ex){throw e.push(r+"type="+encodeURIComponent("_badmap")),Ex}}function pb(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}rb.prototype.cancel=function(){var t,e;if(this.c=lb(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=sg(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},hb.prototype.stringify=function(t){return lg.JSON.stringify(t,void 0)},hb.prototype.parse=function(t){return lg.JSON.parse(t,void 0)};var mb=lg.JSON.parse;function gb(t){Iv.call(this),this.headers=new xy,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=vb,this.D=this.F=!1}wg(gb,Iv);var vb="",yb=/^https?$/i,bb=["POST","PUT"];function _b(t){return"content-type"==t.toLowerCase()}function wb(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Eb(t),Tb(t)}function Eb(t){t.u||(t.u=!0,Ov(t,"complete"),Ov(t,"error"))}function Cb(t){if(t.b&&void 0!==cg&&(!t.s[1]||4!=Ib(t)||2!=t.W()))if(t.l&&4==Ib(t))Bv(t.za,0,t);else if(Ov(t,"readystatechange"),4==Ib(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Py)[1]||null;if(!o&&lg.self&&lg.self.location){var s=lg.self.location.protocol;o=s.substr(0,s.length-1)}i=!yb.test(o?o.toLowerCase():"")}e=i}if(e)Ov(t,"complete"),Ov(t,"success");else{t.h=6;try{var a=2<Ib(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Eb(t)}}finally{Tb(t)}}}function Tb(t,e){if(t.a){Sb(t);var n=t.a,r=t.s[0]?hg:null;t.a=null,t.s=null,e||Ov(t,"ready");try{n.onreadystatechange=r}catch(Ex){}}}function Sb(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(lg.clearTimeout(t.m),t.m=null)}function Ib(t){return t.a?t.a.readyState:0}function Ob(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Dg(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Uy(t,e,n))}function kb(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ab(t){this.pa=0,this.g=[],this.c=new Qv,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=kb("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=kb("baseRetryDelayMs",5e3,t),this.Ra=kb("retryDelaySeedMs",1e4,t),this.Ma=kb("forwardChannelMaxRetries",2,t),this.ma=kb("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new rb(t&&t.concurrentRequestLimit),this.ka=new fb,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function xb(t){if(Rb(t),3==t.v){var e=t.R++,n=jy(t.B);Uy(n,"SID",t.J),Uy(n,"RID",e),Uy(n,"TYPE","terminate"),Lb(t,n),(e=new my(t,t.c,e,void 0)).H=2,e.i=qy(jy(n)),n=!1,lg.navigator&&lg.navigator.sendBeacon&&(n=lg.navigator.sendBeacon(e.i.toString(),"")),!n&&lg.Image&&((new Image).src=e.i,n=!0),n||(e.a=$b(e.g,null),e.a.ba(e.i)),e.u=_g(),Cy(e)}Wb(t)}function Nb(t){t.a&&(Ub(t),t.a.cancel(),t.a=null)}function Rb(t){Nb(t),t.j&&(lg.clearTimeout(t.j),t.j=null),Bb(t),t.b.cancel(),t.h&&("number"==typeof t.h&&lg.clearTimeout(t.h),t.h=null)}function Pb(t,e){t.g.push(new nb(t.Oa++,e)),3==t.v&&Db(t)}function Db(t){ob(t.b)||t.h||(t.h=!0,Lv(t.Ba,t),t.u=0)}function jb(t,e){var n;n=e?e.f:t.R++;var r=jy(t.B);Uy(r,"SID",t.J),Uy(r,"RID",n),Uy(r,"AID",t.P),Lb(t,r),t.i&&t.l&&Ob(r,t.i,t.l),n=new my(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Mb(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ub(t.b,n),by(n,r,e)}function Lb(t,e){t.f&&Ay({},function(t,n){Uy(e,n,t)})}function Mb(t,e,n){n=Math.min(t.g.length,n);var r=t.f?yg(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{db(l,s,"req"+c+"_")}catch(x_){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Fb(t){t.a||t.j||(t.T=1,Lv(t.Aa,t),t.o=0)}function Vb(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=oy(yg(t.Aa,t),zb(t,t.o)),t.o++,0))}function Ub(t){null!=t.s&&(lg.clearTimeout(t.s),t.s=null)}function qb(t){t.a=new my(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=jy(t.la);Uy(e,"RID","rpc"),Uy(e,"SID",t.J),Uy(e,"CI",t.H?"0":"1"),Uy(e,"AID",t.P),Lb(t,e),Uy(e,"TYPE","xmlhttp"),t.i&&t.l&&Ob(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=qy(jy(e)),n.j=null,n.I=!0,_y(n,t)}function Bb(t){null!=t.m&&(lg.clearTimeout(t.m),t.m=null)}function Hb(t,e){var n=null;if(t.a==e){Bb(t),Ub(t),t.a=null;var r=2}else{if(!ab(t.b,e))return;n=e.s,cb(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=_g()-e.u;var i=t.u;Ov(r=Zv(),new iy(r,n,e,i)),Db(t)}else Fb(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(sb(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=oy(yg(t.Ba,t,e),zb(t,t.u)),t.u++,0)))}(t,e)||2==r&&Vb(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Kb(t,5);break;case 4:Kb(t,10);break;case 3:Kb(t,6);break;default:Kb(t,2)}}function zb(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Kb(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=yg(t.Ya,t);n||(n=new Dy("//www.google.com/images/cleardot.gif"),lg.location&&"http"==lg.location.protocol||Ly(n,"https"),qy(n)),function(t,e){var n=new Qv;if(lg.Image){var r=new Image;r.onload=bg(pb,n,r,"TestLoadImage: loaded",!0,e),r.onerror=bg(pb,n,r,"TestLoadImage: error",!1,e),r.onabort=bg(pb,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=bg(pb,n,r,"TestLoadImage: timeout",!1,e),lg.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ry(2);t.v=0,t.f&&t.f.ra(e),Wb(t),Rb(t)}function Wb(t){t.v=0,t.I=-1,t.f&&(0==lb(t.b).length&&0==t.g.length||(t.b.c.length=0,Ig(t.g),t.g.length=0),t.f.qa())}function Gb(t,e,n){var r=function(t){return t instanceof Dy?jy(t):new Dy(t,void 0)}(n);if(""!=r.c)e&&My(r,e+"."+r.c),Fy(r,r.h);else{var i=lg.location;r=function(t,e,n,r){var i=new Dy(null,void 0);return t&&Ly(i,t),e&&My(i,e),n&&Fy(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Dg(t.V,function(t,e){Uy(r,e,t)}),n=t.na,(e=t.A)&&n&&Uy(r,e,n),Uy(r,"VER",t.ha),Lb(t,r),r}function $b(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new gb(t.Na)).F=t.C,e}function Qb(){}function Jb(){if(Bg&&!(10<=Number(Zg)))throw Error("Environmental error: no available transport.")}function Yb(t,e){Iv.call(this),this.a=new Ab(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Og(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Og(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new t_(this)}function Xb(t){fy.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Zb(){dy.call(this),this.status=1}function t_(t){this.a=t}(ag=gb.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ly),this.a.onreadystatechange=yg(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void wb(this,o)}t=n||"";var i=new xy(this.headers);r&&Ay(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=_b,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=lg.FormData&&t instanceof lg.FormData,!(0<=Cg(bb,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Sb(this),0<this.o&&((this.D=function(t){return Bg&&Xg(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=yg(this.xa,this)):this.m=Bv(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){wb(this,o)}},ag.xa=function(){void 0!==cg&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ov(this,"timeout"),this.abort(8))},ag.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ov(this,"complete"),Ov(this,"abort"),Tb(this))},ag.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Tb(this,!0)),gb.X.G.call(this)},ag.za=function(){this.j||(this.A||this.l||this.g?Cb(this):this.Ua())},ag.Ua=function(){Cb(this)},ag.W=function(){try{return 2<Ib(this)?this.a.status:-1}catch(Ug){return-1}},ag.$=function(){try{return this.a?this.a.responseText:""}catch(Ug){return""}},ag.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),mb(e)}},ag.ua=function(){return this.h},ag.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ag=Ab.prototype).ha=8,ag.v=1,ag.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new my(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Mg(r=jg(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Mb(this,n,e),Uy(i=jy(this.B),"RID",t),Uy(i,"CVER",22),this.A&&Uy(i,"X-HTTP-Session-Id",this.A),Lb(this,i),this.i&&r&&Ob(i,this.i,r),ub(this.b,n),this.Ia&&Uy(i,"TYPE","init"),this.da?(Uy(i,"$req",e),Uy(i,"SID","null"),n.U=!0,by(n,i,null)):by(n,i,e),this.v=2}}else 3==this.v&&(t?jb(this,t):0==this.g.length||ob(this.b)||jb(this))},ag.Aa=function(){if(this.j=null,qb(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=oy(yg(this.Ta,this),t)}},ag.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ry(10),Nb(this),qb(this))},ag.Sa=function(){null!=this.m&&(this.m=null,Nb(this),Vb(this),ry(19))},ag.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ry(2)):(this.c.info("Failed to ping google.com"),ry(1))},(ag=Qb.prototype).ta=function(){},ag.sa=function(){},ag.ra=function(){},ag.qa=function(){},ag.Ja=function(){},Jb.prototype.a=function(t,e){return new Yb(t,e)},wg(Yb,Iv),Yb.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ry(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Gb(t,null,t.fa),Db(t)},Yb.prototype.close=function(){xb(this.a)},Yb.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Pb(this.a,e)}else this.l?((e={}).__data__=Av(t),Pb(this.a,e)):Pb(this.a,t)},Yb.prototype.G=function(){this.a.f=null,delete this.f,xb(this.a),delete this.a,Yb.X.G.call(this)},wg(Xb,fy),wg(Zb,dy),wg(t_,Qb),t_.prototype.ta=function(){Ov(this.a,"a")},t_.prototype.sa=function(t){Ov(this.a,new Xb(t))},t_.prototype.ra=function(t){Ov(this.a,new Zb(t))},t_.prototype.qa=function(){Ov(this.a,"b")},Jb.prototype.createWebChannel=Jb.prototype.a,Yb.prototype.send=Yb.prototype.h,Yb.prototype.open=Yb.prototype.g,Yb.prototype.close=Yb.prototype.close,sy.NO_ERROR=0,sy.TIMEOUT=8,sy.HTTP_ERROR=6,ay.COMPLETE="complete",cy.EventType=hy,hy.OPEN="a",hy.CLOSE="b",hy.ERROR="c",hy.MESSAGE="d",Iv.prototype.listen=Iv.prototype.va,gb.prototype.listenOnce=gb.prototype.wa,gb.prototype.getLastError=gb.prototype.Qa,gb.prototype.getLastErrorCode=gb.prototype.ua,gb.prototype.getStatus=gb.prototype.W,gb.prototype.getResponseJson=gb.prototype.Pa,gb.prototype.getResponseText=gb.prototype.$,gb.prototype.send=gb.prototype.ba;var e_=sy,n_=ay,r_=Yv,i_=cy,o_=gb,s_=n("WVRz"),a_=new rg.b("@firebase/firestore");function u_(){return a_.logLevel}function c_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(a_.logLevel<=rg.a.DEBUG){var r=e.map(f_);a_.debug.apply(a_,Object(s_.g)(["Firestore (8.2.1): "+t],r))}}function l_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(a_.logLevel<=rg.a.ERROR){var r=e.map(f_);a_.error.apply(a_,Object(s_.g)(["Firestore (8.2.1): "+t],r))}}function h_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(a_.logLevel<=rg.a.WARN){var r=e.map(f_);a_.warn.apply(a_,Object(s_.g)(["Firestore (8.2.1): "+t],r))}}function f_(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Ex){return t}}function d_(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.1) INTERNAL ASSERTION FAILED: "+t;throw l_(e),new Error(e)}function p_(t,e){t||d_()}function m_(t,e){return t}function g_(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var v_=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=g_(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function y_(t,e){return t<e?-1:t>e?1:0}function b_(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function __(t){return t+"\0"}var w_=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.i)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return y_(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();w_.h=new w_("");var E_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},C_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(s_.c)(e,t),e}(Error),T_=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(w_.fromBase64String(e))}catch(e){throw new C_(E_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(w_.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),S_=function(t){this._=t};function I_(){if("undefined"==typeof Uint8Array)throw new C_(E_.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function O_(){if("undefined"==typeof atob)throw new C_(E_.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var k_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s_.c)(e,t),e.fromBase64String=function(t){return O_(),new e(T_.fromBase64String(t))},e.fromUint8Array=function(t){return I_(),new e(T_.fromUint8Array(t))},e.prototype.toBase64=function(){return O_(),this._.toBase64()},e.prototype.toUint8Array=function(){return I_(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(S_),A_=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},x_=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),N_=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();N_.UNAUTHENTICATED=new N_(null),N_.P=new N_("google-credentials-uid"),N_.g=new N_("first-party-uid");var R_=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},P_=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(N_.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),D_=function(){function t(t){var e=this;this.C=null,this.currentUser=N_.UNAUTHENTICATED,this.N=!1,this.F=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.F++,e.currentUser=e.O(),e.N=!0,e.p&&e.p(e.currentUser)},this.F=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then(function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.F,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.F!==e?(c_("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(p_("string"==typeof n.accessToken),new R_(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.O=function(){var t=this.auth&&this.auth.getUid();return p_(null===t||"string"==typeof t),new N_(t)},t}(),j_=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=N_.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),L_=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new j_(this.k,this.M))},t.prototype.S=function(t){t(N_.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),M_=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();M_.U=-1;var F_=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new C_(E_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new C_(E_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new C_(E_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new C_(E_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?y_(this.nanoseconds,t.nanoseconds):y_(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),V_=function(){function t(t){this.timestamp=t}return t.W=function(e){return new t(e)},t.min=function(){return new t(new F_(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.j=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),U_=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&d_(),void 0===n?n=t.length-e:n>t.length-e&&d_(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return this.Y(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),q_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s_.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new C_(E_.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.at=function(){return new e([])},e}(U_),B_=/^[_a-zA-Z][_a-zA-Z0-9]*$/,H_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s_.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return B_.test(t)},e.prototype.ot=function(){return this.rt().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new C_(E_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new C_(E_.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new C_(E_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new C_(E_.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(U_),z_=function(){function t(t){this.path=t}return t.ft=function(e){return new t(q_.ct(e))},t.dt=function(e){return new t(q_.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===q_.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return q_.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new q_(e.slice()))},t}();function K_(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function W_(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function G_(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var $_=function(){function t(t){this.fields=t,t.sort(H_.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return b_(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Q_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function J_(t){if(p_(!!t),"string"==typeof t){var e=0,n=Q_.exec(t);if(p_(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Y_(t.seconds),nanos:Y_(t.nanos)}}function Y_(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function X_(t){return"string"==typeof t?w_.fromBase64String(t):w_.fromUint8Array(t)}function Z_(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tw(t){var e=t.mapValue.fields.__previous_value__;return Z_(e)?tw(e):e}function ew(t){var e=J_(t.mapValue.fields.__local_write_time__.timestampValue);return new F_(e.seconds,e.nanos)}function nw(t){return null==t}function rw(t){return 0===t&&1/t==-1/0}function iw(t){return"number"==typeof t&&Number.isInteger(t)&&!rw(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ow(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Z_(t)?4:10:d_()}function sw(t,e){var n=ow(t);if(n!==ow(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ew(t).isEqual(ew(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=J_(t.timestampValue),r=J_(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return X_(t.bytesValue).isEqual(X_(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Y_(t.geoPointValue.latitude)===Y_(e.geoPointValue.latitude)&&Y_(t.geoPointValue.longitude)===Y_(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Y_(t.integerValue)===Y_(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Y_(t.doubleValue),r=Y_(e.doubleValue);return n===r?rw(n)===rw(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return b_(t.arrayValue.values||[],e.arrayValue.values||[],sw);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(K_(n)!==K_(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sw(n[i],r[i])))return!1;return!0}(t,e);default:return d_()}}function aw(t,e){return void 0!==(t.values||[]).find(function(t){return sw(t,e)})}function uw(t,e){var n=ow(t),r=ow(e);if(n!==r)return y_(n,r);switch(n){case 0:return 0;case 1:return y_(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Y_(t.integerValue||t.doubleValue),r=Y_(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return cw(t.timestampValue,e.timestampValue);case 4:return cw(ew(t),ew(e));case 5:return y_(t.stringValue,e.stringValue);case 6:return function(t,e){var n=X_(t),r=X_(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=y_(n[i],r[i]);if(0!==o)return o}return y_(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=y_(Y_(t.latitude),Y_(e.latitude));return 0!==n?n:y_(Y_(t.longitude),Y_(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=uw(n[i],r[i]);if(o)return o}return y_(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=y_(r[s],o[s]);if(0!==a)return a;var u=uw(n[r[s]],i[o[s]]);if(0!==u)return u}return y_(r.length,o.length)}(t.mapValue,e.mapValue);default:throw d_()}}function cw(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return y_(t,e);var n=J_(t),r=J_(e),i=y_(n.seconds,r.seconds);return 0!==i?i:y_(n.nanos,r.nanos)}function lw(t){return hw(t)}function hw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=J_(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?X_(t.bytesValue).toBase64():"referenceValue"in t?z_.dt(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=hw(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+hw(t.fields[o])}return e+"}"}(t.mapValue):d_();var e}function fw(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function dw(t){return!!t&&"integerValue"in t}function pw(t){return!!t&&"arrayValue"in t}function mw(t){return!!t&&"nullValue"in t}function gw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vw(t){return!!t&&"mapValue"in t}var yw=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!vw(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return sw(this.proto,t.proto)},t}(),bw=function(){function t(t){void 0===t&&(t=yw.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ow(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(H_.at(),this.Rt);return null!=t?new yw(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=vw(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.gt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function _w(t){var e=[];return W_(t.fields||{},function(t,n){var r=new H_([t]);if(vw(n)){var i=_w(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new $_(e)}var ww=function(t,e){this.key=t,this.version=e},Ew=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(s_.c)(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(ww),Cw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(s_.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ww),Tw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s_.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ww),Sw=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function Iw(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Sw(t,e,n,r,i,o,s)}function Ow(t){var e=m_(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.ot()+t.op.toString()+lw(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.ot()+t.dir}(t)}).join(","),nw(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Uw(e.startAt)),e.endAt&&(n+="|ub:",n+=Uw(e.endAt)),e.St=n}return e.St}function kw(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Bw(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!sw(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zw(t.startAt,e.startAt)&&zw(t.endAt,e.endAt)}function Aw(t){return z_.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var xw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(s_.c)(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new Nw(t,n,r):"array-contains"===n?new jw(t,r):"in"===n?new Lw(t,r):"not-in"===n?new Mw(t,r):"array-contains-any"===n?new Fw(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new Rw(t,n):new Pw(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(uw(e,this.value)):null!==e&&ow(this.value)===ow(e)&&this.Ct(uw(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return d_()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Nw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=z_.dt(r.referenceValue),i}return Object(s_.c)(e,t),e.prototype.matches=function(t){var e=z_.J(t.key,this.key);return this.Ct(e)},e}(xw),Rw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Dw(0,n),r}return Object(s_.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(xw),Pw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Dw(0,n),r}return Object(s_.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(xw);function Dw(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return z_.dt(t.referenceValue)})}var jw=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(s_.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return pw(e)&&aw(e.arrayValue,this.value)},e}(xw),Lw=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(s_.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&aw(this.value.arrayValue,e)},e}(xw),Mw=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(s_.c)(e,t),e.prototype.matches=function(t){if(aw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!aw(this.value.arrayValue,e)},e}(xw),Fw=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(s_.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!pw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return aw(e.value.arrayValue,t)})},e}(xw),Vw=function(t,e){this.position=t,this.before=e};function Uw(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return lw(t)}).join(",")}var qw=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Bw(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Hw(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ht()?z_.J(z_.dt(s.referenceValue),n.key):uw(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function zw(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!sw(t.position[n],e.position[n]))return!1;return!0}var Kw=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ft=null,this.Ot=null};function Ww(t,e,n,r,i,o,s,a){return new Kw(t,e,n,r,i,o,s,a)}function Gw(t){return new Kw(t)}function $w(t){return!nw(t.limit)&&"F"===t.limitType}function Qw(t){return!nw(t.limit)&&"L"===t.limitType}function Jw(t){return t.Nt.length>0?t.Nt[0].field:null}function Yw(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function Xw(t){return null!==t.collectionGroup}function Zw(t){var e=m_(t);if(null===e.Ft){e.Ft=[];var n=Yw(e),r=Jw(e);if(null!==n&&null===r)n.ht()||e.Ft.push(new qw(n)),e.Ft.push(new qw(H_.lt(),"asc"));else{for(var i=!1,o=0,s=e.Nt;o<s.length;o++){var a=s[o];e.Ft.push(a),a.field.ht()&&(i=!0)}if(!i){var u=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ft.push(new qw(H_.lt(),u))}}}return e.Ft}function tE(t){var e=m_(t);if(!e.Ot)if("F"===e.limitType)e.Ot=Iw(e.path,e.collectionGroup,Zw(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Zw(e);r<i.length;r++){var o=i[r];n.push(new qw(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Vw(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Vw(e.startAt.position,!e.startAt.before):null;e.Ot=Iw(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.Ot}function eE(t,e,n){return new Kw(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function nE(t,e){return kw(tE(t),tE(e))&&t.limitType===e.limitType}function rE(t){return Ow(tE(t))+"|lt:"+t.limitType}function iE(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.ot()+" "+e.op+" "+lw(e.value);var e}).join(", ")+"]"),nw(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Uw(t.startAt)),t.endAt&&(e+=", endAt: "+Uw(t.endAt)),"Target("+e+")"}(tE(t))+"; limitType="+t.limitType+")"}function oE(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):z_.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Hw(t.startAt,Zw(t),e)||t.endAt&&Hw(t.endAt,Zw(t),e))}(t,e)}function sE(t){return function(e,n){for(var r=!1,i=0,o=Zw(t);i<o.length;i++){var s=o[i],a=aE(s,e,n);if(0!==a)return a;r=r||s.field.ht()}return 0}}function aE(t,e,n){var r=t.field.ht()?z_.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?uw(r,i):d_()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return d_()}}var uE=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=V_.min()),void 0===o&&(o=V_.min()),void 0===s&&(s=w_.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();function cE(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rw(e)?"-0":e}}function lE(t){return{integerValue:""+t}}function hE(t,e){return iw(e)?lE(e):cE(t,e)}var fE=function(){this.Ut=void 0};function dE(t,e,n){return t instanceof gE?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof vE?yE(t,e):t instanceof bE?_E(t,e):function(t,e){var n=mE(t,e),r=EE(n)+EE(t.Qt);return dw(n)&&dw(t.Qt)?lE(r):cE(t.Kt,r)}(t,e)}function pE(t,e,n){return t instanceof vE?yE(t,e):t instanceof bE?_E(t,e):n}function mE(t,e){return t instanceof wE?dw(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var gE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s_.c)(e,t),e}(fE),vE=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(s_.c)(e,t),e}(fE);function yE(t,e){for(var n=CE(e),r=function(t){n.some(function(e){return sw(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var bE=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(s_.c)(e,t),e}(fE);function _E(t,e){for(var n=CE(e),r=function(t){n=n.filter(function(e){return!sw(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var wE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return Object(s_.c)(e,t),e}(fE);function EE(t){return Y_(t.integerValue||t.doubleValue)}function CE(t){return pw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var TE=function(t,e){this.field=t,this.transform=e},SE=function(t,e){this.version=t,this.transformResults=e},IE=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Wt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"jt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function OE(t,e){return void 0!==t.updateTime?e instanceof Ew&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Ew}var kE=function(){};function AE(t,e,n){return t instanceof DE?function(t,e,n){var r=t.value;if(n.transformResults){var i=ME(t.fieldTransforms,e,n.transformResults);r=VE(t.fieldTransforms,r,i)}return new Ew(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof jE?function(t,e,n){if(!OE(t.Gt,e))return new Tw(t.key,n.version);var r=LE(t,e,n.transformResults?ME(t.fieldTransforms,e,n.transformResults):[]);return new Ew(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Cw(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function xE(t,e,n,r){return t instanceof DE?function(t,e,n,r){if(!OE(t.Gt,e))return e;var i=t.value;if(t.fieldTransforms){var o=FE(t.fieldTransforms,n,e,r);i=VE(t.fieldTransforms,i,o)}var s=PE(e);return new Ew(t.key,s,i,{bt:!0})}(t,e,r,n):t instanceof jE?function(t,e,n,r){if(!OE(t.Gt,e))return e;var i=PE(e),o=LE(t,e,FE(t.fieldTransforms,n,e,r));return new Ew(t.key,i,o,{bt:!0})}(t,e,r,n):function(t,e){return OE(t.Gt,e)?new Cw(t.key,V_.min()):e}(t,e)}function NE(t,e){return void 0!==t.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Ew?e.field(o.field):void 0,a=mE(o.transform,s||null);null!=a&&(n=null==n?(new bw).set(o.field,a):n.set(o.field,a))}return n?n.yt():null}(t.fieldTransforms,e):null}function RE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&b_(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof vE&&e instanceof vE||t instanceof bE&&e instanceof bE?b_(t.elements,e.elements,sw):t instanceof wE&&e instanceof wE?sw(t.Qt,e.Qt):t instanceof gE&&e instanceof gE}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function PE(t){return t instanceof Ew?t.version:V_.min()}var DE=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return Object(s_.c)(e,t),e}(kE),jE=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.zt=r,s.Gt=i,s.fieldTransforms=o,s.type=1,s}return Object(s_.c)(e,t),e}(kE);function LE(t,e,n){var r;return r=function(t,e){var n=new bw(e);return t.zt.fields.forEach(function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.yt()}(t,r=e instanceof Ew?e.data():yw.empty()),VE(t.fieldTransforms,r,n)}function ME(t,e,n){var r=[];p_(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Ew&&(a=e.field(o.field)),r.push(pE(s,a,n[i]))}return r}function FE(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof Ew&&(c=n.field(a.field)),null===c&&r instanceof Ew&&(c=r.field(a.field)),i.push(dE(u,c,e))}return i}function VE(t,e,n){for(var r=new bw(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.yt()}var UE,qE,BE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return Object(s_.c)(e,t),e}(kE),HE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return Object(s_.c)(e,t),e}(kE),zE=function(t){this.count=t};function KE(t){switch(t){case E_.OK:return d_();case E_.CANCELLED:case E_.UNKNOWN:case E_.DEADLINE_EXCEEDED:case E_.RESOURCE_EXHAUSTED:case E_.INTERNAL:case E_.UNAVAILABLE:case E_.UNAUTHENTICATED:return!1;case E_.INVALID_ARGUMENT:case E_.NOT_FOUND:case E_.ALREADY_EXISTS:case E_.PERMISSION_DENIED:case E_.FAILED_PRECONDITION:case E_.ABORTED:case E_.OUT_OF_RANGE:case E_.UNIMPLEMENTED:case E_.DATA_LOSS:return!0;default:return d_()}}function WE(t){if(void 0===t)return l_("GRPC error has no .code"),E_.UNKNOWN;switch(t){case UE.OK:return E_.OK;case UE.CANCELLED:return E_.CANCELLED;case UE.UNKNOWN:return E_.UNKNOWN;case UE.DEADLINE_EXCEEDED:return E_.DEADLINE_EXCEEDED;case UE.RESOURCE_EXHAUSTED:return E_.RESOURCE_EXHAUSTED;case UE.INTERNAL:return E_.INTERNAL;case UE.UNAVAILABLE:return E_.UNAVAILABLE;case UE.UNAUTHENTICATED:return E_.UNAUTHENTICATED;case UE.INVALID_ARGUMENT:return E_.INVALID_ARGUMENT;case UE.NOT_FOUND:return E_.NOT_FOUND;case UE.ALREADY_EXISTS:return E_.ALREADY_EXISTS;case UE.PERMISSION_DENIED:return E_.PERMISSION_DENIED;case UE.FAILED_PRECONDITION:return E_.FAILED_PRECONDITION;case UE.ABORTED:return E_.ABORTED;case UE.OUT_OF_RANGE:return E_.OUT_OF_RANGE;case UE.UNIMPLEMENTED:return E_.UNIMPLEMENTED;case UE.DATA_LOSS:return E_.DATA_LOSS;default:return d_()}}(qE=UE||(UE={}))[qE.OK=0]="OK",qE[qE.CANCELLED=1]="CANCELLED",qE[qE.UNKNOWN=2]="UNKNOWN",qE[qE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qE[qE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qE[qE.NOT_FOUND=5]="NOT_FOUND",qE[qE.ALREADY_EXISTS=6]="ALREADY_EXISTS",qE[qE.PERMISSION_DENIED=7]="PERMISSION_DENIED",qE[qE.UNAUTHENTICATED=16]="UNAUTHENTICATED",qE[qE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qE[qE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qE[qE.ABORTED=10]="ABORTED",qE[qE.OUT_OF_RANGE=11]="OUT_OF_RANGE",qE[qE.UNIMPLEMENTED=12]="UNIMPLEMENTED",qE[qE.INTERNAL=13]="INTERNAL",qE[qE.UNAVAILABLE=14]="UNAVAILABLE",qE[qE.DATA_LOSS=15]="DATA_LOSS";var GE=function(){function t(t,e){this.J=t,this.root=e||QE.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,QE.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,QE.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Zt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new $E(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new $E(this.root,t,this.J,!1)},t.prototype.se=function(){return new $E(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new $E(this.root,t,this.J,!0)},t}(),$E=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),QE=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw d_();if(this.right._e())throw d_();var t=this.left.me();if(t!==this.right.me())throw d_();return t+(this._e()?0:1)},t}();QE.EMPTY=null,QE.RED=!0,QE.Jt=!1,QE.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw d_()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw d_()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw d_()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw d_()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw d_()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new QE(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());var JE=function(){function t(t){this.J=t,this.data=new GE(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt(function(e,n){return t(e),!1})},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new YE(this.data.ee())},t.prototype.ne=function(t){return new YE(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),YE=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),XE=new GE(z_.J);function ZE(){return XE}function tC(){return ZE()}var eC=new GE(z_.J);function nC(){return eC}var rC=new GE(z_.J);function iC(){return rC}var oC=new JE(z_.J);function sC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=oC,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var aC=new JE(y_);function uC(){return aC}var cC=function(){function t(t){this.J=t?function(e,n){return t(e,n)||z_.J(e.key,n.key)}:function(t,e){return z_.J(t.key,e.key)},this.Ve=nC(),this.pe=new GE(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),lC=function(){function t(){this.ve=new GE(z_.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):d_():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt(function(e,n){t.push(n)}),t},t}(),hC=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=a}return t.Fe=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,cC.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&nE(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),fC=function(){function t(t,e,n,r,i){this.Mt=t,this.Oe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,dC.Be(e,n)),new t(V_.min(),r,uC(),ZE(),sC())},t}(),dC=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(w_.h,n,sC(),sC(),sC())},t}(),pC=function(t,e,n,r){this.We=t,this.removedTargetIds=e,this.key=n,this.je=r},mC=function(t,e){this.targetId=t,this.Ge=e},gC=function(t,e,n,r){void 0===n&&(n=w_.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},vC=function(){function t(){this.ze=0,this.He=_C(),this.Je=w_.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=sC(),e=sC(),n=sC();return this.He.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:d_()}}),new dC(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=_C()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),yC=function(){function t(t){this.hn=t,this.ln=new Map,this._n=ZE(),this.fn=bC(),this.dn=new JE(y_)}return t.prototype.wn=function(t){for(var e=0,n=t.We;e<n.length;e++){var r=n[e];t.je instanceof Ew?this.En(r,t.je):t.je instanceof Cw&&this.Tn(r,t.key,t.je)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Tn(r=o[i],t.key,t.je)},t.prototype.In=function(t){var e=this;this.mn(t,function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:d_()}})},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach(function(t,r){n.Rn(r)&&e(r)})},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(Aw(i))if(0===n){var o=new z_(i.path);this.Tn(e,o,new Cw(o,V_.min()))}else p_(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach(function(r,i){var o=e.gn(i);if(o){if(r.qe&&Aw(o.target)){var s=new z_(o.target.path);null!==e._n.get(s)||e.bn(i,s)||e.Tn(i,s,new Cw(s,t))}r.tn&&(n.set(i,r.nn()),r.sn())}});var r=sC();this.fn.forEach(function(t,n){var i=!0;n.Re(function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)}),i&&(r=r.add(t))});var i=new fC(t,n,this.dn,this._n,r);return this._n=ZE(),this.fn=bC(),this.dn=new JE(y_),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new vC,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new JE(y_),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||c_("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new vC),this.hn.Sn(t).forEach(function(n){e.Tn(t,n,null)})},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();function bC(){return new GE(z_.J)}function _C(){return new GE(z_.J)}var wC={asc:"ASCENDING",desc:"DESCENDING"},EC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CC=function(t,e){this.T=t,this.qt=e};function TC(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function SC(t,e){return t.qt?e.toBase64():e.toUint8Array()}function IC(t,e){return TC(t,e.G())}function OC(t){return p_(!!t),V_.W(function(t){var e=J_(t);return new F_(e.seconds,e.nanos)}(t))}function kC(t,e){return function(t){return new q_(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function AC(t){var e=q_.ct(t);return p_(ZC(e)),e}function xC(t,e){return kC(t.T,e.path)}function NC(t,e){var n=AC(e);if(n.get(1)!==t.T.projectId)throw new C_(E_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new C_(E_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new z_(jC(n))}function RC(t,e){return kC(t.T,e)}function PC(t){var e=AC(t);return 4===e.length?q_.at():jC(e)}function DC(t){return new q_(["projects",t.T.projectId,"databases",t.T.database]).ot()}function jC(t){return p_(t.length>4&&"documents"===t.get(4)),t.X(5)}function LC(t,e,n){return{name:xC(t,e),fields:n.proto.mapValue.fields}}function MC(t,e,n){var r=NC(t,e.name),i=OC(e.updateTime),o=new yw({mapValue:{fields:e.fields}});return new Ew(r,i,o,{hasCommittedMutations:!!n})}function FC(t,e){var n;if(e instanceof DE)n={update:LC(t,e.key,e.value)};else if(e instanceof BE)n={delete:xC(t,e.key)};else if(e instanceof jE)n={update:LC(t,e.key,e.data),updateMask:XC(e.zt)};else{if(!(e instanceof HE))return d_();n={verify:xC(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof gE)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof vE)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof bE)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof wE)return{fieldPath:e.field.ot(),increment:n.Qt};throw d_()}(0,t)})),e.Gt.jt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:IC(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:d_()}(t,e.Gt)),n}function VC(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?IE.updateTime(OC(t.updateTime)):void 0!==t.exists?IE.exists(t.exists):IE.Wt()}(e.currentDocument):IE.Wt(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(p_("REQUEST_TIME"===e.setToServerValue),n=new gE):"appendMissingElements"in e?n=new vE(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new bE(e.removeAllFromArray.values||[]):"increment"in e?n=new wE(t,e.increment):d_();var r=H_._t(e.fieldPath);return new TE(r,n)}(t,e)}):[];if(e.update){var i=NC(t,e.update.name),o=new yw({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new $_((t.fieldPaths||[]).map(function(t){return H_._t(t)}))}(e.updateMask);return new jE(i,o,s,n,r)}return new DE(i,o,n,r)}if(e.delete){var a=NC(t,e.delete);return new BE(a,n)}if(e.verify){var u=NC(t,e.verify);return new HE(u,n)}return d_()}function UC(t,e){return{documents:[RC(t,e.path)]}}function qC(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=RC(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=RC(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(gw(t.value))return{unaryFilter:{field:$C(t.field),op:"IS_NAN"}};if(mw(t.value))return{unaryFilter:{field:$C(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(gw(t.value))return{unaryFilter:{field:$C(t.field),op:"IS_NOT_NAN"}};if(mw(t.value))return{unaryFilter:{field:$C(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$C(t.field),op:GC(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:$C(t.field),direction:WC(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.qt||nw(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=zC(e.startAt)),e.endAt&&(n.structuredQuery.endAt=zC(e.endAt)),n}function BC(t){var e=PC(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){p_(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=HC(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new qw(QC(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return nw(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=KC(n.startAt));var l=null;return n.endAt&&(l=KC(n.endAt)),Ww(e,i,a,s,u,"F",c,l)}function HC(t){return t?void 0!==t.unaryFilter?[YC(t)]:void 0!==t.fieldFilter?[JC(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return HC(t)}).reduce(function(t,e){return t.concat(e)}):d_():[]}function zC(t){return{before:t.before,values:t.position}}function KC(t){return new Vw(t.values||[],!!t.before)}function WC(t){return wC[t]}function GC(t){return EC[t]}function $C(t){return{fieldPath:t.ot()}}function QC(t){return H_._t(t.fieldPath)}function JC(t){return xw.create(QC(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return d_()}}(t.fieldFilter.op),t.fieldFilter.value)}function YC(t){switch(t.unaryFilter.op){case"IS_NAN":var e=QC(t.unaryFilter.field);return xw.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=QC(t.unaryFilter.field);return xw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=QC(t.unaryFilter.field);return xw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=QC(t.unaryFilter.field);return xw.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return d_()}}function XC(t){var e=[];return t.fields.forEach(function(t){return e.push(t.ot())}),{fieldPaths:e}}function ZC(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var tT=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},eT=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.Fn=!1,t(function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)},function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Fn&&d_(),this.Fn=!0,this.Nn?this.error?this.On(n,this.error):this.kn(e,this.result):new t(function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.On(n,e).next(t,i)}})},t.prototype.Mn=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln(function(){return e(n)}):t.resolve(n)},t.prototype.On=function(e,n){return e?this.Ln(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.$n=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.$n(r)},t}(),nT=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new tT,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new oT(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=lT(e.target.error);n.qn.reject(new oT(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new oT(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(c_("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new aT(e)},t}(),rT=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn(Object(ig.p)())&&l_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return c_("SimpleDb","Removing database:",t),uT(window.indexedDB.deleteDatabase(t)).Mn()},t.Wn=function(){if("undefined"==typeof indexedDB)return!1;if(t.jn())return!0;var e=Object(ig.p)(),n=t.Kn(e),r=0<n&&n<10,i=t.Gn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.jn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n=this;return Object(s_.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(c_("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new oT(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new C_(E_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new oT(t,n))},i.onupgradeneeded=function(t){c_("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Qn.Yn(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){c_("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}})})},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(s_.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(s_.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(s_.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Jn(t)];case 2:return a.db=h.sent(),e=nT.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),eT.reject(t)}).Mn(),u={},s.catch(function(){}),[4,e.Un];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return c_("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),iT=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return uT(this.ts.delete())},t}(),oT=function(t){function e(e,n){var r=this;return(r=t.call(this,E_.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(s_.c)(e,t),e}(C_);function sT(t){return"IndexedDbTransactionError"===t.name}var aT=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(c_("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(c_("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),uT(n)},t.prototype.add=function(t){return c_("SimpleDb","ADD",this.store.name,t,t),uT(this.store.add(t))},t.prototype.get=function(t){var e=this;return uT(this.store.get(t)).next(function(n){return void 0===n&&(n=null),c_("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return c_("SimpleDb","DELETE",this.store.name,t),uT(this.store.delete(t))},t.prototype.count=function(){return c_("SimpleDb","COUNT",this.store.name),uT(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.us=function(t,e){c_("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,function(t,e,n){return n.delete()})},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new eT(function(n,r){e.onerror=function(t){var e=lT(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.cs=function(t,e){var n=[];return new eT(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new iT(i),s=e(i.primaryKey,i.value,o);if(s instanceof eT){var a=s.catch(function(t){return o.done(),eT.reject(t)});n.push(a)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}}).next(function(){return eT.$n(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function uT(t){return new eT(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=lT(t.target.error);n(e)}})}var cT=!1;function lT(t){var e=rT.Kn(Object(ig.p)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new C_("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return cT||(cT=!0,setTimeout(function(){throw r},0)),r}}return t}var hT=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new tT,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch(function(t){})}return t.Is=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.As=setTimeout(function(){return e.Rs()},t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new C_(E_.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys(function(){return null!==t.As?(t.clearTimeout(),t.op().then(function(e){return t.Ts.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function fT(t,e){if(l_("AsyncQueue",e+": "+t),sT(t))return new C_(E_.UNAVAILABLE,e+": "+t);throw t}var dT=function(t,e){this.progress=t,this.gs=e},pT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",mT=function(){function t(){this.Vs=[]}return t.prototype.ps=function(t){this.Vs.push(t)},t.prototype.bs=function(){this.Vs.forEach(function(t){return t()})},t}();function gT(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=yT(e)),e=vT(t.get(n),e);return yT(e)}function vT(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function yT(t){return t+"\x01\x01"}function bT(t){var e=t.length;if(p_(e>=2),2===e)return p_("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),q_.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&d_(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:d_()}o=s+2}return new q_(r)}var _T=function(t,e){this.seconds=t,this.nanoseconds=e},wT=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};wT.store="owner",wT.key="owner";var ET=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ET.store="mutationQueues",ET.keyPath="userId";var CT=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};CT.store="mutations",CT.keyPath="batchId",CT.userMutationsIndex="userMutationsIndex",CT.userMutationsKeyPath=["userId","batchId"];var TT=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,gT(e)]},t.key=function(t,e,n){return[t,gT(e),n]},t}();TT.store="documentMutations",TT.PLACEHOLDER=new TT;var ST=function(t,e){this.path=t,this.readTime=e},IT=function(t,e){this.path=t,this.version=e},OT=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};OT.store="remoteDocuments",OT.readTimeIndex="readTimeIndex",OT.readTimeIndexPath="readTime",OT.collectionReadTimeIndex="collectionReadTimeIndex",OT.collectionReadTimeIndexPath=["parentPath","readTime"];var kT=function(t){this.byteSize=t};kT.store="remoteDocumentGlobal",kT.key="remoteDocumentGlobalKey";var AT=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};AT.store="targets",AT.keyPath="targetId",AT.queryTargetsIndexName="queryTargetsIndex",AT.queryTargetsKeyPath=["canonicalId","targetId"];var xT=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};xT.store="targetDocuments",xT.keyPath=["targetId","path"],xT.documentTargetsIndex="documentTargetsIndex",xT.documentTargetsKeyPath=["path","targetId"];var NT=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};NT.key="targetGlobalKey",NT.store="targetGlobal";var RT=function(t,e){this.collectionId=t,this.parent=e};RT.store="collectionParents",RT.keyPath=["collectionId","parent"];var PT=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};PT.store="clientMetadata",PT.keyPath="clientId";var DT=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};DT.store="bundles",DT.keyPath="bundleId";var jT=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};jT.store="namedQueries",jT.keyPath="name";var LT=Object(s_.g)(Object(s_.g)(Object(s_.g)(Object(s_.g)([ET.store,CT.store,TT.store,OT.store,AT.store,wT.store,NT.store,xT.store],[PT.store]),[kT.store]),[RT.store]),[DT.store,jT.store]),MT=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).vs=e,r.Ss=n,r}return Object(s_.c)(e,t),e}(mT);function FT(t,e){var n=m_(t);return rT.Hn(n.vs,e)}var VT=function(){function t(t,e,n,r){this.batchId=t,this.Ds=e,this.baseMutations=n,this.mutations=r}return t.prototype.Cs=function(t,e,n){for(var r=n.xs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=AE(o,e,r[i]))}return e},t.prototype.Ns=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=xE(i,e,e,this.Ds))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=xE(u,e,o,this.Ds))}return e},t.prototype.Fs=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.Ns(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},sC())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&b_(this.mutations,t.mutations,function(t,e){return RE(t,e)})&&b_(this.baseMutations,t.baseMutations,function(t,e){return RE(t,e)})},t}(),UT=function(){function t(t,e,n,r){this.batch=t,this.Os=e,this.xs=n,this.ks=r}return t.from=function(e,n,r){p_(e.mutations.length===r.length);for(var i=iC(),o=e.mutations,s=0;s<o.length;s++)i=i.Ht(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),qT=function(t){this.Ms=t};function BT(t,e){if(e.document)return MC(t.Ms,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=z_.Tt(e.noDocument.path),r=GT(e.noDocument.readTime);return new Cw(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=z_.Tt(e.unknownDocument.path);return r=GT(e.unknownDocument.version),new Tw(i,r)}return d_()}function HT(t,e,n){var r=zT(n),i=e.key.path.Z().rt();if(e instanceof Ew){var o=function(t,e){return{name:xC(t,e.key),fields:e.vt().mapValue.fields,updateTime:TC(t,e.version.G())}}(t.Ms,e),s=e.hasCommittedMutations;return new OT(null,null,o,s,r,i)}if(e instanceof Cw){var a=e.key.path.rt(),u=WT(e.version);return s=e.hasCommittedMutations,new OT(null,new ST(a,u),null,s,r,i)}if(e instanceof Tw){var c=e.key.path.rt(),l=WT(e.version);return new OT(new IT(c,l),null,null,!0,r,i)}return d_()}function zT(t){var e=t.G();return[e.seconds,e.nanoseconds]}function KT(t){var e=new F_(t[0],t[1]);return V_.W(e)}function WT(t){var e=t.G();return new _T(e.seconds,e.nanoseconds)}function GT(t){var e=new F_(t.seconds,t.nanoseconds);return V_.W(e)}function $T(t,e){for(var n=(e.baseMutations||[]).map(function(e){return VC(t.Ms,e)}),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map(function(e){return VC(t.Ms,e)}),s=F_.fromMillis(e.localWriteTimeMs);return new VT(e.batchId,s,n,o)}function QT(t){var e,n,r=GT(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?GT(t.lastLimboFreeSnapshotVersion):V_.min();return void 0!==t.query.documents?(p_(1===(n=t.query).documents.length),e=tE(Gw(PC(n.documents[0])))):e=function(t){return tE(BC(t))}(t.query),new uE(e,t.targetId,0,t.lastListenSequenceNumber,r,i,w_.fromBase64String(t.resumeToken))}function JT(t,e){var n,r=WT(e.Mt),i=WT(e.lastLimboFreeSnapshotVersion);n=Aw(e.target)?UC(t.Ms,e.target):qC(t.Ms,e.target);var o=e.resumeToken.toBase64();return new AT(e.targetId,Ow(e.target),r,o,e.sequenceNumber,i,n)}function YT(t){var e=BC({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?eE(e,e.limit,"L"):e}var XT=function(){function t(){}return t.prototype.Ls=function(t,e){return ZT(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:GT(e.createTime),version:e.version};var e})},t.prototype.$s=function(t,e){return ZT(t).put({bundleId:(n=e).id,createTime:WT(OC(n.createTime)),version:n.version});var n},t.prototype.Bs=function(t,e){return tS(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:YT(e.bundledQuery),readTime:GT(e.readTime)};var e})},t.prototype.qs=function(t,e){return tS(t).put(function(t){return{name:t.name,readTime:WT(OC(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function ZT(t){return FT(t,DT.store)}function tS(t){return FT(t,jT.store)}var eS=function(){function t(){this.Us=new nS}return t.prototype.Qs=function(t,e){return this.Us.add(e),eT.resolve()},t.prototype.Ks=function(t,e){return eT.resolve(this.Us.getEntries(e))},t}(),nS=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new JE(q_.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new JE(q_.J)).rt()},t}(),rS=function(){function t(){this.Ws=new nS}return t.prototype.Qs=function(t,e){var n=this;if(!this.Ws.has(e)){var r=e.et(),i=e.Z();t.ps(function(){n.Ws.add(e)});var o={collectionId:r,parent:gT(i)};return iS(t).put(o)}return eT.resolve()},t.prototype.Ks=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[__(e),""],!1,!0);return iS(t).os(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(bT(o.parent))}return n})},t}();function iS(t){return FT(t,RT.store)}var oS={js:!1,Gs:0,zs:0,Hs:0},sS=function(){function t(t,e,n){this.Js=t,this.Ys=e,this.Xs=n}return t.Zs=function(e){return new t(e,t.ti,t.ei)},t}();function aS(t){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(e){if(t.code!==E_.FAILED_PRECONDITION||t.message!==pT)throw t;return c_("LocalStore","Unexpectedly lost primary lease"),[2]})})}sS.ti=10,sS.ei=1e3,sS.ni=new sS(41943040,sS.ti,sS.ei),sS.si=new sS(-1,0,0);var uS=function(){function t(t,e){this.ii=t,this.ri=e,this.oi={}}return t.prototype.get=function(t){var e=this.ii(t),n=this.oi[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.ri(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ii(t),r=this.oi[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ri(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.oi[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ii(t),n=this.oi[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ri(n[r][0],t))return 1===n.length?delete this.oi[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){W_(this.oi,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.nt=function(){return G_(this.oi)},t}(),cS=function(){function t(){this.ci=new uS(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.ai=!1}return t.prototype.ui=function(t){var e=this.ci.get(t);return e?e.readTime:V_.min()},t.prototype.hi=function(t,e){this.li(),this.ci.set(t.key,{_i:t,readTime:e})},t.prototype.fi=function(t,e){void 0===e&&(e=null),this.li(),this.ci.set(t,{_i:null,readTime:e})},t.prototype.di=function(t,e){this.li();var n=this.ci.get(e);return void 0!==n?eT.resolve(n._i):this.wi(t,e)},t.prototype.getEntries=function(t,e){return this.Ei(t,e)},t.prototype.apply=function(t){return this.li(),this.ai=!0,this.Ti(t)},t.prototype.li=function(){},t}();function lS(t,e,n){var r=t.store(CT.store),i=t.store(TT.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ls({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){p_(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=TT.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return eT.$n(o).next(function(){return c})}function hS(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw d_();e=t.noDocument}return JSON.stringify(e).length}var fS=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ii=n,this.mi=r,this.Ai={}}return t.Ri=function(e,n,r,i){return p_(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Pi=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pS(t).ls({index:CT.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.yi=function(t,e,n,r){var i=this,o=mS(t),s=pS(t);return s.add({}).next(function(a){p_("number"==typeof a);for(var u=new VT(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return FC(t.Ms,e)}),i=n.mutations.map(function(e){return FC(t.Ms,e)});return new CT(e,n.batchId,n.Ds.toMillis(),r,i)}(i.Kt,i.userId,u),l=[],h=new JE(function(t,e){return y_(t.ot(),e.ot())}),f=0,d=r;f<d.length;f++){var p=d[f],m=TT.key(i.userId,p.key.path,a);h=h.add(p.key.path.Z()),l.push(s.put(c)),l.push(o.put(m,TT.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ii.Qs(t,e))}),t.ps(function(){i.Ai[a]=u.keys()}),eT.$n(l).next(function(){return u})})},t.prototype.gi=function(t,e){var n=this;return pS(t).get(e).next(function(t){return t?(p_(t.userId===n.userId),$T(n.Kt,t)):null})},t.prototype.Vi=function(t,e){var n=this;return this.Ai[e]?eT.resolve(this.Ai[e]):this.gi(t,e).next(function(t){if(t){var r=t.keys();return n.Ai[e]=r,r}return null})},t.prototype.pi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return pS(t).ls({index:CT.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(p_(e.batchId>=r),o=$T(n.Kt,e)),i.done()}).next(function(){return o})},t.prototype.bi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return pS(t).ls({index:CT.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.vi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pS(t).os(CT.userMutationsIndex,n).next(function(t){return t.map(function(t){return $T(e.Kt,t)})})},t.prototype.Si=function(t,e){var n=this,r=TT.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return mS(t).ls({range:i},function(r,i,s){var a=r[0],u=r[2],c=bT(r[1]);if(a===n.userId&&e.path.isEqual(c))return pS(t).get(u).next(function(t){if(!t)throw d_();p_(t.userId===n.userId),o.push($T(n.Kt,t))});s.done()}).next(function(){return o})},t.prototype.Di=function(t,e){var n=this,r=new JE(y_),i=[];return e.forEach(function(e){var o=TT.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=mS(t).ls({range:s},function(t,i,o){var s=t[0],a=t[2],u=bT(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),eT.$n(i).next(function(){return n.Ci(t,r)})},t.prototype.xi=function(t,e){var n=this,r=e.path,i=r.length+1,o=TT.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new JE(y_);return mS(t).ls({range:s},function(t,e,o){var s=t[0],u=t[2],c=bT(t[1]);s===n.userId&&r.st(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Ci(t,a)})},t.prototype.Ci=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(pS(t).get(e).next(function(t){if(null===t)throw d_();p_(t.userId===n.userId),r.push($T(n.Kt,t))}))}),eT.$n(i).next(function(){return r})},t.prototype.Ni=function(t,e){var n=this;return lS(t.vs,this.userId,e).next(function(r){return t.ps(function(){n.Fi(e.batchId)}),eT.forEach(r,function(e){return n.mi.Oi(t,e)})})},t.prototype.Fi=function(t){delete this.Ai[t]},t.prototype.ki=function(t){var e=this;return this.Pi(t).next(function(n){if(!n)return eT.resolve();var r=IDBKeyRange.lowerBound(TT.prefixForUser(e.userId)),i=[];return mS(t).ls({range:r},function(t,n,r){if(t[0]===e.userId){var o=bT(t[1]);i.push(o)}else r.done()}).next(function(){p_(0===i.length)})})},t.prototype.Mi=function(t,e){return dS(t,this.userId,e)},t.prototype.Li=function(t){var e=this;return gS(t).get(this.userId).next(function(t){return t||new ET(e.userId,-1,"")})},t}();function dS(t,e,n){var r=TT.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return mS(t).ls({range:o,hs:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function pS(t){return FT(t,CT.store)}function mS(t){return FT(t,TT.store)}function gS(t){return FT(t,ET.store)}var vS=function(){function t(t){this.$i=t}return t.prototype.next=function(){return this.$i+=2,this.$i},t.Bi=function(){return new t(0)},t.qi=function(){return new t(-1)},t}(),yS=function(){function t(t,e){this.mi=t,this.Kt=e}return t.prototype.Ui=function(t){var e=this;return this.Qi(t).next(function(n){var r=new vS(n.highestTargetId);return n.highestTargetId=r.next(),e.Ki(t,n).next(function(){return n.highestTargetId})})},t.prototype.Wi=function(t){return this.Qi(t).next(function(t){return V_.W(new F_(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.ji=function(t){return this.Qi(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.Gi=function(t,e,n){var r=this;return this.Qi(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ki(t,i)})},t.prototype.zi=function(t,e){var n=this;return this.Hi(t,e).next(function(){return n.Qi(t).next(function(r){return r.targetCount+=1,n.Ji(e,r),n.Ki(t,r)})})},t.prototype.Yi=function(t,e){return this.Hi(t,e)},t.prototype.Xi=function(t,e){var n=this;return this.Zi(t,e.targetId).next(function(){return bS(t).delete(e.targetId)}).next(function(){return n.Qi(t)}).next(function(e){return p_(e.targetCount>0),e.targetCount-=1,n.Ki(t,e)})},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return bS(t).ls(function(s,a){var u=QT(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Xi(t,u)))}).next(function(){return eT.$n(o)}).next(function(){return i})},t.prototype.mn=function(t,e){return bS(t).ls(function(t,n){var r=QT(n);e(r)})},t.prototype.Qi=function(t){return _S(t).get(NT.key).next(function(t){return p_(null!==t),t})},t.prototype.Ki=function(t,e){return _S(t).put(NT.key,e)},t.prototype.Hi=function(t,e){return bS(t).put(JT(this.Kt,e))},t.prototype.Ji=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.er=function(t){return this.Qi(t).next(function(t){return t.targetCount})},t.prototype.nr=function(t,e){var n=Ow(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return bS(t).ls({range:r,index:AT.queryTargetsIndexName},function(t,n,r){var o=QT(n);kw(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.sr=function(t,e,n){var r=this,i=[],o=wS(t);return e.forEach(function(e){var s=gT(e.path);i.push(o.put(new xT(n,s))),i.push(r.mi.ir(t,n,e))}),eT.$n(i)},t.prototype.rr=function(t,e,n){var r=this,i=wS(t);return eT.forEach(e,function(e){var o=gT(e.path);return eT.$n([i.delete([n,o]),r.mi.cr(t,n,e)])})},t.prototype.Zi=function(t,e){var n=wS(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ar=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=wS(t),i=sC();return r.ls({range:n,hs:!0},function(t,e,n){var r=bT(t[1]),o=new z_(r);i=i.add(o)}).next(function(){return i})},t.prototype.Mi=function(t,e){var n=gT(e.path),r=IDBKeyRange.bound([n],[__(n)],!1,!0),i=0;return wS(t).ls({index:xT.documentTargetsIndex,hs:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Dn=function(t,e){return bS(t).get(e).next(function(t){return t?QT(t):null})},t}();function bS(t){return FT(t,AT.store)}function _S(t){return FT(t,NT.store)}function wS(t){return FT(t,xT.store)}function ES(t,e){var n=t[1],r=e[1],i=y_(t[0],e[0]);return 0===i?y_(n,r):i}var CS=function(){function t(t){this.ur=t,this.buffer=new JE(ES),this.hr=0}return t.prototype.lr=function(){return++this.hr},t.prototype._r=function(t){var e=[t,this.lr()];if(this.buffer.size<this.ur)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ES(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),TS=function(){function t(t,e){this.dr=t,this.fs=e,this.wr=!1,this.Er=null}return t.prototype.start=function(t){-1!==this.dr.params.Js&&this.Tr(t)},t.prototype.stop=function(){this.Er&&(this.Er.cancel(),this.Er=null)},Object.defineProperty(t.prototype,"Ir",{get:function(){return null!==this.Er},enumerable:!1,configurable:!0}),t.prototype.Tr=function(t){var e=this,n=this.wr?3e5:6e4;c_("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Er=this.fs.mr("lru_garbage_collection",n,function(){return Object(s_.b)(e,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){switch(n.label){case 0:this.Er=null,this.wr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ar(this.dr)];case 2:return n.sent(),[3,7];case 3:return sT(e=n.sent())?(c_("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,aS(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Tr(t)];case 8:return n.sent(),[2]}})})})},t}(),SS=function(){function t(t,e){this.Rr=t,this.params=e}return t.prototype.Pr=function(t,e){return this.Rr.yr(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.gr=function(t,e){var n=this;if(0===e)return eT.resolve(M_.U);var r=new CS(e);return this.Rr.mn(t,function(t){return r._r(t.sequenceNumber)}).next(function(){return n.Rr.Vr(t,function(t){return r._r(t)})}).next(function(){return r.maxValue})},t.prototype.tr=function(t,e,n){return this.Rr.tr(t,e,n)},t.prototype.pr=function(t,e){return this.Rr.pr(t,e)},t.prototype.br=function(t,e){var n=this;return-1===this.params.Js?(c_("LruGarbageCollector","Garbage collection skipped; disabled"),eT.resolve(oS)):this.vr(t).next(function(r){return r<n.params.Js?(c_("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Js),oS):n.Sr(t,e)})},t.prototype.vr=function(t){return this.Rr.vr(t)},t.prototype.Sr=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Pr(t,this.params.Ys).next(function(e){return e>c.params.Xs?(c_("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Xs+" from "+e),r=c.params.Xs):r=e,o=Date.now(),c.gr(t,r)}).next(function(r){return n=r,s=Date.now(),c.tr(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.pr(t,n)}).next(function(t){return u=Date.now(),u_()<=rg.a.DEBUG&&c_("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),eT.resolve({js:!0,Gs:r,zs:i,Hs:t})})},t}(),IS=function(){function t(t,e){this.db=t,this.dr=function(t,e){return new SS(t,e)}(this,e)}return t.prototype.yr=function(t){var e=this.Dr(t);return this.db.Cr().er(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.Dr=function(t){var e=0;return this.Vr(t,function(t){e++}).next(function(){return e})},t.prototype.mn=function(t,e){return this.db.Cr().mn(t,e)},t.prototype.Vr=function(t,e){return this.Nr(t,function(t,n){return e(n)})},t.prototype.ir=function(t,e,n){return OS(t,n)},t.prototype.cr=function(t,e,n){return OS(t,n)},t.prototype.tr=function(t,e,n){return this.db.Cr().tr(t,e,n)},t.prototype.Oi=function(t,e){return OS(t,e)},t.prototype.Fr=function(t,e){return function(t,e){var n=!1;return gS(t)._s(function(r){return dS(t,r,e).next(function(t){return t&&(n=!0),eT.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.pr=function(t,e){var n=this,r=this.db.kr().Or(),i=[],o=0;return this.Nr(t,function(s,a){if(a<=e){var u=n.Fr(t,s).next(function(e){if(!e)return o++,r.di(t,s).next(function(){return r.fi(s),wS(t).delete([0,gT(s.path)])})});i.push(u)}}).next(function(){return eT.$n(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.Ss);return this.db.Cr().Yi(t,n)},t.prototype.Mr=function(t,e){return OS(t,e)},t.prototype.Nr=function(t,e){var n,r=wS(t),i=M_.U;return r.ls({index:xT.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==M_.U&&e(new z_(bT(n)),i),i=s,n=o):i=M_.U}).next(function(){i!==M_.U&&e(new z_(bT(n)),i)})},t.prototype.vr=function(t){return this.db.kr().Lr(t)},t}();function OS(t,e){return wS(t).put(function(t,e){return new xT(0,gT(t.path),e)}(e,t.Ss))}var kS=function(){function t(t,e){this.Kt=t,this.Ii=e}return t.prototype.hi=function(t,e,n){return NS(t).put(RS(e),n)},t.prototype.fi=function(t,e){var n=NS(t),r=RS(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.$r(t,r)})},t.prototype.di=function(t,e){var n=this;return NS(t).get(RS(e)).next(function(t){return n.Br(t)})},t.prototype.qr=function(t,e){var n=this;return NS(t).get(RS(e)).next(function(t){var e=n.Br(t);return e?{_i:e,size:hS(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=tC();return this.Ur(t,e,function(t,e){var i=n.Br(e);r=r.Ht(t,i)}).next(function(){return r})},t.prototype.Qr=function(t,e){var n=this,r=tC(),i=new GE(z_.J);return this.Ur(t,e,function(t,e){var o=n.Br(e);o?(r=r.Ht(t,o),i=i.Ht(t,hS(e))):(r=r.Ht(t,null),i=i.Ht(t,0))}).next(function(){return{Kr:r,Wr:i}})},t.prototype.Ur=function(t,e,n){if(e.nt())return eT.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return NS(t).ls({range:r},function(t,e,r){for(var s=z_.Tt(t);o&&z_.J(o,s)<0;)n(o,null),o=i.ce();o&&o.isEqual(s)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()}).next(function(){for(;o;)n(o,null),o=i.ae()?i.ce():null})},t.prototype.jr=function(t,e,n){var r=this,i=nC(),o=e.path.length+1,s={};if(n.isEqual(V_.min())){var a=e.path.rt();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.rt(),c=zT(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=OT.collectionReadTimeIndex}return NS(t).ls(s,function(t,n,s){if(t.length===o){var a=BT(r.Kt,n);e.path.st(a.key.path)?a instanceof Ew&&oE(e,a)&&(i=i.Ht(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.Or=function(t){return new AS(this,!!t&&t.Gr)},t.prototype.Lr=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return xS(t).get(kT.key).next(function(t){return p_(!!t),t})},t.prototype.$r=function(t,e){return xS(t).put(kT.key,e)},t.prototype.Br=function(t){if(t){var e=BT(this.Kt,t);return e instanceof Cw&&e.version.isEqual(V_.min())?null:e}return null},t}(),AS=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zr=e,r.Gr=n,r.Hr=new uS(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(s_.c)(e,t),e.prototype.Ti=function(t){var e=this,n=[],r=0,i=new JE(function(t,e){return y_(t.ot(),e.ot())});return this.ci.forEach(function(o,s){var a=e.Hr.get(o);if(s._i){var u=HT(e.zr.Kt,s._i,e.ui(o));i=i.add(o.path.Z());var c=hS(u);r+=c-a,n.push(e.zr.hi(t,o,u))}else if(r-=a,e.Gr){var l=HT(e.zr.Kt,new Cw(o,V_.min()),e.ui(o));n.push(e.zr.hi(t,o,l))}else n.push(e.zr.fi(t,o))}),i.forEach(function(r){n.push(e.zr.Ii.Qs(t,r))}),n.push(this.zr.updateMetadata(t,r)),eT.$n(n)},e.prototype.wi=function(t,e){var n=this;return this.zr.qr(t,e).next(function(t){return null===t?(n.Hr.set(e,0),null):(n.Hr.set(e,t.size),t._i)})},e.prototype.Ei=function(t,e){var n=this;return this.zr.Qr(t,e).next(function(t){var e=t.Kr;return t.Wr.forEach(function(t,e){n.Hr.set(t,e)}),e})},e}(cS);function xS(t){return FT(t,kT.store)}function NS(t){return FT(t,OT.store)}function RS(t){return t.path.rt()}var PS=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;p_(n<r&&n>=0&&r<=11);var o=new nT("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(wT.store)}(t),function(t){t.createObjectStore(ET.store,{keyPath:ET.keyPath}),t.createObjectStore(CT.store,{keyPath:CT.keyPath,autoIncrement:!0}).createIndex(CT.userMutationsIndex,CT.userMutationsKeyPath,{unique:!0}),t.createObjectStore(TT.store)}(t),DS(t),function(t){t.createObjectStore(OT.store)}(t));var s=eT.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(xT.store),t.deleteObjectStore(AT.store),t.deleteObjectStore(NT.store)}(t),DS(t)),s=s.next(function(){return function(t){var e=t.store(NT.store),n=new NT(0,0,V_.min().G(),0);return e.put(NT.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(CT.store).os().next(function(n){t.deleteObjectStore(CT.store),t.createObjectStore(CT.store,{keyPath:CT.keyPath,autoIncrement:!0}).createIndex(CT.userMutationsIndex,CT.userMutationsKeyPath,{unique:!0});var r=e.store(CT.store),i=n.map(function(t){return r.put(t)});return eT.$n(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(PT.store,{keyPath:PT.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Jr(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(kT.store)}(t),i.Yr(o)})),n<7&&r>=7&&(s=s.next(function(){return i.Xr(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Zr(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(OT.store);e.createIndex(OT.readTimeIndex,OT.readTimeIndexPath,{unique:!1}),e.createIndex(OT.collectionReadTimeIndex,OT.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.eo(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(DT.store,{keyPath:DT.keyPath})}(t),function(t){t.createObjectStore(jT.store,{keyPath:jT.keyPath})}(t)})),s},t.prototype.Yr=function(t){var e=0;return t.store(OT.store).ls(function(t,n){e+=hS(n)}).next(function(){var n=new kT(e);return t.store(kT.store).put(kT.key,n)})},t.prototype.Jr=function(t){var e=this,n=t.store(ET.store),r=t.store(CT.store);return n.os().next(function(n){return eT.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(CT.userMutationsIndex,i).next(function(r){return eT.forEach(r,function(r){p_(r.userId===n.userId);var i=$T(e.Kt,r);return lS(t,n.userId,i).next(function(){})})})})})},t.prototype.Xr=function(t){var e=t.store(xT.store),n=t.store(OT.store);return t.store(NT.store).get(NT.key).next(function(t){var r=[];return n.ls(function(n,i){var o=new q_(n),s=function(t){return[0,gT(t)]}(o);r.push(e.get(s).next(function(n){return n?eT.resolve():function(n){return e.put(new xT(0,gT(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return eT.$n(r)})})},t.prototype.Zr=function(t,e){t.createObjectStore(RT.store,{keyPath:RT.keyPath});var n=e.store(RT.store),r=new nS,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:gT(i)})}};return e.store(OT.store).ls({hs:!0},function(t,e){var n=new q_(t);return i(n.Z())}).next(function(){return e.store(TT.store).ls({hs:!0},function(t,e){var n=bT(t[1]);return i(n.Z())})})},t.prototype.eo=function(t){var e=this,n=t.store(AT.store);return n.ls(function(t,r){var i=QT(r),o=JT(e.Kt,i);return n.put(o)})},t}();function DS(t){t.createObjectStore(xT.store,{keyPath:xT.keyPath}).createIndex(xT.documentTargetsIndex,xT.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(AT.store,{keyPath:AT.keyPath}).createIndex(AT.queryTargetsIndexName,AT.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(NT.store)}var jS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",LS=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.no=o,this.window=s,this.document=a,this.so=c,this.io=l,this.ro=null,this.oo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.co=null,this.inForeground=!1,this.ao=null,this.uo=null,this.ho=Number.NEGATIVE_INFINITY,this.lo=function(t){return Promise.resolve()},!t.Wn())throw new C_(E_.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.mi=new IS(this,i),this._o=n+"main",this.Kt=new qT(u),this.fo=new rT(this._o,11,new PS(this.Kt)),this.wo=new yS(this.mi,this.Kt),this.Ii=new rS,this.Eo=function(t,e){return new kS(t,e)}(this.Kt,this.Ii),this.To=new XT,this.window&&this.window.localStorage?this.Io=this.window.localStorage:(this.Io=null,!1===l&&l_("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.mo().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new C_(E_.FAILED_PRECONDITION,jS);return t.Ao(),t.Ro(),t.Po(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.wo.ji(e)})}).then(function(e){t.ro=new M_(e,t.so)}).then(function(){t.oo=!0}).catch(function(e){return t.fo&&t.fo.close(),Promise.reject(e)})},t.prototype.yo=function(t){var e=this;return this.lo=function(n){return Object(s_.b)(e,void 0,void 0,function(){return Object(s_.d)(this,function(e){return this.Ir?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.Vo=function(t){var e=this;this.fo.Zn(function(n){return Object(s_.b)(e,void 0,void 0,function(){return Object(s_.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.po=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.no.ys(function(){return Object(s_.b)(e,void 0,void 0,function(){return Object(s_.d)(this,function(t){switch(t.label){case 0:return this.Ir?[4,this.mo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.mo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return FS(e).put(new PT(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.bo(e).next(function(e){e||(t.isPrimary=!1,t.no.vo(function(){return t.lo(!1)}))})}).next(function(){return t.So(e)}).next(function(n){return t.isPrimary&&!n?t.Do(e).next(function(){return!1}):!!n&&t.Co(e).next(function(){return!0})})}).catch(function(e){if(sT(e))return c_("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return c_("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.no.vo(function(){return t.lo(e)}),t.isPrimary=e})},t.prototype.bo=function(t){var e=this;return MS(t).get(wT.key).next(function(t){return eT.resolve(e.xo(t))})},t.prototype.No=function(t){return FS(t).delete(this.clientId)},t.prototype.Fo=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(s_.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.Oo(this.ho,18e5)?[3,2]:(this.ho=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=FT(t,PT.store);return e.os().next(function(t){var n=r.ko(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return eT.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Io)for(e=0,n=t;e<n.length;e++)this.Io.removeItem(this.Mo(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.Po=function(){var t=this;this.uo=this.no.mr("client_metadata_refresh",4e3,function(){return t.mo().then(function(){return t.Fo()}).then(function(){return t.Po()})})},t.prototype.xo=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.So=function(t){var e=this;return this.io?eT.resolve(!0):MS(t).get(wT.key).next(function(n){if(null!==n&&e.Oo(n.leaseTimestampMs,5e3)&&!e.Lo(n.ownerId)){if(e.xo(n)&&e.networkEnabled)return!0;if(!e.xo(n)){if(!n.allowTabSynchronization)throw new C_(E_.FAILED_PRECONDITION,jS);return!1}}return!(!e.networkEnabled||!e.inForeground)||FS(t).os().next(function(t){return void 0===e.ko(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&c_("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.$o=function(){return Object(s_.b)(this,void 0,void 0,function(){var t=this;return Object(s_.d)(this,function(e){switch(e.label){case 0:return this.oo=!1,this.Bo(),this.uo&&(this.uo.cancel(),this.uo=null),this.qo(),this.Uo(),[4,this.fo.runTransaction("shutdown","readwrite",[wT.store,PT.store],function(e){var n=new MT(e,M_.U);return t.Do(n).next(function(){return t.No(n)})})];case 1:return e.sent(),this.fo.close(),this.Qo(),[2]}})})},t.prototype.ko=function(t,e){var n=this;return t.filter(function(t){return n.Oo(t.updateTimeMs,e)&&!n.Lo(t.clientId)})},t.prototype.Ko=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return FS(e).os().next(function(e){return t.ko(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Wo=function(t){return fS.Ri(t,this.Kt,this.Ii,this.mi)},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.jo=function(){return this.Ii},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r,i=this;return c_("IndexedDbPersistence","Starting transaction:",t),this.fo.runTransaction(t,"readonly"===e?"readonly":"readwrite",LT,function(o){return r=new MT(o,i.ro?i.ro.next():M_.U),"readwrite-primary"===e?i.bo(r).next(function(t){return!!t||i.So(r)}).next(function(e){if(!e)throw l_("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.no.vo(function(){return i.lo(!1)}),new C_(E_.FAILED_PRECONDITION,pT);return n(r)}).next(function(t){return i.Co(r).next(function(){return t})}):i.zo(r).next(function(){return n(r)})}).then(function(t){return r.bs(),t})},t.prototype.zo=function(t){var e=this;return MS(t).get(wT.key).next(function(t){if(null!==t&&e.Oo(t.leaseTimestampMs,5e3)&&!e.Lo(t.ownerId)&&!e.xo(t)&&!(e.io||e.allowTabSynchronization&&t.allowTabSynchronization))throw new C_(E_.FAILED_PRECONDITION,jS)})},t.prototype.Co=function(t){var e=new wT(this.clientId,this.allowTabSynchronization,Date.now());return MS(t).put(wT.key,e)},t.Wn=function(){return rT.Wn()},t.prototype.Do=function(t){var e=this,n=MS(t);return n.get(wT.key).next(function(t){return e.xo(t)?(c_("IndexedDbPersistence","Releasing primary lease."),n.delete(wT.key)):eT.resolve()})},t.prototype.Oo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(l_("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ao=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ao=function(){t.no.ys(function(){return t.inForeground="visible"===t.document.visibilityState,t.mo()})},this.document.addEventListener("visibilitychange",this.ao),this.inForeground="visible"===this.document.visibilityState)},t.prototype.qo=function(){this.ao&&(this.document.removeEventListener("visibilitychange",this.ao),this.ao=null)},t.prototype.Ro=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.co=function(){e.Bo(),e.no.ys(function(){return e.$o()})},this.window.addEventListener("unload",this.co))},t.prototype.Uo=function(){this.co&&(this.window.removeEventListener("unload",this.co),this.co=null)},t.prototype.Lo=function(t){var e;try{var n=null!==(null===(e=this.Io)||void 0===e?void 0:e.getItem(this.Mo(t)));return c_("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return l_("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Bo=function(){if(this.Io)try{this.Io.setItem(this.Mo(this.clientId),String(Date.now()))}catch(t){l_("Failed to set zombie client id.",t)}},t.prototype.Qo=function(){if(this.Io)try{this.Io.removeItem(this.Mo(this.clientId))}catch(t){}},t.prototype.Mo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function MS(t){return FT(t,wT.store)}function FS(t){return FT(t,PT.store)}function VS(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var US=function(){function t(t,e,n){this.Eo=t,this.Ho=e,this.Ii=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.Si(t,e).next(function(r){return n.Yo(t,e,r)})},t.prototype.Yo=function(t,e,n){return this.Eo.di(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Ns(e,t);return t})},t.prototype.Xo=function(t,e,n){var r=tC();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Ns(t,e);r=r.Ht(t,e)}),r},t.prototype.Zo=function(t,e){var n=this;return this.Eo.getEntries(t,e).next(function(e){return n.tc(t,e)})},t.prototype.tc=function(t,e){var n=this;return this.Ho.Di(t,e).next(function(r){var i=n.Xo(t,e,r),o=ZE();return i.forEach(function(t,e){e||(e=new Cw(t,V_.min())),o=o.Ht(t,e)}),o})},t.prototype.jr=function(t,e,n){return function(t){return z_.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):Xw(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new z_(e)).next(function(t){var e=nC();return t instanceof Ew&&(e=e.Ht(t.key,t)),e})},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=nC();return this.Ii.Ks(t,i).next(function(s){return eT.forEach(s,function(s){var a=function(t,e){return new Kw(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.sc(t,a,n).next(function(t){t.forEach(function(t,e){o=o.Ht(t,e)})})}).next(function(){return o})})},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.Eo.jr(t,e,n).next(function(n){return r=n,o.Ho.xi(t,e)}).next(function(e){return o.ic(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=xE(u,l,l,o.Ds);r=h instanceof Ew?r.Ht(c,h):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){oE(e,n)||(r=r.remove(t))}),r})},t.prototype.ic=function(t,e,n){for(var r=sC(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof jE&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Eo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Ew&&(c=c.Ht(t,e))}),c})},t}(),qS=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=sC(),i=sC(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),BS=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.jr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(V_.min())?this.hc(t,e):this.uc.Zo(t,r).next(function(o){var s=i.lc(e,o);return($w(e)||Qw(e))&&i._c(e.limitType,s,r,n)?i.hc(t,e):(u_()<=rg.a.DEBUG&&c_("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),iE(e)),i.uc.jr(t,e,n).next(function(t){return s.forEach(function(e){t=t.Ht(e.key,e)}),t}))})},t.prototype.lc=function(t,e){var n=new JE(sE(t));return e.forEach(function(e,r){r instanceof Ew&&oE(t,r)&&(n=n.add(r))}),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return u_()<=rg.a.DEBUG&&c_("QueryEngine","Using full collection scan to execute query:",iE(e)),this.uc.jr(t,e,V_.min())},t}(),HS=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new GE(y_),this.wc=new uS(function(t){return Ow(t)},kw),this.Ec=V_.min(),this.Ho=t.Wo(n),this.Tc=t.kr(),this.wo=t.Cr(),this.Ic=new US(this.Tc,this.Ho,this.persistence.jo()),this.To=t.Go(),this.fc.ac(this.Ic)}return t.prototype.Ar=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.br(n,e.dc)})},t}();function zS(t,e,n,r){return new HS(t,e,n,r)}function KS(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(s_.d)(this,function(s){switch(s.label){case 0:return n=m_(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Ho.vi(t).next(function(s){return o=s,r=n.persistence.Wo(e),i=new US(n.Tc,r,n.persistence.jo()),r.vi(t)}).next(function(e){for(var n=[],r=[],s=sC(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var m=0,g=p.mutations;m<g.length;m++)s=s.add(g[m].key)}return i.Zo(t,s).next(function(t){return{mc:t,Ac:n,Rc:r}})})})];case 1:return o=s.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),o)]}})})}function WS(t,e){var n=m_(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Tc.Or({Gr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=eT.resolve();return o.forEach(function(t){s=s.next(function(){return r.di(e,t)}).next(function(e){var o=e,s=n.ks.get(t);p_(null!==s),(!o||o.version.u(s)<0)&&(o=i.Cs(t,o,n))&&r.hi(o,n.Os)})}),s.next(function(){return t.Ho.Ni(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Ho.ki(t)}).next(function(){return n.Ic.Zo(t,r)})})}function GS(t){var e=m_(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.wo.Wi(t)})}function $S(t,e){var n=m_(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Tc.Or({Gr:!0});i=n.dc;var s=[];e.Oe.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.wo.rr(t,e.Ke,o).next(function(){return n.wo.sr(t,e.Ue,o)}));var u=e.resumeToken;if(u.o()>0){var c=a.$t(u,r).Lt(t.Ss);i=i.Ht(o,c),function(t,e,n){return p_(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.j()-t.Mt.j()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(a,c,e)&&s.push(n.wo.Yi(t,c))}}});var a=ZE();if(e.Me.forEach(function(r,i){e.Le.has(r)&&s.push(n.persistence.mi.Mr(t,r))}),s.push(QS(t,o,e.Me,r,void 0).next(function(t){a=t})),!r.isEqual(V_.min())){var u=n.wo.Wi(t).next(function(e){return n.wo.Gi(t,t.Ss,r)});s.push(u)}return eT.$n(s).next(function(){return o.apply(t)}).next(function(){return n.Ic.tc(t,a)})}).then(function(t){return n.dc=i,t})}function QS(t,e,n,r,i){var o=sC();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ZE();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Cw&&s.version.isEqual(V_.min())?(e.fi(n,u),o=o.Ht(n,s)):null==a||s.version.u(a.version)>0||0===s.version.u(a.version)&&a.hasPendingWrites?(e.hi(s,u),o=o.Ht(n,s)):c_("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function JS(t,e){var n=m_(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Ho.pi(t,e)})}function YS(t,e){var n=m_(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.wo.nr(t,e).next(function(i){return i?eT.resolve(r=i):n.wo.Ui(t).next(function(i){return r=new uE(e,i,0,t.Ss),n.wo.zi(t,r).next(function(){return r})})})}).then(function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t})}function XS(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:r=m_(t),i=r.dc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.mi.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!sT(s=a.sent()))throw s;return c_("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}})})}function ZS(t,e,n){var r=m_(t),i=V_.min(),o=sC();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=m_(t),i=r.wc.get(n);return void 0!==i?eT.resolve(r.dc.get(i)):r.wo.nr(e,n)}(r,t,tE(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.wo.ar(t,e.targetId).next(function(t){o=t})}).next(function(){return r.fc.jr(t,e,n?i:V_.min(),n?o:sC())}).next(function(t){return{documents:t,Pc:o}})})}function tI(t,e){var n=m_(t),r=m_(n.wo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Dn(t,e).next(function(t){return t?t.target:null})})}function eI(t){var e=m_(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=m_(t),i=ZE(),o=zT(n),s=NS(e),a=IDBKeyRange.lowerBound(o,!0);return s.ls({index:OT.readTimeIndex,range:a},function(t,e){var n=BT(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime}).next(function(){return{gs:i,readTime:KT(o)}})}(e.Tc,t,e.Ec)}).then(function(t){var n=t.gs;return e.Ec=t.readTime,n})}function nI(t){return Object(s_.b)(this,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){return[2,(e=m_(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=NS(t),n=V_.min();return e.ls({index:OT.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=KT(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Ec=t})]})})}function rI(t,e,n,r){return Object(s_.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(s_.d)(this,function(p){switch(p.label){case 0:for(i=m_(t),o=sC(),s=ZE(),a=iC(),u=0,c=n;u<c.length;u++)h=e.yc((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.Ht(h,e.gc(l)),a=a.Ht(h,e.Vc(l.metadata.readTime));return f=i.Tc.Or({Gr:!0}),[4,YS(i,function(t){return tE(Gw(q_.ct("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return QS(t,f,s,V_.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.wo.Zi(t,d.targetId).next(function(){return i.wo.sr(t,o,d.targetId)}).next(function(){return i.Ic.tc(t,e)})})})]}})})}function iI(t,e,n){return void 0===n&&(n=sC()),Object(s_.b)(this,void 0,void 0,function(){var r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return[4,YS(t,tE(YT(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=m_(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=OC(e.readTime);if(r.Mt.u(o)>=0)return i.To.qs(t,e);var s=r.$t(w_.h,o);return i.dc=i.dc.Ht(s.targetId,s),i.wo.Yi(t,s).next(function(){return i.wo.Zi(t,r.targetId)}).next(function(){return i.wo.sr(t,n,r.targetId)}).next(function(){return i.To.qs(t,e)})})]}})})}var oI=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ls=function(t,e){return eT.resolve(this.bc.get(e))},t.prototype.$s=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:OC(n.createTime)}),eT.resolve()},t.prototype.Bs=function(t,e){return eT.resolve(this.vc.get(e))},t.prototype.qs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:YT(t.bundledQuery),readTime:OC(t.readTime)}}(e)),eT.resolve()},t}(),sI=function(){function t(){this.Sc=new JE(aI.Dc),this.Cc=new JE(aI.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.ir=function(t,e){var n=new aI(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach(function(t){return n.ir(t,e)})},t.prototype.cr=function(t,e){this.Fc(new aI(t,e))},t.prototype.Oc=function(t,e){var n=this;t.forEach(function(t){return n.cr(t,e)})},t.prototype.kc=function(t){var e=this,n=new z_(new q_([])),r=new aI(n,t),i=new aI(n,t+1),o=[];return this.Cc.Ae([r,i],function(t){e.Fc(t),o.push(t.key)}),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach(function(e){return t.Fc(e)})},t.prototype.Fc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new z_(new q_([])),n=new aI(e,t),r=new aI(e,t+1),i=sC();return this.Cc.Ae([n,r],function(t){i=i.add(t.key)}),i},t.prototype.Mi=function(t){var e=new aI(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),aI=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return z_.J(t.key,e.key)||y_(t.$c,e.$c)},t.xc=function(t,e){return y_(t.$c,e.$c)||z_.J(t.key,e.key)},t}(),uI=function(){function t(t,e){this.Ii=t,this.mi=e,this.Ho=[],this.Bc=1,this.qc=new JE(aI.Dc)}return t.prototype.Pi=function(t){return eT.resolve(0===this.Ho.length)},t.prototype.yi=function(t,e,n,r){var i=this.Bc;this.Bc++;var o=new VT(i,e,n,r);this.Ho.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.qc=this.qc.add(new aI(u.key,i)),this.Ii.Qs(t,u.key.path.Z())}return eT.resolve(o)},t.prototype.gi=function(t,e){return eT.resolve(this.Uc(e))},t.prototype.pi=function(t,e){var n=this.Qc(e+1),r=n<0?0:n;return eT.resolve(this.Ho.length>r?this.Ho[r]:null)},t.prototype.bi=function(){return eT.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.vi=function(t){return eT.resolve(this.Ho.slice())},t.prototype.Si=function(t,e){var n=this,r=new aI(e,0),i=new aI(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],function(t){var e=n.Uc(t.$c);o.push(e)}),eT.resolve(o)},t.prototype.Di=function(t,e){var n=this,r=new JE(y_);return e.forEach(function(t){var e=new aI(t,0),i=new aI(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],function(t){r=r.add(t.$c)})}),eT.resolve(this.Kc(r))},t.prototype.xi=function(t,e){var n=e.path,r=n.length+1,i=n;z_.Et(i)||(i=i.child(""));var o=new aI(new z_(i),0),s=new JE(y_);return this.qc.Re(function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(s=s.add(t.$c)),!0)},o),eT.resolve(this.Kc(s))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.Uc(t);null!==r&&n.push(r)}),n},t.prototype.Ni=function(t,e){var n=this;p_(0===this.Wc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return eT.forEach(e.mutations,function(i){var o=new aI(i.key,e.batchId);return r=r.delete(o),n.mi.Oi(t,i.key)}).next(function(){n.qc=r})},t.prototype.Fi=function(t){},t.prototype.Mi=function(t,e){var n=new aI(e,0),r=this.qc.Pe(n);return eT.resolve(e.isEqual(r&&r.key))},t.prototype.ki=function(t){return eT.resolve()},t.prototype.Wc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),cI=function(){function t(t,e){this.Ii=t,this.jc=e,this.docs=new GE(z_.J),this.size=0}return t.prototype.hi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jc(e);return this.docs=this.docs.Ht(r,{_i:e,size:s,readTime:n}),this.size+=s-o,this.Ii.Qs(t,r.path.Z())},t.prototype.fi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.di=function(t,e){var n=this.docs.get(e);return eT.resolve(n?n._i:null)},t.prototype.getEntries=function(t,e){var n=this,r=tC();return e.forEach(function(t){var e=n.docs.get(t);r=r.Ht(t,e?e._i:null)}),eT.resolve(r)},t.prototype.jr=function(t,e,n){for(var r=nC(),i=new z_(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),a=s.value,u=a._i,c=a.readTime;if(!e.path.st(s.key.path))break;c.u(n)<=0||u instanceof Ew&&oE(e,u)&&(r=r.Ht(u.key,u))}return eT.resolve(r)},t.prototype.Gc=function(t,e){return eT.forEach(this.docs,function(t){return e(t)})},t.prototype.Or=function(t){return new lI(this)},t.prototype.Lr=function(t){return eT.resolve(this.size)},t}(),lI=function(t){function e(e){var n=this;return(n=t.call(this)||this).zr=e,n}return Object(s_.c)(e,t),e.prototype.Ti=function(t){var e=this,n=[];return this.ci.forEach(function(r,i){i&&i._i?n.push(e.zr.hi(t,i._i,e.ui(r))):e.zr.fi(r)}),eT.$n(n)},e.prototype.wi=function(t,e){return this.zr.di(t,e)},e.prototype.Ei=function(t,e){return this.zr.getEntries(t,e)},e}(cS),hI=function(){function t(t){this.persistence=t,this.zc=new uS(function(t){return Ow(t)},kw),this.lastRemoteSnapshotVersion=V_.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new sI,this.targetCount=0,this.Yc=vS.Bi()}return t.prototype.mn=function(t,e){return this.zc.forEach(function(t,n){return e(n)}),eT.resolve()},t.prototype.Wi=function(t){return eT.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ji=function(t){return eT.resolve(this.Hc)},t.prototype.Ui=function(t){return this.highestTargetId=this.Yc.next(),eT.resolve(this.highestTargetId)},t.prototype.Gi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),eT.resolve()},t.prototype.Hi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new vS(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.zi=function(t,e){return this.Hi(e),this.targetCount+=1,eT.resolve()},t.prototype.Yi=function(t,e){return this.Hi(e),eT.resolve()},t.prototype.Xi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,eT.resolve()},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.zc.delete(s),o.push(r.Zi(t,a.targetId)),i++)}),eT.$n(o).next(function(){return i})},t.prototype.er=function(t){return eT.resolve(this.targetCount)},t.prototype.nr=function(t,e){var n=this.zc.get(e)||null;return eT.resolve(n)},t.prototype.sr=function(t,e,n){return this.Jc.Nc(e,n),eT.resolve()},t.prototype.rr=function(t,e,n){this.Jc.Oc(e,n);var r=this.persistence.mi,i=[];return r&&e.forEach(function(e){i.push(r.Oi(t,e))}),eT.$n(i)},t.prototype.Zi=function(t,e){return this.Jc.kc(e),eT.resolve()},t.prototype.ar=function(t,e){var n=this.Jc.Lc(e);return eT.resolve(n)},t.prototype.Mi=function(t,e){return eT.resolve(this.Jc.Mi(e))},t}(),fI=function(){function t(t,e){var n=this;this.Xc={},this.ro=new M_(0),this.oo=!1,this.oo=!0,this.mi=t(this),this.wo=new hI(this),this.Ii=new eS,this.Eo=function(t,e){return new cI(t,function(t){return n.mi.Zc(t)})}(this.Ii),this.Kt=new qT(e),this.To=new oI(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.$o=function(){return this.oo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Vo=function(){},t.prototype.po=function(){},t.prototype.jo=function(){return this.Ii},t.prototype.Wo=function(t){var e=this.Xc[t.R()];return e||(e=new uI(this.Ii,this.mi),this.Xc[t.R()]=e),e},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r=this;c_("MemoryPersistence","Starting transaction:",t);var i=new dI(this.ro.next());return this.mi.ta(),n(i).next(function(t){return r.mi.ea(i).next(function(){return t})}).Mn().then(function(t){return i.bs(),t})},t.prototype.na=function(t,e){return eT.Bn(Object.values(this.Xc).map(function(n){return function(){return n.Mi(t,e)}}))},t}(),dI=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ss=e,n}return Object(s_.c)(e,t),e}(mT),pI=function(){function t(t){this.persistence=t,this.sa=new sI,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw d_()},enumerable:!1,configurable:!0}),t.prototype.ir=function(t,e,n){return this.sa.ir(n,e),this.oa.delete(n.toString()),eT.resolve()},t.prototype.cr=function(t,e,n){return this.sa.cr(n,e),this.oa.add(n.toString()),eT.resolve()},t.prototype.Oi=function(t,e){return this.oa.add(e.toString()),eT.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach(function(t){return n.oa.add(t.toString())});var r=this.persistence.Cr();return r.ar(t,e.targetId).next(function(t){t.forEach(function(t){return n.oa.add(t.toString())})}).next(function(){return r.Xi(t,e)})},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.kr().Or();return eT.forEach(this.oa,function(r){var i=z_.ft(r);return e.ca(t,i).next(function(t){t||n.fi(i)})}).next(function(){return e.ia=null,n.apply(t)})},t.prototype.Mr=function(t,e){var n=this;return this.ca(t,e).next(function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())})},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return eT.Bn([function(){return eT.resolve(n.sa.Mi(e))},function(){return n.persistence.Cr().Mi(t,e)},function(){return n.persistence.na(t,e)}])},t}();function mI(t,e){return"firestore_clients_"+t+"_"+e}function gI(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function vI(t,e){return"firestore_targets_"+t+"_"+e}var yI=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new C_(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(l_("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),bI=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new C_(r.error.code,r.error.message)),i?new t(e,r.state,o):(l_("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),_I=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=uC(),s=0;i&&s<r.activeTargetIds.length;++s)i=iw(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(l_("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),wI=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(l_("SharedClientState","Failed to parse online state: "+e),null)},t}(),EI=function(){function t(){this.activeTargetIds=uC()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),CI=function(){function t(t,e,n,r,i){this.window=t,this.no=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new GE(y_),this.Ir=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=mI(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new EI),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.Wn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(s_.d)(this,function(h){switch(h.label){case 0:return[4,this.fa.Ko()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(mI(this.persistenceKey,r)))&&(o=_I.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(s=this.storage.getItem(this.ga))&&(a=this.ba(s))&&this.va(a),u=0,c=this.Ia;u<c.length;u++)this.Ea(c[u]);return this.Ia=[],this.window.addEventListener("unload",function(){return l.$o()}),this.Ir=!0,[2]}})})},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Fa=function(t,e,n){this.Na(t,e,n),this.Oa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(vI(this.persistenceKey,t));if(n){var r=bI.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(vI(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach(function(t){r.Oa(t)}),this.currentUser=t,n.forEach(function(t){r.xa(t)})},t.prototype.Ka=function(t){this.Wa(t)},t.prototype.ja=function(){this.Ga()},t.prototype.$o=function(){this.Ir&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Ir=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return c_("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){c_("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){c_("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(c_("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void l_("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.no.vo(function(){return Object(s_.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(s_.d)(this,function(a){if(this.Ir){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(o=this.ba(n.newValue)))return[2,this.va(o)]}else if(n.key===this.Aa)(s=function(t){var e=M_.U;if(null!=t)try{var n=JSON.parse(t);p_("number"==typeof n),e=n}catch(t){l_("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==M_.U&&this.L(s);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new yI(this.currentUser,t,e,n),i=gI(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Oa=function(t){var e=gI(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Wa=function(t){this.storage.setItem(this.ga,JSON.stringify({clientId:this._a,onlineState:t}))},t.prototype.Ua=function(t,e,n){var r=vI(this.persistenceKey,t),i=new bI(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return _I.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return yI.aa(new N_(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return bI.aa(r,e)},t.prototype.ba=function(t){return wI.aa(t)},t.prototype.Xa=function(t){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(c_("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.fa.iu(s,a).then(function(){n.Ta=r})},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=uC();return t.forEach(function(t,n){e=e.ye(n.activeTargetIds)}),e},t}(),TI=function(){function t(){this.ru=new EI,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Fa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new EI,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.$o=function(){},t.prototype.q=function(t){},t.prototype.ja=function(){},t}(),SI=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.$o=function(){},t}(),II=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.$o=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){c_("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){c_("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.Wn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),OI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},kI=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),AI=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return Object(s_.c)(e,t),e.prototype.Du=function(t,e,n,r){return new Promise(function(i,o){var s=new o_;s.listenOnce(n_.COMPLETE,function(){try{switch(s.getLastErrorCode()){case e_.NO_ERROR:var e=s.getResponseJson();c_("Connection","XHR received:",JSON.stringify(e)),i(e);break;case e_.TIMEOUT:c_("Connection",'RPC "'+t+'" timed out'),o(new C_(E_.DEADLINE_EXCEEDED,"Request time out"));break;case e_.HTTP_ERROR:var n=s.getStatus();if(c_("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(E_).indexOf(e)>=0?e:E_.UNKNOWN}(r.status);o(new C_(a,r.message))}else o(new C_(E_.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new C_(E_.UNAVAILABLE,"Connection failed."));break;default:d_()}}finally{c_("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.xu=function(t,e){var n=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Jb,i=Zv(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(o.initMessageHeaders,e),Object(ig.x)()||Object(ig.A)()||Object(ig.t)()||Object(ig.v)()||Object(ig.B)()||Object(ig.s)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");c_("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new kI({du:function(t){c?c_("Connection","Not sending because WebChannel is closed:",t):(u||(c_("Connection","Opening WebChannel transport."),a.open(),u=!0),c_("Connection","WebChannel sending:",t),a.send(t))},wu:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,i_.EventType.OPEN,function(){c||c_("Connection","WebChannel transport opened.")}),h(a,i_.EventType.CLOSE,function(){c||(c=!0,c_("Connection","WebChannel transport closed"),l.Pu())}),h(a,i_.EventType.ERROR,function(t){c||(c=!0,h_("Connection","WebChannel transport errored:",t),l.Pu(new C_(E_.UNAVAILABLE,"The operation could not be completed")))}),h(a,i_.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];p_(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){c_("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=UE[t];if(void 0!==e)return WE(e)}(i),s=r.message;void 0===o&&(o=E_.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Pu(new C_(o,s)),a.close()}else c_("Connection","WebChannel received:",n),l.yu(n)}}),h(i,r_.STAT_EVENT,function(t){10===t.stat?c_("Connection","Detected buffering proxy"):11===t.stat&&c_("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Ru()},0),l},e}(function(){function t(t){this.gu=t,this.T=t.T,this.Vu=(t.ssl?"https":"http")+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);c_("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then(function(t){return c_("RestConnection","Received: ",t),t},function(e){throw h_("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.1",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){return this.Vu+"/v1/"+e+":"+OI[t]},t}());function xI(){return"undefined"!=typeof window?window:null}function NI(){return"undefined"!=typeof document?document:null}function RI(t){return new CC(t,!0)}var PI=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.no=t,this.ds=e,this.Nu=n,this.Fu=r,this.Ou=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Ou},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&c_("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.no.mr(this.ds,i,function(){return e.Lu=Date.now(),t()}),this.ku*=this.Fu,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Ou&&(this.ku=this.Ou)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),DI=function(){function t(t,e,n,r,i,o){this.no=t,this.Qu=n,this.Ku=r,this.Wu=i,this.listener=o,this.state=0,this.ju=0,this.Gu=null,this.stream=null,this.zu=new PI(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.no.mr(this.Qu,6e4,function(){return t.th()}))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(t){return this.Ju()?[2,this.close(0)]:[2]})})},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.ju++,3!==t?this.zu.reset():e&&e.code===E_.RESOURCE_EXHAUSTED?(l_(e.toString()),l_("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===E_.UNAUTHENTICATED&&this.Wu.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}})})},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.ju),n=this.ju;this.Wu.getToken().then(function(e){t.ju===n&&t.rh(e)},function(n){e(function(){var e=new C_(E_.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)})})},t.prototype.rh=function(t){var e=this,n=this.ih(this.ju);this.stream=this.ah(t),this.stream.Eu(function(){n(function(){return e.state=2,e.listener.Eu()})}),this.stream.Iu(function(t){n(function(){return e.oh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu(function(){return Object(s_.b)(t,void 0,void 0,function(){return Object(s_.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.oh=function(t){return c_("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.no.ys(function(){return e.ju===t?n():(c_("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),jI=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,s}return Object(s_.c)(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:d_()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(p_(void 0===e||"string"==typeof e),w_.fromBase64String(e||"")):(p_(void 0===e||e instanceof Uint8Array),w_.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?E_.UNKNOWN:WE(t.code);return new C_(e,t.message||"")}(a);n=new gC(r,i,o,s||null)}else if("documentChange"in e){i=NC(t,(r=e.documentChange).document.name),o=OC(r.document.updateTime);var a=new yw({mapValue:{fields:r.document.fields}}),u=(s=new Ew(i,o,a,{}),r.targetIds||[]);n=new pC(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=NC(t,(r=e.documentDelete).document),o=r.readTime?OC(r.readTime):V_.min(),a=new Cw(i,o),n=new pC([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=NC(t,(r=e.documentRemove).document),n=new pC([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return d_();var c=e.filter;i=new zE(r=c.count||0),n=new mC(o=c.targetId,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return V_.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?V_.min():e.readTime?OC(e.readTime):V_.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=DC(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=Aw(r)?{documents:UC(t,r)}:{query:qC(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=SC(t,e.resumeToken):e.Mt.u(V_.min())>0&&(n.readTime=TC(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return d_()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=DC(this.Kt),e.removeTarget=t,this.eh(e)},e}(DI),LI=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,s._h=!1,s}return Object(s_.c)(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(p_(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(p_(void 0!==e),t.map(function(t){return function(t,e){var n=OC(t.updateTime?t.updateTime:e);n.isEqual(V_.min())&&(n=OC(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new SE(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=OC(t.commitTime);return this.listener.wh(n,e)}return p_(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=DC(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return FC(e.Kt,t)})};this.eh(n)},e}(DI),MI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return Object(s_.c)(e,t),e.prototype.mh=function(){if(this.Ih)throw new C_(E_.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then(function(i){return r.Ku.bu(t,e,n,i)}).catch(function(t){throw t.code===E_.UNAUTHENTICATED&&r.credentials.v(),t})},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then(function(i){return r.Ku.Cu(t,e,n,i)}).catch(function(t){throw t.code===E_.UNAUTHENTICATED&&r.credentials.v(),t})},e.prototype.terminate=function(){this.Ih=!1},e}(function(){}),FI=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.mr("online_state_timeout",1e4,function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()}))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(l_(e),this.Ph=!1):c_("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),VI=function(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Fh=new Set,this.Oh=[],this.kh=i,this.kh.cu(function(t){n.ys(function(){return Object(s_.b)(o,void 0,void 0,function(){return Object(s_.d)(this,function(t){switch(t.label){case 0:return $I(this)?(c_("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(s_.b)(this,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return(e=m_(t)).Fh.add(4),[4,qI(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Fh.delete(4),[4,UI(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Mh=new FI(n,r)};function UI(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n;return Object(s_.d)(this,function(r){switch(r.label){case 0:if(!$I(t))return[3,4];e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function qI(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n;return Object(s_.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function BI(t,e){var n=m_(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),GI(n)?WI(n):cO(n).Ju()&&zI(n,e))}function HI(t,e){var n=m_(t),r=cO(n);n.Nh.delete(e),r.Ju()&&KI(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():$I(n)&&n.Mh.set("Unknown"))}function zI(t,e){t.Lh.cn(e.targetId),cO(t).hh(e)}function KI(t,e){t.Lh.cn(e),cO(t).lh(e)}function WI(t){t.Lh=new yC({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),cO(t).start(),t.Mh.yh()}function GI(t){return $I(t)&&!cO(t).Hu()&&t.Nh.size>0}function $I(t){return 0===m_(t).Fh.size}function QI(t){t.Lh=void 0}function JI(t){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(e){return t.Nh.forEach(function(e,n){zI(t,e)}),[2]})})}function YI(t,e){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(n){return QI(t),GI(t)?(t.Mh.ph(e),WI(t)):t.Mh.set("Unknown"),[2]})})}function XI(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i,o;return Object(s_.d)(this,function(s){switch(s.label){case 0:if(t.Mh.set("Online"),!(e instanceof gC&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(s_.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Nh.has(o=i[r])?[4,t.Ch.$h(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Nh.delete(o),t.Lh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),c_("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ZI(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof pC?t.Lh.wn(e):e instanceof mC?t.Lh.yn(e):t.Lh.In(e),n.isEqual(V_.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,GS(t.Sh)];case 8:return i=s.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Oe.forEach(function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}}),n.ke.forEach(function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(w_.h,n.Mt)),KI(t,e);var r=new uE(n.target,e,1,n.sequenceNumber);zI(t,r)}}),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return c_("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,ZI(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function ZI(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r=this;return Object(s_.d)(this,function(i){switch(i.label){case 0:if(!sT(e))throw e;return t.Fh.add(1),[4,qI(t)];case 1:return i.sent(),t.Mh.set("Offline"),n||(n=function(){return GS(t.Sh)}),t.fs.vo(function(){return Object(s_.b)(r,void 0,void 0,function(){return Object(s_.d)(this,function(e){switch(e.label){case 0:return c_("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Fh.delete(1),[4,UI(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function tO(t,e){return e().catch(function(n){return ZI(t,n,e)})}function eO(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(s_.d)(this,function(s){switch(s.label){case 0:e=m_(t),n=lO(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return $I(t)&&t.xh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,JS(e.Sh,r)];case 3:return null===(i=s.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=lO(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,ZI(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return nO(e)&&rO(e),[2]}})})}function nO(t){return $I(t)&&!lO(t).Hu()&&t.xh.length>0}function rO(t){lO(t).start()}function iO(t){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(e){return lO(t).Th(),[2]})})}function oO(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n,r;return Object(s_.d)(this,function(i){for(e=lO(t),n=0,r=t.xh;n<r.length;n++)e.dh(r[n].mutations);return[2]})})}function sO(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return r=t.xh.shift(),i=UT.from(r,e,n),[4,tO(t,function(){return t.Ch.qh(i)})];case 1:return o.sent(),[4,eO(t)];case 2:return o.sent(),[2]}})})}function aO(t,e){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(n){switch(n.label){case 0:return e&&lO(t).fh?[4,function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return KE(r=e.code)&&r!==E_.ABORTED?(n=t.xh.shift(),lO(t).Xu(),[4,tO(t,function(){return t.Ch.Uh(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,eO(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return nO(t)&&rO(t),[2]}})})}function uO(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return n=m_(t),e?(n.Fh.delete(2),[4,UI(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Fh.add(2),[4,qI(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function cO(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=m_(t);return r.mh(),new jI(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:JI.bind(null,t),Iu:YI.bind(null,t),uh:XI.bind(null,t)}),t.Oh.push(function(n){return Object(s_.b)(e,void 0,void 0,function(){return Object(s_.d)(this,function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),GI(t)?WI(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),QI(t),e.label=3;case 3:return[2]}})})})),t.Qh}function lO(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=m_(t);return r.mh(),new LI(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:iO.bind(null,t),Iu:aO.bind(null,t),Eh:oO.bind(null,t),wh:sO.bind(null,t)}),t.Oh.push(function(n){return Object(s_.b)(e,void 0,void 0,function(){return Object(s_.d)(this,function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,eO(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(c_("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}})})})),t.Kh}var hO=function(){this.Wh=void 0,this.listeners=[]},fO=function(){this.queries=new uS(function(t){return rE(t)},nE),this.onlineState="Unknown",this.jh=new Set};function dO(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(s_.d)(this,function(c){switch(c.label){case 0:if(n=m_(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new hO),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Gh(r)];case 2:return s.Wh=c.sent(),[3,4];case 3:return a=c.sent(),u=fT(a,"Initialization of query '"+iE(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zh(n.onlineState),o.Wh&&e.Hh(o.Wh)&&vO(n),[2]}})})}function pO(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(s_.d)(this,function(a){return n=m_(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]})})}function mO(t,e){for(var n=m_(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hh(s)&&(r=!0);a.Wh=s}}r&&vO(n)}function gO(t,e,n){var r=m_(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function vO(t){t.jh.forEach(function(t){t.next()})}var yO=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new hC(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){return!t.fromCache||!(this.options.sl&&"Offline"!==e||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){return t.docChanges.length>0||!!(t.xe||this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=hC.Fe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),bO=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.il=function(){return"metadata"in this.payload},t}(),_O=function(){function t(t){this.Kt=t}return t.prototype.yc=function(t){return NC(this.Kt,t)},t.prototype.gc=function(t){return t.metadata.exists?MC(this.Kt,t.document,!1):new Cw(this.yc(t.metadata.name),this.Vc(t.metadata.readTime))},t.prototype.Vc=function(t){return OC(t)},t}(),wO=function(){function t(t,e,n){this.rl=t,this.Sh=e,this.Kt=n,this.queries=[],this.documents=[],this.progress=EO(t)}return t.prototype.ol=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.cl=function(t){for(var e=new Map,n=new _O(this.Kt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.yc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||sC()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return[4,rI(this.Sh,new _O(this.Kt),this.documents,this.rl.id)];case 1:t=o.sent(),e=this.cl(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,iI(this.Sh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new dT(Object.assign({},this.progress),t))]}})})},t}();function EO(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var CO=function(t){this.key=t},TO=function(t){this.key=t},SO=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=sC(),this.Ce=sC(),this.ll=sE(t),this._l=new cC(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new lC,i=e?e._l:this._l,o=e?e.Ce:this.Ce,s=i,a=!1,u=$w(this.query)&&i.size===this.query.limit?i.last():null,c=Qw(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt(function(t,e){var l=i.get(t),h=e instanceof Ew?e:null;h&&(h=oE(n.query,h)?h:null);var f=!!l&&n.Ce.has(l.key),d=!!h&&(h.bt||n.Ce.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.El(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.ll(h,u)>0||c&&n.ll(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),$w(this.query)||Qw(this.query))for(;s.size>this.query.limit;){var l=$w(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{_l:s,wl:r,_c:a,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ti=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return d_()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)}),this.Tl(n);var s=e?this.Il():[],a=0===this.hl.size&&this.qe?1:0,u=a!==this.ul;return this.ul=a,0!==o.length||u?{snapshot:new hC(this.query,t._l,i,o,t.Ce,0===a,u,!1),ml:s}:{ml:s}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ti({_l:this._l,wl:new lC,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach(function(t){return e.al=e.al.add(t)}),t.Qe.forEach(function(t){}),t.Ke.forEach(function(t){return e.al=e.al.delete(t)}),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=sC(),this._l.forEach(function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))});var n=[];return e.forEach(function(e){t.hl.has(e)||n.push(new TO(e))}),this.hl.forEach(function(t){e.has(t)||n.push(new CO(t))}),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=sC();var e=this.dl(t.documents);return this.Ti(e,!0)},t.prototype.Pl=function(){return hC.Fe(this.query,this._l,this.Ce,0===this.ul)},t}(),IO=function(t,e,n){this.query=t,this.targetId=e,this.view=n},OO=function(t){this.key=t,this.yl=!1},kO=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new uS(function(t){return rE(t)},nE),this.Dl=new Map,this.Cl=[],this.xl=new GE(z_.J),this.Nl=new Map,this.Fl=new sI,this.Ol={},this.kl=new Map,this.Ml=vS.qi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();function AO(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:return n=ik(t),(i=n.Sl.get(e))?(n.pl.ka(i.targetId),r=i.view.Pl(),[3,4]):[3,1];case 1:return[4,YS(n.Sh,tE(e))];case 2:return o=a.sent(),s=n.pl.ka(o.targetId),[4,xO(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.$l&&BI(n.gl,o),a.label=4;case 4:return[2,r]}})})}function xO(t,e,n,r){return Object(s_.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(s_.d)(this,function(l){switch(l.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return Object(s_.b)(this,void 0,void 0,function(){var i,o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:return(i=e.view.dl(n))._c?[4,ZS(t.Sh,e.query,!1).then(function(t){return e.view.dl(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.Oe.get(e.targetId),s=e.view.Ti(i,t.$l,o),[2,(HO(t,e.targetId,s.ml),s.snapshot)]}})})}(t,e,n,r)},[4,ZS(t.Sh,e,!0)];case 1:return i=l.sent(),o=new SO(e,i.Pc),s=o.dl(i.documents),a=dC.Be(n,r&&"Offline"!==t.onlineState),u=o.Ti(s,t.$l,a),HO(t,n,u.ml),c=new IO(e,n,o),[2,(t.Sl.set(e,c),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),u.snapshot)]}})})}function NO(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return n=m_(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter(function(t){return!nE(t,e)})),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,XS(n.Sh,r.targetId,!1).then(function(){n.pl.Ba(r.targetId),HI(n.gl,r.targetId),qO(n,r.targetId)}).catch(aS)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return qO(n,r.targetId),[4,XS(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function RO(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:r=ok(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=m_(t),i=F_.now(),o=e.reduce(function(t,e){return t.add(e.key)},sC());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Ic.Zo(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=NE(c,n.get(c.key));null!=l&&s.push(new jE(c.key,l,_w(l.proto.mapValue),IE.exists(!0)))}return r.Ho.yi(t,i,s,e)})}).then(function(t){var e=t.Fs(n);return{batchId:t.batchId,ci:e}})}(r.Sh,e)];case 2:return i=a.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Ol[t.currentUser.R()];r||(r=new GE(y_)),r=r.Ht(e,n),t.Ol[t.currentUser.R()]=r}(r,i.batchId,n),[4,WO(r,i.ci)];case 3:return a.sent(),[4,eO(r.gl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=fT(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function PO(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:n=m_(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,$S(n.Sh,e)];case 2:return r=i.sent(),e.Oe.forEach(function(t,e){var r=n.Nl.get(e);r&&(p_(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?p_(r.yl):t.Ke.size>0&&(p_(r.yl),r.yl=!1))}),[4,WO(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,aS(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function DO(t,e,n){var r=m_(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach(function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=m_(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)}),r&&vO(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function jO(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(s_.d)(this,function(c){switch(c.label){case 0:return(r=m_(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(o=i&&i.key)?(s=(s=new GE(z_.J)).Ht(o,new Cw(o,V_.min())),a=sC().add(o),u=new fC(V_.min(),new Map,new JE(y_),s,a),[4,PO(r,u)]):[3,2];case 1:return c.sent(),r.xl=r.xl.remove(o),r.Nl.delete(e),KO(r),[3,4];case 2:return[4,XS(r.Sh,e,!1).then(function(){return qO(r,e,n)}).catch(aS)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function LO(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:n=m_(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,WS(n.Sh,e)];case 2:return i=o.sent(),UO(n,r,null),VO(n,r),n.pl.Fa(r,"acknowledged"),[4,WO(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,aS(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function MO(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:r=m_(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=m_(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Ho.gi(t,e).next(function(e){return p_(null!==e),r=e.keys(),n.Ho.Ni(t,e)}).next(function(){return n.Ho.ki(t)}).next(function(){return n.Ic.Zo(t,r)})})}(r.Sh,e)];case 2:return i=o.sent(),UO(r,e,n),VO(r,e),r.pl.Fa(e,"rejected",n),[4,WO(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,aS(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function FO(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:$I((n=m_(t)).gl)||c_("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=m_(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Ho.bi(t)})}(n.Sh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return o=a.sent(),s=fT(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function VO(t,e){(t.kl.get(e)||[]).forEach(function(t){t.resolve()}),t.kl.delete(e)}function UO(t,e,n){var r=m_(t),i=r.Ol[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ol[r.currentUser.R()]=i}}function qO(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Fl.kc(e).forEach(function(e){t.Fl.Mi(e)||BO(t,e)})}function BO(t,e){var n=t.xl.get(e);null!==n&&(HI(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),KO(t))}function HO(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof CO?(t.Fl.ir(o.key,e),zO(t,o)):o instanceof TO?(c_("SyncEngine","Document no longer in limbo: "+o.key),t.Fl.cr(o.key,e),t.Fl.Mi(o.key)||BO(t,o.key)):d_()}}function zO(t,e){var n=e.key;t.xl.get(n)||(c_("SyncEngine","New document in limbo: "+n),t.Cl.push(n),KO(t))}function KO(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new OO(e)),t.xl=t.xl.Ht(e,n),BI(t.gl,new uE(tE(Gw(e.path)),n,2,M_.U))}}function WO(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:return r=m_(t),i=[],o=[],s=[],r.Sl.nt()?[3,3]:(r.Sl.forEach(function(t,a){s.push(r.Bl(a,e,n).then(function(t){if(t){r.$l&&r.pl.qa(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=qS.cc(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vl.uh(i),[4,function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(s_.d)(this,function(l){switch(l.label){case 0:n=m_(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return eT.forEach(e,function(e){return eT.forEach(e.rc,function(r){return n.persistence.mi.ir(t,e.targetId,r)}).next(function(){return eT.forEach(e.oc,function(r){return n.persistence.mi.cr(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!sT(r=l.sent()))throw r;return c_("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.dc.get(a),c=u.Bt(u.Mt),n.dc=n.dc.Ht(a,c));return[2]}})})}(r.Sh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function GO(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return(n=m_(t)).currentUser.isEqual(e)?[3,3]:(c_("SyncEngine","User change. New user:",e.R()),[4,KS(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach(function(t){t.forEach(function(t){t.reject(new C_(E_.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,WO(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function $O(t,e){var n=m_(t),r=n.Nl.get(e);if(r&&r.yl)return sC().add(r.key);var i=sC(),o=n.Dl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Sl.get(a[s]);i=i.ye(u.view.fl)}return i}function QO(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return[4,ZS((n=m_(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&HO(n,e.targetId,i.ml),i)]}})})}function JO(t){return Object(s_.b)(this,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){return[2,eI((e=m_(t)).Sh).then(function(t){return WO(e,t)})]})})}function YO(t,e,n,r){return Object(s_.b)(this,void 0,void 0,function(){var i,o;return Object(s_.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=m_(t),r=m_(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Vi(t,e).next(function(e){return e?n.Ic.Zo(t,e):eT.resolve(null)})})}((i=m_(t)).Sh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,eO(i.gl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(UO(i,e,r||null),VO(i,e),function(t,e){m_(m_(t).Ho).Fi(e)}(i.Sh,e)):d_(),s.label=4;case 4:return[4,WO(i,o)];case 5:return s.sent(),[3,7];case 6:c_("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function XO(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(s_.d)(this,function(c){switch(c.label){case 0:return ik(n=m_(t)),ok(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,ZO(n,r.rt())]);case 1:return i=c.sent(),n.Ll=!0,[4,uO(n.gl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)BI(n.gl,s[o]);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(a=[],u=Promise.resolve(),n.Dl.forEach(function(t,e){n.pl.$a(e)?a.push(e):u=u.then(function(){return qO(n,e),XS(n.Sh,e,!0)}),HI(n.gl,e)}),[4,u]);case 4:return c.sent(),[4,ZO(n,a)];case 5:return c.sent(),function(t){var e=m_(t);e.Nl.forEach(function(t,n){HI(e.gl,n)}),e.Fl.Mc(),e.Nl=new Map,e.xl=new GE(z_.J)}(n),n.Ll=!1,[4,uO(n.gl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function ZO(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(s_.d)(this,function(m){switch(m.label){case 0:n=m_(t),r=[],i=[],o=0,s=e,m.label=1;case 1:return o<s.length?(u=void 0,(c=n.Dl.get(a=s[o]))&&0!==c.length?[4,YS(n.Sh,tE(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),l=0,h=c,m.label=3;case 3:return l<h.length?(f=n.Sl.get(h[l]),[4,QO(n,f)]):[3,6];case 4:(d=m.sent()).snapshot&&i.push(d.snapshot),m.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,tI(n.Sh,a)];case 8:return p=m.sent(),[4,YS(n.Sh,p)];case 9:return u=m.sent(),[4,xO(n,tk(p),a,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}})})}function tk(t){return Ww(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ek(t){var e=m_(t);return m_(m_(e.Sh).persistence).Ko()}function nk(t,e,n,r){return Object(s_.b)(this,void 0,void 0,function(){var i,o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:return(i=m_(t)).Ll?(c_("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,eI(i.Sh)];case 3:return o=a.sent(),s=fC.$e(e,"current"===n),[4,WO(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,XS(i.Sh,e,!0)];case 6:return a.sent(),qO(i,e,r),[3,8];case 7:d_(),a.label=8;case 8:return[2]}})})}function rk(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(s_.d)(this,function(f){switch(f.label){case 0:if(!(r=ik(t)).Ll)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Dl.has(s=o[i])?(c_("SyncEngine","Adding an already active target "+s),[3,5]):[4,tI(r.Sh,s)]:[3,6];case 2:return a=f.sent(),[4,YS(r.Sh,a)];case 3:return u=f.sent(),[4,xO(r,tk(a),u.targetId,!1)];case 4:f.sent(),BI(r.gl,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(s_.d)(this,function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,XS(r.Sh,t,!1).then(function(){HI(r.gl,t),qO(r,t)}).catch(aS)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function ik(t){var e=m_(t);return e.gl.Ch.Bh=PO.bind(null,e),e.gl.Ch.Sn=$O.bind(null,e),e.gl.Ch.$h=jO.bind(null,e),e.vl.uh=mO.bind(null,e.Vl),e.vl.ql=gO.bind(null,e.Vl),e}function ok(t){var e=m_(t);return e.gl.Ch.qh=LO.bind(null,e),e.gl.Ch.Uh=MO.bind(null,e),e}function sk(t,e,n){var r=m_(t);(function(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(s_.d)(this,function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=m_(t),r=OC(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(t){return n.To.Ls(t,e.id)}).then(function(t){return!!t&&t.createTime.u(r)>=0})}(t.Sh,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n.Ul(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n.Ql(EO(r)),i=new wO(r,t.Sh,e.Kt),[4,e.Kl()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.ol(o)]:[3,10];case 7:return(s=c.sent())&&n.Ql(s),[4,e.Kl()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,WO(t,a.gs,void 0)];case 12:return c.sent(),[4,function(t,e){var n=m_(t);return n.persistence.runTransaction("Save bundle","readwrite",function(t){return n.To.$s(t,e)})}(t.Sh,r)];case 13:return c.sent(),n.Ul(a.progress),[3,15];case 14:return h_("SyncEngine","Loading bundle failed with "+(u=c.sent())),n.Wl(u),[3,15];case 15:return[2]}})})})(r,e,n).then(function(){r.pl.ja()})}var ak=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(e){switch(e.label){case 0:return this.Kt=RI(t.gu.T),this.pl=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}})})},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return zS(this.persistence,new BS,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new fI(pI.ra,this.Kt)},t.prototype.jl=function(t){return new TI},t.prototype.terminate=function(){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.$o()];case 1:return t.sent(),[4,this.persistence.$o()];case 2:return t.sent(),[2]}})})},t}(),uk=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(s_.c)(e,t),e.prototype.initialize=function(e){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,nI(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,ok(this.Xl.fa)];case 4:return n.sent(),[4,eO(this.Xl.gl)];case 5:return n.sent(),[2]}})})},e.prototype.Jl=function(t){return zS(this.persistence,new BS,t.Yl,this.Kt)},e.prototype.Hl=function(t){return new TS(this.persistence.mi.dr,t.fs)},e.prototype.Gl=function(t){var e=VS(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?sS.Zs(this.cacheSizeBytes):sS.ni;return new LS(this.synchronizeTabs,e,t.clientId,n,t.fs,xI(),NI(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.jl=function(t){return new TI},e}(ak),ck=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(s_.c)(e,t),e.prototype.initialize=function(e){return Object(s_.b)(this,void 0,void 0,function(){var n,r=this;return Object(s_.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.fa,this.pl instanceof CI?(this.pl.fa={nu:YO.bind(null,n),su:nk.bind(null,n),iu:rk.bind(null,n),Ko:ek.bind(null,n),eu:JO.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.yo(function(t){return Object(s_.b)(r,void 0,void 0,function(){return Object(s_.d)(this,function(e){switch(e.label){case 0:return[4,XO(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Ir?this.zl.start(this.Sh):t||this.zl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jl=function(t){var e=xI();if(!CI.Wn(e))throw new C_(E_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=VS(t.gu.T,t.gu.persistenceKey);return new CI(e,t.fs,n,t.clientId,t.Yl)},e}(uk),lk=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n=this;return Object(s_.d)(this,function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return DO(n.fa,t,1)},this.gl.Ch.s_=GO.bind(null,this.fa),[4,uO(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.e_=function(t){return new fO},t.prototype.Zl=function(t){var e=RI(t.gu.T),n=new AI(t.gu);return function(t,e,n){return new MI(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return DO(s.fa,t,0)},o=II.Wn()?new II:new SI,new VI(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new kO(t,e,n,r,i,o);return s&&(a.Ll=!0),a}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return Object(s_.b)(this,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return e=m_(t),c_("RemoteStore","RemoteStore shutting down."),e.Fh.add(5),[4,qI(e)];case 1:return n.sent(),e.kh.$o(),e.Mh.set("Unknown"),[2]}})})}(this.gl)},t}();function hk(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(s_.b)(this,void 0,void 0,function(){var r;return Object(s_.d)(this,function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]})})},cancel:function(){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(t){return[2]})})},releaseLock:function(){}}}var fk=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),dk=function(){function t(t,e){var n=this;this.o_=t,this.Kt=e,this.metadata=new tT,this.buffer=new Uint8Array,this.c_=new TextDecoder("utf-8"),this.a_().then(function(t){t&&t.il()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}return t.prototype.close=function(){return this.o_.cancel()},t.prototype.getMetadata=function(){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Kl=function(){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.a_())]}})})},t.prototype.a_=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return[4,this.u_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.c_.decode(t),n=Number(e),isNaN(n)&&this.h_("length string ("+e+") is not valid number"),[4,this.l_(n)]);case 2:return r=i.sent(),[2,new bO(JSON.parse(r),t.length+n)]}})})},t.prototype.__=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.u_=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return this.__()<0?[4,this.f_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.__())<0&&this.h_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.l_=function(t){return Object(s_.b)(this,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.f_()]:[3,3];case 1:n.sent()&&this.h_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.c_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.h_=function(t){throw this.o_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.f_=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return[4,this.o_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})},t}(),pk=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new C_(E_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new H_(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}(),mk=function(t){this._methodName=t};function gk(t,e,n){if(!n)throw new C_(E_.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function vk(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new C_(E_.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function yk(t,e,n,r){if(!0===e&&!0===r)throw new C_(E_.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function bk(t){if(!z_.Et(t))throw new C_(E_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function _k(t){if(z_.Et(t))throw new C_(E_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function wk(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":d_()}function Ek(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new C_(E_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=wk(t);throw new C_(E_.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ck(t,e){if(e<=0)throw new C_(E_.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Tk=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new C_(E_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new C_(E_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,yk("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Sk=new Map,Ik=function(){function t(t,e){this.w_="(lite)",this.E_=new Tk({}),this.T_=!1,t instanceof x_?(this.I_=t,this.m_=new P_):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new C_(E_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new x_(t.options.projectId)}(t),this.m_=new D_(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new C_(E_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new C_(E_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Tk(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new P_;switch(t.type){case"gapi":var e=t.client;return p_(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new L_(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new C_(E_.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return(t=Sk.get(this))&&(c_("ComponentProvider","Removing Datastore"),Sk.delete(this),t.terminate()),Promise.resolve();var t},t}(),Ok=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ak(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),kk=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Ak=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Gw(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(s_.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new Ok(this.firestore,null,new z_(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(kk);function xk(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof S_&&(t=t._),gk("collection","path",e),t instanceof Ik)return _k(n=q_.ct.apply(q_,Object(s_.g)([e],r))),new Ak(t,null,n);if(!(t instanceof Ok||t instanceof Ak))throw new C_(E_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return _k(n=q_.ct.apply(q_,Object(s_.g)([t.path],r)).child(q_.ct(e))),new Ak(t.firestore,null,n)}function Nk(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof S_&&(t=t._),1===arguments.length&&(e=v_.t()),gk("doc","path",e),t instanceof Ik)return bk(n=q_.ct.apply(q_,Object(s_.g)([e],r))),new Ok(t,null,new z_(n));if(!(t instanceof Ok||t instanceof Ak))throw new C_(E_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return bk(n=t.D_.child(q_.ct.apply(q_,Object(s_.g)([e],r)))),new Ok(t.firestore,t instanceof Ak?t.v_:null,new z_(n))}function Rk(t,e){return t instanceof S_&&(t=t._),e instanceof S_&&(e=e._),(t instanceof Ok||t instanceof Ak)&&(e instanceof Ok||e instanceof Ak)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Pk(t,e){return t instanceof S_&&(t=t._),e instanceof S_&&(e=e._),t instanceof kk&&e instanceof kk&&t.firestore===e.firestore&&nE(t.C_,e.C_)&&t.v_===e.v_}var Dk=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new C_(E_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new C_(E_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return y_(this.x_,t.x_)||y_(this.N_,t.N_)},t}(),jk=/^__.*__$/,Lk=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.zt?new jE(t,this.data,this.zt,e,this.fieldTransforms):new DE(t,this.data,e,this.fieldTransforms)},t}(),Mk=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new jE(t,this.data,this.zt,e,this.fieldTransforms)},t}();function Fk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw d_()}}var Vk=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return oA(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.zt.find(function(e){return t.st(e)})||void 0!==this.fieldTransforms.find(function(e){return t.st(e.field)})},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Fk(this.k_)&&jk.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Uk=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||RI(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Vk({k_:t,methodName:e,j_:n,path:H_.at(),B_:!1,W_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function qk(t){var e=t.p_(),n=RI(t.I_);return new Uk(t.I_,!!e.ignoreUndefinedProperties,n)}function Bk(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);eA("Data must be an object, but it was:",s,r);var a,u,c=Zk(r,s);if(o.merge)a=new $_(s.zt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=nA(e,f[h],n);if(!s.contains(d))throw new C_(E_.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");sA(l,d)||l.push(d)}a=new $_(l),u=s.fieldTransforms.filter(function(t){return a.It(t.field)})}else a=null,u=s.fieldTransforms;return new Lk(new yw(c),a,u)}var Hk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s_.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(mk);function zk(t,e,n){return new Vk({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var Kk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s_.c)(e,t),e.prototype.z_=function(t){return new TE(t.path,new gE)},e.prototype.isEqual=function(t){return t instanceof e},e}(mk),Wk=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(s_.c)(e,t),e.prototype.z_=function(t){var e=zk(this,t,!0),n=this.H_.map(function(t){return Xk(t,e)}),r=new vE(n);return new TE(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(mk),Gk=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(s_.c)(e,t),e.prototype.z_=function(t){var e=zk(this,t,!0),n=this.H_.map(function(t){return Xk(t,e)}),r=new bE(n);return new TE(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(mk),$k=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(s_.c)(e,t),e.prototype.z_=function(t){var e=new wE(t.Kt,hE(t.Kt,this.J_));return new TE(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(mk);function Qk(t,e,n,r){var i=t.G_(1,e,n);eA("Data must be an object, but it was:",i,r);var o=[],s=new bw;W_(r,function(t,r){var a=iA(e,t,n);r instanceof S_&&(r=r._);var u=i.U_(a);if(r instanceof Hk)o.push(a);else{var c=Xk(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new $_(o);return new Mk(s.yt(),a,i.fieldTransforms)}function Jk(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[nA(e,r,n)],u=[i];if(o.length%2!=0)throw new C_(E_.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(nA(e,o[c])),u.push(o[c+1]);for(var l=[],h=new bw,f=a.length-1;f>=0;--f)if(!sA(l,a[f])){var d=a[f],p=u[f];p instanceof S_&&(p=p._);var m=s.U_(d);if(p instanceof Hk)l.push(d);else{var g=Xk(p,m);null!=g&&(l.push(d),h.set(d,g))}}var v=new $_(l);return new Mk(h.yt(),v,s.fieldTransforms)}function Yk(t,e,n,r){return void 0===r&&(r=!1),Xk(n,t.G_(r?4:3,e))}function Xk(t,e){if(t instanceof S_&&(t=t._),tA(t))return eA("Unsupported field value:",e,t),Zk(t,e);if(t instanceof mk)return function(t,e){if(!Fk(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Xk(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof S_&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return hE(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=F_.fromDate(t);return{timestampValue:TC(e.Kt,n)}}if(t instanceof F_)return n=new F_(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:TC(e.Kt,n)};if(t instanceof Dk)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof T_)return{bytesValue:SC(e.Kt,t.l)};if(t instanceof Ok){var r=t.firestore.I_;if(!r.isEqual(n=e.T))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:kC(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+wk(t))}(t,e)}function Zk(t,e){var n={};return G_(t)?e.path&&e.path.length>0&&e.zt.push(e.path):W_(t,function(t,r){var i=Xk(r,e.L_(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function tA(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof F_||t instanceof Dk||t instanceof T_||t instanceof Ok||t instanceof mk)}function eA(t,e,n){if(!tA(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=wk(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function nA(t,e,n){if(e instanceof S_&&(e=e._),e instanceof pk)return e.d_;if("string"==typeof e)return iA(t,e);throw oA("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var rA=new RegExp("[~\\*/\\[\\]]");function iA(t,e,n){if(e.search(rA)>=0)throw oA("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(pk.bind.apply(pk,Object(s_.g)([void 0],e.split("."))))).d_}catch(r){throw oA("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function oA(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new C_(E_.INVALID_ARGUMENT,(a+=". ")+t+u)}function sA(t,e){return t.some(function(t){return t.isEqual(e)})}var aA=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n=this;return Object(s_.d)(this,function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new C_(E_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(s_.d)(this,function(u){switch(u.label){case 0:return n=m_(t),r=DC(n.Kt)+"/documents",i={documents:e.map(function(t){return xC(n.Kt,t)})},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){p_(!!e.found);var n=NC(t,e.found.name),r=OC(e.found.updateTime),i=new yw({mapValue:{fields:e.found.fields}});return new Ew(n,r,i,{})}(t,e):"missing"in e?function(t,e){p_(!!e.missing),p_(!!e.readTime);var n=NC(t,e.missing),r=OC(e.readTime);return new Cw(n,r)}(t,e):d_()}(n.Kt,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());p_(!!e),a.push(e)}),a)]}})})}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Cw||t instanceof Ew?n.sf(t):d_()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.F_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new BE(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e=this;return Object(s_.d)(this,function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=z_.ft(n);e.mutations.push(new HE(r,e.Gt(r)))}),[4,function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return n=m_(t),r=DC(n.Kt)+"/documents",i={writes:e.map(function(t){return FC(n.Kt,t)})},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}})})},t.prototype.sf=function(t){var e;if(t instanceof Ew)e=t.version;else{if(!(t instanceof Cw))throw d_();e=V_.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new C_(E_.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?IE.updateTime(e):IE.Wt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(V_.min()))throw new C_(E_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return IE.updateTime(e)}return IE.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),uA=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new PI(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu(function(){return Object(s_.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(s_.d)(this,function(r){return t=new aA(this.Dh),(e=this.uf(t))&&e.then(function(e){n.fs.ys(function(){return t.commit().then(function(){n.Ts.resolve(e)}).catch(function(t){n.hf(t)})})}).catch(function(t){n.hf(t)}),[2]})})})},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!nw(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys(function(){return e.af(),Promise.resolve()})):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!KE(e)}return!1},t}(),cA=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=N_.UNAUTHENTICATED,this.clientId=v_.t(),this._f=function(){},this.N=new tT,this.credentials.S(function(t){c_("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()})}return t.prototype.getConfiguration=function(){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}})})},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then(function(){return e._f(e.user)})},t.prototype.df=function(){if(this.fs.wf)throw new C_(E_.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new tT;return this.fs.Tf(function(){return Object(s_.b)(t,void 0,void 0,function(){var t,n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=fT(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function lA(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(s_.d)(this,function(o){switch(o.label){case 0:return t.fs.Af(),c_("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Yl,t.ff(function(n){r.isEqual(n)||(r=n,t.fs.vo(function(){return Object(s_.b)(i,void 0,void 0,function(){return Object(s_.d)(this,function(t){switch(t.label){case 0:return[4,KS(e.Sh,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.Vo(function(){return t.terminate()}),t.mf=e,[2]}})})}function hA(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return t.fs.Af(),[4,fA(t)];case 1:return n=i.sent(),c_("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff(function(n){return t.fs.vo(function(){return function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return(n=m_(t)).fs.Af(),c_("RemoteStore","RemoteStore received new credentials"),r=$I(n),n.Fh.add(3),[4,qI(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Fh.delete(3),[4,UI(n)];case 3:return i.sent(),[2]}})})}(e.gl,n)})}),t.If=e,[2]}})})}function fA(t){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(e){switch(e.label){case 0:return t.mf?[3,2]:(c_("FirestoreClient","Using default OfflineComponentProvider"),[4,lA(t,new ak)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}})})}function dA(t){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(e){switch(e.label){case 0:return t.If?[3,2]:(c_("FirestoreClient","Using default OnlineComponentProvider"),[4,hA(t,new lk)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}})})}function pA(t){return fA(t).then(function(t){return t.persistence})}function mA(t){return fA(t).then(function(t){return t.Sh})}function gA(t){return dA(t).then(function(t){return t.gl})}function vA(t){return dA(t).then(function(t){return t.fa})}function yA(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return[4,dA(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=AO.bind(null,e.fa),n.Jh=NO.bind(null,e.fa),n)]}})})}function bA(t,e,n){var r=this;void 0===n&&(n={});var i=new tT;return t.fs.ys(function(){return Object(s_.b)(r,void 0,void 0,function(){var r;return Object(s_.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new fk({next:function(o){e.ys(function(){return pO(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new C_(E_.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new C_(E_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new yO(Gw(n.path),o,{includeMetadataChanges:!0,sl:!0});return dO(t,s)},[4,yA(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}})})}),i.promise}function _A(t,e,n){var r=this;void 0===n&&(n={});var i=new tT;return t.fs.ys(function(){return Object(s_.b)(r,void 0,void 0,function(){var r;return Object(s_.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new fk({next:function(n){e.ys(function(){return pO(t,s)}),n.fromCache&&"server"===r.source?i.reject(new C_(E_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new yO(n,o,{includeMetadataChanges:!0,sl:!0});return dO(t,s)},[4,yA(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}})})}),i.promise}var wA=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new PI(this,"async_queue_retry"),this.vf=function(){var e=NI();e&&c_("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=NI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=NI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},t.prototype.vo=function(t){var e=this;this.ys(function(){return e.Pf.push(t),e.Cf()})},t.prototype.Cf=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e=this;return Object(s_.d)(this,function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!sT(t=n.sent()))throw t;return c_("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu(function(){return e.Cf()}),n.label=5;case 5:return[2]}})})},t.prototype.Df=function(t){var e=this,n=this.Rf.then(function(){return e.pf=!0,t().catch(function(t){throw e.Vf=t,e.pf=!1,l_("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.pf=!1,t})});return this.Rf=n,n},t.prototype.mr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=hT.Is(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&d_()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(s_.b)(this,void 0,void 0,function(){var t;return Object(s_.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then(function(){e.gf.sort(function(t,e){return t.ws-e.ws});for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()})},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),EA=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new wA,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(s_.c)(e,t),e.prototype.b_=function(){return this.Lf||TA(this),this.Lf.terminate()},e}(Ik);function CA(t){return t.Lf||TA(t),t.Lf.df(),t.Lf}function TA(t){var e=t.p_(),n=function(t,e,n){return new A_(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new cA(t.m_,t.Mf,n)}function SA(t,e,n){var r=this,i=new tT;return t.fs.enqueue(function(){return Object(s_.b)(r,void 0,void 0,function(){var r;return Object(s_.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,lA(t,n)];case 1:return o.sent(),[4,hA(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===E_.FAILED_PRECONDITION||t.code===E_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function IA(t){if(t.R_||t.P_)throw new C_(E_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var OA=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),ow(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Y_(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(X_(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw d_()}},t.prototype.jf=function(t,e){var n=this,r={};return W_(t.fields||{},function(t,i){r[t]=n.$f(i,e)}),r},t.prototype.Kf=function(t){return new Dk(Y_(t.latitude),Y_(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.$f(t,e)})},t.prototype.qf=function(t,e){switch(e){case"previous":var n=tw(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(ew(t));default:return null}},t.prototype.Bf=function(t){var e=J_(t);return new F_(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=q_.ct(t);p_(ZC(n));var r=new x_(n.get(1),n.get(3)),i=new z_(n.X(5));return r.isEqual(e)||l_("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),kA=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ok(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new AA(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(xA("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),AA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s_.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(kA);function xA(t,e){return"string"==typeof e?iA(t,e):e instanceof S_?e._.d_:e.d_}function NA(t){if(Qw(t)&&0===t.Nt.length)throw new C_(E_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var RA=function(){};function PA(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var DA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return Object(s_.c)(e,t),e.prototype.Yf=function(t){var e=qk(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new C_(E_.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){qA(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(UA(r,t,l[c]));a={arrayValue:{values:u}}}else a=UA(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||qA(s,o),a=Yk(n,"where",s,"in"===o||"not-in"===o);var h=xw.create(i,o,a);return function(t,e){if(e.xt()){var n=Yw(t);if(null!==n&&!n.isEqual(e.field))throw new C_(E_.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Jw(t);null!==r&&BA(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new C_(E_.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new kk(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Kw(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(RA),jA=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return Object(s_.c)(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new C_(E_.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new C_(E_.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new qw(e,n);return function(t,e){if(null===Jw(t)){var n=Yw(t);null!==n&&BA(0,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new kk(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new Kw(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(RA),LA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return Object(s_.c)(e,t),e.prototype.Yf=function(t){return new kk(t.firestore,t.v_,eE(t.C_,this.nd,this.sd))},e}(RA),MA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(s_.c)(e,t),e.prototype.Yf=function(t){var e=VA(t,this.type,this.rd,this.od);return new kk(t.firestore,t.v_,function(t,e){return new Kw(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(RA),FA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(s_.c)(e,t),e.prototype.Yf=function(t){var e=VA(t,this.type,this.rd,this.od);return new kk(t.firestore,t.v_,function(t,e){return new Kw(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(RA);function VA(t,e,n,r){if(n[0]instanceof S_&&(n[0]=n[0]._),n[0]instanceof kA)return function(t,e,n,r,i){if(!r)throw new C_(E_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Zw(t);s<a.length;s++){var u=a[s];if(u.field.ht())o.push(fw(e,r.key));else{var c=r.field(u.field);if(Z_(c))throw new C_(E_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.ot();throw new C_(E_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Vw(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=qk(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new C_(E_.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ht()){if("string"!=typeof c)throw new C_(E_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Xw(t)&&-1!==c.indexOf("/"))throw new C_(E_.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(q_.ct(c));if(!z_.Et(l))throw new C_(E_.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new z_(l);a.push(fw(e,h))}else{var f=Yk(n,r,c);a.push(f)}}return new Vw(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function UA(t,e,n){if(n instanceof S_&&(n=n._),"string"==typeof n){if(""===n)throw new C_(E_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xw(e)&&-1!==n.indexOf("/"))throw new C_(E_.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(q_.ct(n));if(!z_.Et(r))throw new C_(E_.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return fw(t,new z_(r))}if(n instanceof Ok)return fw(t,n.S_);throw new C_(E_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+wk(n)+".")}function qA(t,e){if(!Array.isArray(t)||0===t.length)throw new C_(E_.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new C_(E_.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function BA(t,e,n){if(!n.isEqual(e))throw new C_(E_.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function HA(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function zA(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var KA=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(s_.c)(e,t),e.prototype.Uf=function(t){return new T_(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Ok(this.firestore,null,e)},e}(OA),WA=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),GA=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).zf=e,a.ad=e,a.metadata=o,a}return Object(s_.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new $A(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(xA("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(kA),$A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s_.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(GA),QA=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new WA(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach(function(r){t.call(e,new $A(n.zf,n.Hf,r.key,r,new WA(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new C_(E_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map(function(e){return{type:"added",doc:new $A(t.zf,t.Hf,e.doc.key,e.doc,new WA(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}})}var r=t.ud.De;return t.ud.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new $A(t.zf,t.Hf,e.doc.key,e.doc,new WA(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:JA(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.ld=e),this.hd},t}();function JA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return d_()}}function YA(t,e){return t instanceof GA&&e instanceof GA?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof QA&&e instanceof QA&&t.zf===e.zf&&Pk(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var XA=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(s_.c)(e,t),e.prototype.Uf=function(t){return new T_(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Ok(this.firestore,null,e)},e}(OA);function ZA(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Ek(t,Ok);var o=Ek(t.firestore,EA),s=qk(o);return e instanceof S_&&(e=e._),ex(o,[("string"==typeof e||e instanceof pk?Jk(s,"updateDoc",t.S_,e,n,r):Qk(s,"updateDoc",t.S_,e)).F_(t.S_,IE.exists(!0))])}function tx(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof S_&&(t=t._);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||HA(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(HA(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Ok)c=Ek(t.firestore,EA),l=Gw(t.S_.path),u={next:function(e){i[a]&&i[a](nx(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Ek(t,kk);c=Ek(d.firestore,EA),l=d.C_;var p=new XA(c);u={next:function(t){i[a]&&i[a](new QA(c,p,d,t))},error:i[a+1],complete:i[a+2]},NA(t.C_)}return function(t,e,n,r){var i=this,o=new fk(r),s=new yO(e,o,n);return t.fs.ys(function(){return Object(s_.b)(i,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return e=dO,[4,yA(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.r_(),t.fs.ys(function(){return Object(s_.b)(i,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return e=pO,[4,yA(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(CA(c),l,h,u)}function ex(t,e){return function(t,e){var n=this,r=new tT;return t.fs.ys(function(){return Object(s_.b)(n,void 0,void 0,function(){var n;return Object(s_.d)(this,function(i){switch(i.label){case 0:return n=RO,[4,vA(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(CA(t),e)}function nx(t,e,n){var r=n.docs.get(e.S_),i=new XA(t);return new GA(t,i,e.S_,r,new WA(n.hasPendingWrites,n.fromCache),e.v_)}var rx=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=qk(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=ix(t,this.zf),i=zA(r.v_,e,n),o=Bk(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,IE.Wt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=ix(t,this.zf);return e instanceof S_&&(e=e._),o="string"==typeof e||e instanceof pk?Jk(this.wd,"WriteBatch.update",s.S_,e,n,r):Qk(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,IE.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=ix(t,this.zf);return this.fd=this.fd.concat(new BE(e.S_,IE.Wt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new C_(E_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function ix(t,e){if(t instanceof S_&&(t=t._),t.firestore!==e)throw new C_(E_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ox=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return Object(s_.c)(e,t),e.prototype.get=function(e){var n=this,r=ix(e,this.zf),i=new XA(this.zf);return t.prototype.get.call(this,e).then(function(t){return new GA(n.zf,i,r.S_,t.Jf,new WA(!1,!1),r.v_)})},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=qk(t)}return t.prototype.get=function(t){var e=this,n=ix(t,this.zf),r=new KA(this.zf);return this.Td.ef([n.S_]).then(function(t){if(!t||1!==t.length)return d_();var i=t[0];if(i instanceof Cw)return new kA(e.zf,r,n.S_,null,n.v_);if(i instanceof Ew)return new kA(e.zf,r,i.key,i,n.v_);throw d_()})},t.prototype.set=function(t,e,n){var r=ix(t,this.zf),i=zA(r.v_,e,n),o=Bk(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=ix(t,this.zf);return e instanceof S_&&(e=e._),o="string"==typeof e||e instanceof pk?Jk(this.wd,"Transaction.update",s.S_,e,n,r):Qk(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=ix(t,this.zf);return this.Td.delete(e.S_),this},t}()),sx=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){IA(t=Ek(t,EA));var n=CA(t),r=t.p_(),i=new lk;return SA(n,i,new uk(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){IA(t=Ek(t,EA));var e=CA(t),n=t.p_(),r=new lk;return SA(e,r,new ck(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new C_(E_.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new tT;return t.Mf.Tf(function(){return Object(s_.b)(e,void 0,void 0,function(){var e;return Object(s_.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(e){switch(e.label){case 0:return rT.Wn()?[4,rT.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(VS(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._)},t}(),ax=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof x_||(i.md=e),i}return Object(s_.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.V_().host&&h_("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue(function(){return Object(s_.b)(e,void 0,void 0,function(){var e,n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return[4,pA(t)];case 1:return e=r.sent(),[4,gA(t)];case 2:return n=r.sent(),[2,(e.po(!0),function(t){var e=m_(t);return e.Fh.delete(0),UI(e)}(n))]}})})})}(CA(Ek(this._,EA)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue(function(){return Object(s_.b)(e,void 0,void 0,function(){var e,n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return[4,pA(t)];case 1:return e=r.sent(),[4,gA(t)];case 2:return n=r.sent(),[2,(e.po(!1),function(t){return Object(s_.b)(this,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return(e=m_(t)).Fh.add(0),[4,qI(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}})})}(n))]}})})})}(CA(Ek(this._,EA)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&yk("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new tT;return t.fs.ys(function(){return Object(s_.b)(e,void 0,void 0,function(){var e;return Object(s_.d)(this,function(r){switch(r.label){case 0:return e=FO,[4,vA(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(CA(Ek(this._,EA)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new fk(e);return t.fs.ys(function(){return Object(s_.b)(n,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){m_(t).jh.add(e),e.next()},[4,yA(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.r_(),t.fs.ys(function(){return Object(s_.b)(n,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){m_(t).jh.delete(e)},[4,yA(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(CA(t=Ek(t,EA)),HA(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new C_(E_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new _x(this,xk(this._,t))}catch(t){throw fx(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new hx(this,Nk(this._,t))}catch(t){throw fx(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new vx(this,function(t,e){if(t=Ek(t,Ik),gk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new C_(E_.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new kk(t,null,function(t){return new Kw(q_.at(),t)}(e))}(this._,t))}catch(t){throw fx(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new tT;return t.fs.ys(function(){return Object(s_.b)(n,void 0,void 0,function(){var n;return Object(s_.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return dA(t).then(function(t){return t.Dh})}(t)];case 1:return n=i.sent(),new uA(t.fs,n,e,r).run(),[2]}})})}),r.promise}(CA(t),function(n){return e(new ox(t,n))})}(this._,function(n){return t(new cx(e,n))})},e.prototype.batch=function(){var t=this;return CA(this._),new lx(new rx(this._,function(e){return ex(t._,e)}))},e.prototype.loadBundle=function(t){throw new C_(E_.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new C_(E_.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(S_),ux=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(s_.c)(e,t),e.prototype.Uf=function(t){return new k_(new T_(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return hx.Ad(e,this.firestore,null)},e}(OA),cx=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(s_.c)(e,t),e.prototype.get=function(t){var e=this,n=wx(t);return this._.get(n).then(function(t){return new mx(e.zf,t)})},e.prototype.set=function(t,e,n){var r=wx(t);return n?(vk("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=wx(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Object(s_.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=wx(t);return this._.delete(e),this},e}(S_),lx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s_.c)(e,t),e.prototype.set=function(t,e,n){var r=wx(t);return n?(vk("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=wx(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Object(s_.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=wx(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(S_),hx=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new ux(e),r}return Object(s_.c)(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new C_(E_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new Ok(n._,r,new z_(t)))},e.Ad=function(t,n,r){return new e(n,new Ok(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new _x(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new _x(this.firestore,xk(this._,t))}catch(t){throw fx(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof S_&&(t=t._),t instanceof Ok&&Rk(this._,t)},e.prototype.set=function(t,e){e=vk("DocumentReference.set",e);try{return function(t,e,n){t=Ek(t,Ok);var r=Ek(t.firestore,EA),i=zA(t.v_,e,n);return ex(r,[Bk(qk(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,IE.Wt())])}(this._,t,e)}catch(t){throw fx(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?ZA(this._,t):ZA.apply(void 0,Object(s_.g)([this._,t,e],n))}catch(t){throw fx(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return ex(Ek((t=this._).firestore,EA),[new BE(t.S_,IE.Wt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=dx(e),i=px(e,function(e){return new mx(t.firestore,new GA(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))});return tx(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ek(t,Ok);var e=Ek(t.firestore,EA),n=CA(e),r=new XA(e);return function(t,e){var n=this,r=new tT;return t.fs.ys(function(){return Object(s_.b)(n,void 0,void 0,function(){var n;return Object(s_.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=m_(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Ic.Jo(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Ew?n.resolve(i):i instanceof Cw?n.resolve(null):n.reject(new C_(E_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=fT(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,mA(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.S_).then(function(n){return new GA(e,r,t.S_,n,new WA(n instanceof Ew&&n.bt,!0),t.v_)})}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Ek(t,Ok);var e=Ek(t.firestore,EA);return bA(CA(e),t.S_,{source:"server"}).then(function(n){return nx(e,t,n)})}(this._):function(t){t=Ek(t,Ok);var e=Ek(t.firestore,EA);return bA(CA(e),t.S_).then(function(n){return nx(e,t,n)})}(this._)).then(function(t){return new mx(e.firestore,new GA(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(S_);function fx(t,e,n){return t.message=t.message.replace(e,n),t}function dx(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!HA(r))return r}return{}}function px(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=HA(t[0])?t[0]:HA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var mx=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(s_.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new hx(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return YA(this._,t._)},e}(S_),gx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s_.c)(e,t),e.prototype.data=function(t){return this._.data(t)},e}(mx),vx=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new ux(e),r}return Object(s_.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,PA(this._,function(t,e,n){var r=e,i=xA("where",t);return new DA(i,r,n)}(t,n,r)))}catch(t){throw fx(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,PA(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=xA("orderBy",t);return new jA(r,n)}(t,n)))}catch(t){throw fx(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,PA(this._,function(t){return Ck("limit",t),new LA("limit",t,"F")}(t)))}catch(t){throw fx(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,PA(this._,function(t){return Ck("limitToLast",t),new LA("limitToLast",t,"L")}(t)))}catch(t){throw fx(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,PA(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new MA("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw fx(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,PA(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new MA("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw fx(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,PA(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new FA("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw fx(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,PA(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new FA("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw fx(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Pk(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ek(t,kk);var e=Ek(t.firestore,EA),n=CA(e),r=new XA(e);return function(t,e){var n=this,r=new tT;return t.fs.ys(function(){return Object(s_.b)(n,void 0,void 0,function(){var n;return Object(s_.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(s_.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,ZS(t,e,!0)];case 1:return a=u.sent(),r=new SO(e,a.Pc),i=r.dl(a.documents),o=r.Ti(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=fT(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,mA(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.C_).then(function(n){return new QA(e,r,t,n)})}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Ek(t,kk);var e=Ek(t.firestore,EA),n=CA(e),r=new XA(e);return _A(n,t.C_,{source:"server"}).then(function(n){return new QA(e,r,t,n)})}(this._):function(t){t=Ek(t,kk);var e=Ek(t.firestore,EA),n=CA(e),r=new XA(e);return NA(t.C_),_A(n,t.C_).then(function(n){return new QA(e,r,t,n)})}(this._)).then(function(t){return new bx(e.firestore,new QA(e.firestore._,e.Hf,e._,t.ud))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=dx(e),i=px(e,function(e){return new bx(t.firestore,new QA(t.firestore._,t.Hf,t._,e.ud))});return tx(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(S_),yx=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(s_.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new gx(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(S_),bx=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(s_.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new vx(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map(function(e){return new gx(t.zf,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map(function(t){return new yx(e.zf,t)})},e.prototype.forEach=function(t,e){var n=this;this._.forEach(function(r){t.call(e,new gx(n.zf,r))})},e.prototype.isEqual=function(t){return YA(this._,t._)},e}(S_),_x=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return Object(s_.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new hx(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new hx(this.firestore,void 0===t?Nk(this._):Nk(this._,t))}catch(t){throw fx(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ek(t.firestore,EA),r=Nk(t),i=zA(t.v_,e);return ex(n,[Bk(qk(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,IE.exists(!1))]).then(function(){return r})}(this._,t).then(function(t){return new hx(e.firestore,t)})},e.prototype.isEqual=function(t){return Rk(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(vx);function wx(t){return t instanceof S_&&(t=t._),Ek(t,Ok)}var Ex,Cx=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(pk.bind.apply(pk,Object(s_.g)([void 0],e))))||this}return Object(s_.c)(e,t),e.documentId=function(){return new e(H_.lt().ot())},e.prototype.isEqual=function(t){return t instanceof S_&&(t=t._),t instanceof pk&&this._.d_.isEqual(t.d_)},e}(S_),Tx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s_.c)(e,t),e.serverTimestamp=function(){var t=new Kk("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Hk("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wk("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Gk("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new $k("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(S_),Sx=function(){function t(){this.Pd={},this.yd=new tT,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.yd.promise.catch(t)},t.prototype.then=function(t,e){return this.yd.promise.then(t,e)},t.prototype.Ul=function(t){this.Ql(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},t.prototype.Wl=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},t.prototype.Ql=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)},t}(),Ix=n("/6Yf"),Ox={Firestore:ax,GeoPoint:Dk,Timestamp:F_,Blob:k_,Transaction:cx,WriteBatch:lx,DocumentReference:hx,DocumentSnapshot:mx,Query:vx,QueryDocumentSnapshot:gx,QuerySnapshot:bx,CollectionReference:_x,FieldPath:Cx,FieldValue:Tx,setLogLevel:function(t){a_.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Ix.a("firestore",function(t){return function(t,e){return new ax(t,new EA(t,e),new sx)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Ox)))})(Ex=ng.a),Ex.registerVersion("@firebase/firestore","2.1.1"),function(t){t.prototype.loadBundle=function(t){return function(t,e){var n=new Sx;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new dk(t,e)}(function(t,e){if(t instanceof Uint8Array)return hk(t,e);if(t instanceof ArrayBuffer)return hk(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,RI(e));t.fs.ys(function(){return Object(s_.b)(i,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return e=sk,[4,vA(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}})})})}(CA(t._),t.I_,e,n),n}(this,t)},t.prototype.namedQuery=function(t){return function(t,e){return function(t,e){var n=this;return t.fs.enqueue(function(){return Object(s_.b)(n,void 0,void 0,function(){var n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return n=function(t,e){var n=m_(t);return n.persistence.runTransaction("Get named query","readonly",function(t){return n.To.Bs(t,e)})},[4,mA(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}})})})}(CA(t._),e).then(function(e){return e?new vx(t,new kk(t._,null,e.query)):null})}(this,t)}}(ax);var kx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ax=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(s_.c)(e,t),e}(Error),xx=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}return t.prototype.getAuthToken=function(){return Object(s_.b)(this,void 0,void 0,function(){var t;return Object(s_.d)(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(Ex){return[2,void 0]}return[2]})})},t.prototype.getContext=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function Nx(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Rx,Px,Dx,jx=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return Nx(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?Nx(t,function(t){return e.decode(t)}):t},t}(),Lx=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new jx,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new xx(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(Ex){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}})})},t.prototype.call=function(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h,f;return Object(s_.d)(this,function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(t){var e,n=new Promise(function(n,r){e=setTimeout(function(){r(new Ax("deadline-exceeded","deadline-exceeded"))},t)});return{timer:e,promise:n}}(n.timeout||7e4),u=a.timer,c=a.promise,[4,Promise.race([Mx(u,this.postJSON(r,i,o)),c,Mx(u,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new Ax("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!kx[a])return new Ax("internal","internal");r=kx[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(Ex){}return"ok"===r?null:new Ax(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new Ax("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new Ax("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}})})},t}();function Mx(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}})})}Rx=ng.a,Px=fetch.bind(self),Dx={Functions:Lx},Rx.INTERNAL.registerComponent(new Ix.a("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new Lx(n,r,i,e,Px)},"PUBLIC").setServiceProps(Dx).setMultipleInstances(!0)),ng.a.registerVersion("@firebase/functions","0.6.1");var Fx,Vx=n("nbvr"),Ux="w:0.4.19",qx=((Fx={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Fx["not-registered"]="Firebase Installation is not registered.",Fx["installation-not-found"]="Firebase Installation not found.",Fx["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Fx["app-offline"]="Could not process request. Application offline.",Fx["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Fx),Bx=new ig.b("installations","Installations",qx);function Hx(t){return t instanceof ig.c&&t.code.includes("request-failed")}function zx(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function Kx(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Wx(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,Bx.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function Gx(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function $x(t,e){var n=e.refreshToken,r=Gx(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function Qx(t){return Object(s_.b)(this,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function Jx(t,e){var n=e.fid;return Object(s_.b)(this,void 0,void 0,function(){var e,r,i,o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:return e=zx(t),r=Gx(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:Ux})},[4,Qx(function(){return fetch(e,i)})];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:Kx(s.authToken)}];case 3:return[4,Wx("Create Installation",o)];case 4:throw a.sent()}})})}function Yx(t){return new Promise(function(e){setTimeout(e,t)})}var Xx=/^[cdef][\w-]{21}$/;function Zx(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(s_.f)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return Xx.test(e)?e:""}catch(n){return""}}function tN(t){return t.appName+"!"+t.appId}var eN=new Map;function nN(t,e){var n=tN(t);rN(n,e),function(t,e){var n=oN();n&&n.postMessage({key:t,fid:e}),sN()}(n,e)}function rN(t,e){var n,r,i=eN.get(t);if(i)try{for(var o=Object(s_.h)(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var iN=null;function oN(){return!iN&&"BroadcastChannel"in self&&((iN=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){rN(t.data.key,t.data.fid)}),iN}function sN(){0===eN.size&&iN&&(iN.close(),iN=null)}var aN,uN="firebase-installations-store",cN=null;function lN(){return cN||(cN=Object(Vx.openDb)("firebase-installations-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(uN)}})),cN}function hN(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:return n=tN(t),[4,lN()];case 1:return r=a.sent(),i=r.transaction(uN,"readwrite"),[4,(o=i.objectStore(uN)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||nN(t,e.fid),[2,e]}})})}function fN(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return e=tN(t),[4,lN()];case 1:return n=i.sent(),[4,(r=n.transaction(uN,"readwrite")).objectStore(uN).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function dN(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(s_.d)(this,function(u){switch(u.label){case 0:return n=tN(t),[4,lN()];case 1:return r=u.sent(),i=r.transaction(uN,"readwrite"),[4,(o=i.objectStore(uN)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||nN(t,a.fid),[2,a]}})})}function pN(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return[4,dN(t,function(n){var r=function(t){return vN(t||{fid:Zx(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Bx.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Jx(t,e)];case 1:return n=i.sent(),[2,hN(t,n)];case 2:return Hx(r=i.sent())&&409===r.customData.serverCode?[4,fN(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,hN(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:mN(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry})];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function mN(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n,r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return[4,gN(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,Yx(100)];case 3:return o.sent(),[4,gN(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,pN(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}function gN(t){return dN(t,function(t){if(!t)throw Bx.create("installation-not-found");return vN(t)})}function vN(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function yN(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(s_.b)(this,void 0,void 0,function(){var t,i,o,s,a;return Object(s_.d)(this,function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return zx(t)+"/"+n+"/authTokens:generate"}(n,e),i=$x(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Ux}})},[4,Qx(function(){return fetch(t,s)})];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,Kx(u.sent())];case 3:return[4,Wx("Generate Auth Token",a)];case 4:throw u.sent()}})})}function bN(t,e){return void 0===e&&(e=!1),Object(s_.b)(this,void 0,void 0,function(){var n,r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return[4,dN(t.appConfig,function(r){if(!wN(r))throw Bx.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return[4,_N(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Yx(100)];case 3:return i.sent(),[4,_N(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,bN(t,e)]:[2,r]}})})}(t,e),r;if(!navigator.onLine)throw Bx.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(s_.a)(Object(s_.a)({},t),{authToken:e})}(r);return n=function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,yN(t,e)];case 1:return n=o.sent(),i=Object(s_.a)(Object(s_.a)({},e),{authToken:n}),[4,hN(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!Hx(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,fN(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(s_.a)(Object(s_.a)({},e),{authToken:{requestStatus:0}}),[4,hN(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(t,s),s})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function _N(t){return dN(t,function(t){if(!wN(t))throw Bx.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object(s_.a)(Object(s_.a)({},t),{authToken:{requestStatus:0}}):t})}function wN(t){return void 0!==t&&2===t.registrationStatus}function EN(t){return Object(s_.b)(this,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return[4,pN(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function CN(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(s_.d)(this,function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return zx(t)+"/"+n}(t,e),r=$x(t,e),i={method:"DELETE",headers:r},[4,Qx(function(){return fetch(n,i)})];case 1:return(o=s.sent()).ok?[3,3]:[4,Wx("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}})})}function TN(t){return Bx.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new Ix.a("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw TN("App Configuration");if(!t.name)throw TN("App Name");try{for(var r=Object(s_.h)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw TN(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return[4,pN(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):bN(t).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(n){switch(n.label){case 0:return[4,EN(t.appConfig)];case 1:return n.sent(),[4,bN(t,e)];case 2:return[2,n.sent().token]}})})}(n,t)},delete:function(){return function(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return[4,dN(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Bx.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Bx.create("app-offline");case 3:return[4,CN(e,n)];case 4:return r.sent(),[4,fN(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){oN();var n=tN(t),r=eN.get(n);r||(r=new Set,eN.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=tN(t),r=eN.get(n);r&&(r.delete(e),0===r.size&&eN.delete(n),sN())}(n,e)}}(n,t)}}},"PUBLIC")),t.registerVersion("@firebase/installations","0.4.19")}(ng.a);var SN=((aN={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',aN["only-available-in-window"]="This method is available in a Window context.",aN["only-available-in-sw"]="This method is available in a service worker context.",aN["permission-default"]="The notification permission was not granted and dismissed instead.",aN["permission-blocked"]="The notification permission was not granted and blocked instead.",aN["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",aN["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",aN["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",aN["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",aN["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",aN["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",aN["token-update-no-token"]="FCM returned no token when updating the user to push.",aN["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",aN["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",aN["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",aN["invalid-vapid-key"]="The public VAPID key must be a string.",aN["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",aN),IN=new ig.b("messaging","Messaging",SN),ON="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",kN=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function AN(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(s_.f)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xN(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var NN="fcm_token_details_db",RN="fcm_token_object_Store";function PN(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n=this;return Object(s_.d)(this,function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map(function(t){return t.name}).includes(NN))return[2,null];r.label=2;case 2:return e=null,[4,Object(Vx.openDb)(NN,5,function(r){return Object(s_.b)(n,void 0,void 0,function(){var n,i,o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(RN)?[4,(n=r.transaction.objectStore(RN)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:AN(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:AN(o.auth),p256dh:AN(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:AN(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,Object(Vx.deleteDb)(NN)];case 4:return r.sent(),[4,Object(Vx.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,Object(Vx.deleteDb)("undefined")];case 6:return r.sent(),[2,DN(e)?e:null]}})})}function DN(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var jN="firebase-messaging-store",LN=null;function MN(){return LN||(LN=Object(Vx.openDb)("firebase-messaging-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(jN)}})),LN}function FN(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return e=qN(t),[4,MN()];case 1:return[4,i.sent().transaction(jN).objectStore(jN).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,PN(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,VN(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function VN(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return n=qN(t),[4,MN()];case 1:return r=o.sent(),[4,(i=r.transaction(jN,"readwrite")).objectStore(jN).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function UN(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return e=qN(t),[4,MN()];case 1:return n=i.sent(),[4,(r=n.transaction(jN,"readwrite")).objectStore(jN).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function qN(t){return t.appConfig.appId}function BN(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:return[4,WN(t)];case 1:n=a.sent(),r=GN(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(KN(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),IN.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw IN.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw IN.create("token-subscribe-no-token");return[2,o.token]}})})}function HN(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:return[4,WN(t)];case 1:n=a.sent(),r=GN(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(KN(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),IN.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw IN.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw IN.create("token-update-no-token");return[2,o.token]}})})}function zN(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(s_.d)(this,function(s){switch(s.label){case 0:return[4,WN(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(KN(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw IN.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),IN.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function KN(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function WN(t){var e=t.appConfig,n=t.installations;return Object(s_.b)(this,void 0,void 0,function(){var t;return Object(s_.d)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}})})}function GN(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==ON&&(n.web.applicationPubKey=e),n}function $N(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw IN.create("permission-blocked");return[4,XN(e,n)];case 1:return r=a.sent(),[4,FN(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:AN(r.getKey("auth")),p256dh:AN(r.getKey("p256dh"))},i?[3,3]:[2,YN(t,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,zN(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,YN(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,JN({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l})})}function QN(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return[4,FN(t)];case 1:return(n=i.sent())?[4,zN(t,n.token)]:[3,4];case 2:return i.sent(),[4,UN(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function JN(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i,o;return Object(s_.d)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,HN(e,t)];case 1:return r=s.sent(),i=Object(s_.a)(Object(s_.a)({},t),{token:r,createTime:Date.now()}),[4,VN(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,QN(e,n)];case 4:throw s.sent(),o;case 5:return[2]}})})}function YN(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return[4,BN(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,VN(t,r)];case 2:return i.sent(),[2,r.token]}})})}function XN(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:xN(e)})]}})})}function ZN(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function tR(t){return new Promise(function(e){setTimeout(e,t)})}var eR=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw IN.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(s_.b)(this,void 0,void 0,function(){var n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,FN(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:ON,r.label=2;case 2:return[2,$N(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return QN(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw IN.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw IN.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw IN.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw IN.create("only-available-in-window")},t.prototype.onMessage=function(){throw IN.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw IN.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n,r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,oR()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(n=o.sent())?[2,iR(n,e)]:(r=!1,e.notification?[4,sR(nR(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,tR(1e3)]);case 4:return o.sent(),[2]}})})},t.prototype.onSubChange=function(t){var e,n;return Object(s_.b)(this,void 0,void 0,function(){var r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,QN(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,FN(this.firebaseDependencies)];case 3:return r=i.sent(),[4,QN(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,$N(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:ON)];case 5:return i.sent(),[2]}})})},t.prototype.onNotificationClick=function(t){var e,n;return Object(s_.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(s_.d)(this,function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(ZN(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,rR(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,tR(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=kN.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}})})},t}();function nR(t){var e,n=Object(s_.a)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function rR(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Object(s_.d)(this,function(u){switch(u.label){case 0:return[4,oR()];case 1:e=u.sent();try{for(n=Object(s_.h)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}function iR(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=kN.PUSH_RECEIVED;try{for(var i=Object(s_.h)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function oR(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function sR(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var aR=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===kN.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),ZN(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw IN.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,$N(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},t.prototype.updateVapidKey=function(t){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=ON),[2]})})},t.prototype.updateSwReg=function(t){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw IN.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},t.prototype.registerDefaultSw=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=n.sent(),IN.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},t.prototype.deleteToken=function(){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,QN(this.firebaseDependencies,this.swRegistration)]}})})},t.prototype.requestPermission=function(){return Object(s_.b)(this,void 0,void 0,function(){var t;return Object(s_.d)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw IN.create("denied"===t?"permission-blocked":"permission-default")}})})},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw IN.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw IN.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw IN.create("invalid-sw-registration");if(this.swRegistration)throw IN.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw IN.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw IN.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return n=function(t){switch(t){case kN.NOTIFICATION_CLICKED:return"notification_open";case kN.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function uR(t){return IN.create("missing-app-config-values",{valueName:t})}var cR={isSupported:lR};function lR(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}ng.a.INTERNAL.registerComponent(new Ix.a("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw uR("App Configuration Object");if(!t.name)throw uR("App Name");var r=t.options;try{for(var i=Object(s_.h)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw uR(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!lR())throw IN.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new eR(n):new aR(n)},"PUBLIC").setServiceProps(cR));var hR="firebasestorage.googleapis.com",fR=function(t){function e(n,r){var i=t.call(this,gR(n),"Firebase Storage: "+r+" ("+gR(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(s_.c)(e,t),e.prototype.codeEquals=function(t){return gR(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(ig.c),dR="canceled",pR="invalid-argument",mR="unsupported-environment";function gR(t){return"storage/"+t}function vR(){return new fR("unknown","An unknown error occurred, please check the error payload for server response.")}function yR(){return new fR(dR,"User canceled the upload/download.")}function bR(){return new fR("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function _R(t){return new fR(pR,t)}function wR(){return new fR("app-deleted","The Firebase app was deleted.")}function ER(t){return new fR("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function CR(t,e){return new fR("invalid-format","String does not match format '"+t+"': "+e)}function TR(t){throw new fR("internal-error","Internal error: "+t)}var SR={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},IR=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function OR(t,e){switch(t){case SR.RAW:return new IR(kR(e));case SR.BASE64:case SR.BASE64URL:return new IR(AR(t,e));case SR.DATA_URL:return new IR((n=new xR(e)).base64?AR(SR.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Ex){throw CR(SR.DATA_URL,"Malformed data URL.")}return kR(e)}(n.rest),new xR(e).contentType)}var n;throw vR()}function kR(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function AR(t,e){switch(t){case SR.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw CR(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case SR.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw CR(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(Ex){throw CR(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var xR=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw CR(SR.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),NR={STATE_CHANGED:"state_changed"},RR="running",PR="pausing",DR="paused",jR="success",LR="canceling",MR="canceled",FR="error",VR={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function UR(t){switch(t){case RR:case PR:case LR:return VR.RUNNING;case DR:return VR.PAUSED;case jR:return VR.SUCCESS;case MR:return VR.CANCELED;case FR:default:return VR.ERROR}}var qR=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),BR=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=qR.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=qR.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=qR.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw TR("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw TR("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw TR("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Ex){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw TR("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),HR=function(){function t(){}return t.prototype.createXhrIo=function(){return new BR},t}();function zR(t){return"string"==typeof t||t instanceof String}function KR(t){return WR()&&t instanceof Blob}function WR(){return"undefined"!=typeof Blob}function GR(t,e,n,r){if(r<e)throw new fR(pR,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new fR(pR,"Invalid value for '"+t+"'. Expected "+n+" or less.")}function $R(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function QR(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=$R();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(WR())return new Blob(t);throw new fR(mR,"This browser doesn't seem to support creating Blobs")}var JR=function(){function t(t,e){var n=0,r="";KR(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(KR(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(WR()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(QR.apply(null,r))}var i=e.map(function(t){return zR(t)?OR(SR.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),YR=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(Ex){return new t(e,"")}if(""===n.path)return n;throw new fR("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=hR.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),n=new t(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(t){return new fR("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function XR(t){var e,n;try{e=JSON.parse(t)}catch(Ex){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function ZR(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function tP(t){return"https://"+hR+"/v0"+t}function eP(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function nP(t,e){return e}var rP=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||nP}}(),iP=null;function oP(){if(iP)return iP;var t=[];t.push(new rP("bucket")),t.push(new rP("generation")),t.push(new rP("metageneration")),t.push(new rP("name","fullPath",!0));var e=new rP("name");e.xform=function(t,e){return function(t){return!zR(t)||t.length<2?t:ZR(t)}(e)},t.push(e);var n=new rP("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new rP("timeCreated")),t.push(new rP("updated")),t.push(new rP("md5Hash",null,!0)),t.push(new rP("cacheControl",null,!0)),t.push(new rP("contentDisposition",null,!0)),t.push(new rP("contentEncoding",null,!0)),t.push(new rP("contentLanguage",null,!0)),t.push(new rP("contentType",null,!0)),t.push(new rP("metadata","customMetadata",!0)),iP=t}function sP(t,e,n){var r=XR(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new YR(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function aP(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var uP=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function cP(t){if(!t)throw vR()}function lP(t,e){return function(n,r){var i=sP(t,r,e);return cP(null!==i),i}}function hP(t){return function(e,n){var r;return(r=401===e.getStatus()?new fR("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new fR("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new fR("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function fP(t){var e=hP(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new fR("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function dP(t,e,n){var r=tP(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new uP(r,"GET",lP(t,n),i);return o.errorHandler=fP(e),o}function pP(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var mP=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function gP(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Ex){cP(!1)}return cP(!!n&&-1!==(e||["active"]).indexOf(n)),n}var vP=262144,yP=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}(),bP=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function _P(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var wP=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=oP(),this._resumable=this._shouldDoResumable(this._blob),this._state=RR,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(dR)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(FR))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(dR)?r.completeTransitions_():(r._error=t,r._transition(FR))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===RR&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then(function(n){switch(e._state){case RR:t(n);break;case LR:e._transition(MR);break;case PR:e._transition(DR)}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=pP(e,r,i),a={name:s.fullPath},u=tP(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=aP(s,n),h=new uP(u,"POST",function(t){var e;gP(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Ex){cP(!1)}return cP(zR(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=hP(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n){var r=function(t,e,n,r){var i=new uP(n,"POST",function(t){var e=gP(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Ex){cP(!1)}n||cP(!1);var i=Number(n);return cP(!isNaN(i)),new mP(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=hP(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=vP*this._chunkMultiplier,n=new mP(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new mP(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new fR("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw bR();var p=new uP(n,"POST",function(t,n){var i,s=gP(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?lP(e,o)(t,n):null,new mP(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=hP(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Ex){return t._error=Ex,void t._transition(FR)}var s=t._ref.storage.makeRequest(o,i);t._request=s,s.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(jR)):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){vP*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e){var n=dP(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition(jR)},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=pP(e,r,i),c=aP(u,n),l=JR.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw bR();var h={name:u.fullPath},f=tP(o),d=t.maxUploadRetryTime,p=new uP(f,"POST",lP(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=hP(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(jR)},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case LR:case PR:this._state=t,void 0!==this._request&&this._request.cancel();break;case RR:var e=this._state===DR;this._state=t,e&&(this._notifyObservers(),this._start());break;case DR:this._state=t,this._notifyObservers();break;case MR:this._error=yR(),this._state=t,this._notifyObservers();break;case FR:case jR:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case PR:this._transition(DR);break;case LR:this._transition(MR);break;case RR:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=UR(this._state);return new bP(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new yP(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(UR(this._state)){case VR.SUCCESS:_P(this._resolve.bind(null,this.snapshot))();break;case VR.CANCELED:case VR.ERROR:_P(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(UR(this._state)){case VR.RUNNING:case VR.PAUSED:t.next&&_P(t.next.bind(t,this.snapshot))();break;case VR.SUCCESS:t.complete&&_P(t.complete.bind(t))();break;case VR.CANCELED:case VR.ERROR:t.error&&_P(t.error.bind(t,this._error))();break;default:t.error&&_P(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===DR||this._state===PR;return t&&this._transition(RR),t},t.prototype.pause=function(){var t=this._state===RR;return t&&this._transition(PR),t},t.prototype.cancel=function(){var t=this._state===RR||this._state===PR;return t&&this._transition(LR),t},t}(),EP=function(){function t(t,e){this._service=t,this._location=e instanceof YR?e:YR.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new YR(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return ZR(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new YR(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw ER(t)},t}();function CP(t){var e={prefixes:[],items:[]};return TP(t,e).then(function(){return e})}function TP(t,e,n){return Object(s_.b)(this,void 0,void 0,function(){var r,i,o;return Object(s_.d)(this,function(s){switch(s.label){case 0:return[4,SP(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,TP(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function SP(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r,i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&GR("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=tP(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new uP(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=XR(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new YR(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t.makeStorageReference(new YR(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return cP(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=hP(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}})})}function IP(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new YR(t._location.bucket,n);return new EP(t.storage,r)}var OP=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),kP=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new OP(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new OP(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new OP(t,i,i._ref))}:{next:e.next?function(t){return e.next(new OP(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),AP=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new xP(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new xP(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),xP=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(IP(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new kP(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new wP(t,new JR(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=SR.RAW),this._throwIfRoot("putString"),new kP(function(t,e,n,r){void 0===n&&(n=SR.RAW),t._throwIfRoot("putString");var i=OR(n,e),o=Object(s_.a)({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new wP(t,new JR(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t=this;return CP(this._delegate).then(function(e){return new AP(e,t.storage)})},t.prototype.list=function(t){var e=this;return SP(this._delegate,t).then(function(t){return new AP(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=dP(t.storage,t._location,oP()),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r;return Object(s_.d)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=tP(e.fullServerUrl()),o=aP(n,r),s=t.maxOperationRetryTime,a=new uP(i,"PATCH",lP(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=fP(e),a}(t.storage,t._location,e,oP()),[2,t.storage.makeRequest(r,n).getPromise()]}})})}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=tP(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new uP(r,"GET",function(t,e){return function(n,r){var i=sP(t,r,e);return cP(null!==i),function(t,e){var n=XR(e);if(null===n)return null;if(!zR(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.fullPath;return tP("/b/"+i(t.bucket)+"/o/"+i(n))+eP({alt:"media",token:e})})[0]}(i,r)}}(t,n),i);return o.errorHandler=fP(e),o}(t.storage,t._location,oP()),[2,t.storage.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new fR("no-download-url","The given file does not have any download URLs.");return t})]}})})}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=tP(e.fullServerUrl()),r=new uP(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=fP(e),r}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw ER(t)},t}(),NP=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),RP=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(Ex){o(Ex)}else null!==s?((r=vR()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?wR():yR():new fR("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new PP(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new PP(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===qR.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new PP(s,n))}else{var a=n.getErrorCode()===qR.ABORT;e(!1,new PP(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(s_.g)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(s_.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),PP=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function DP(t){return/^[A-Za-z]+:\/\//.test(t)}function jP(t,e){if(t instanceof MP){var n=t;if(null==n._bucket)throw new fR("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new EP(n,n._bucket);return null!=e?jP(r,e):r}if(void 0!==e){if(e.includes(".."))throw _R('`path` param cannot contain ".."');return IP(t,e)}return t}function LP(t,e){if(e&&DP(e)){if(t instanceof MP)return new EP(t,e);throw _R("To use ref(service, url), the first argument must be a Storage instance.")}return jP(t,e)}var MP=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?YR.makeFromBucketSpec(r):null==(o=null==(i=this.app.options)?void 0:i.storageBucket)?null:YR.makeFromBucketSpec(o)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){GR("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){GR("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new EP(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new NP(wR());var r=function(t,e,n,r){var i=eP(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==ng.a?ng.a.SDK_VERSION:"AppManager")}(s),new RP(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},t}(),FP=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(DP(t))throw _R("ref() expected a child path but got a URL, use refFromURL instead.");return new xP(LP(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!DP(t))throw _R("refFromURL() expected a full URL but got a child path, use ref() instead.");try{YR.makeFromUrl(t)}catch(Ex){throw _R("refFromUrl() expected a valid full URL but got an invalid one.")}return new xP(LP(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function VP(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new FP(n,new MP(n,r,new HR,e))}!function(t){var e={TaskState:VR,TaskEvent:NR,StringFormat:SR,Storage:MP,Reference:xP};t.INTERNAL.registerComponent(new Ix.a("storage",VP,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.2")}(ng.a);var UP,qP,BP,HP="0.4.5",zP=HP,KP="FB-PERF-TRACE-MEASURE",WP="_wt_",GP="_fcp",$P="_fid",QP="@firebase/performance/config",JP="@firebase/performance/configexpire",YP="Performance",XP=((UP={})["trace started"]="Trace {$traceName} was started before.",UP["trace stopped"]="Trace {$traceName} is not running.",UP["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",UP["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",UP["no window"]="Window is not available.",UP["no app id"]="App id is not available.",UP["no project id"]="Project id is not available.",UP["no api key"]="Api key is not available.",UP["invalid cc log"]="Attempted to queue invalid cc event",UP["FB not default"]="Performance can only start when Firebase app instance is the default one.",UP["RC response not ok"]="RC response is not ok",UP["invalid attribute name"]="Attribute name {$attributeName} is invalid.",UP["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",UP["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",UP["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",UP),ZP=new ig.b("performance",YP,XP),tD=new rg.b(YP);tD.logLevel=rg.a.INFO;var eD,nD=function(){function t(t){if(this.window=t,!t)throw ZP.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(ig.w)()||(tD.info("IndexedDB is not supported by current browswer"),!1):(tD.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===qP&&(qP=new t(BP)),qP},t}();function rD(t,e){var n=t.length-e.length;if(n<0||n>1)throw ZP.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var iD,oD=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=rD("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=rD("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw ZP.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw ZP.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw ZP.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===eD&&(eD=new t),eD},t}();function sD(){return iD}var aD=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),uD=["firebase_","google_","ga_"],cD=new RegExp("^[a-zA-Z]\\w*$");function lD(){var t=nD.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function hD(){switch(nD.getInstance().document.visibilityState){case"visible":return aD.VISIBLE;case"hidden":return aD.HIDDEN;default:return aD.UNKNOWN}}function fD(){var t=nD.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function dD(t){if(!t)return t;var e=oD.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=pD(e.tracesSamplingRate),e.logNetworkAfterSampling=pD(e.networkRequestsSamplingRate),t}function pD(t){return Math.random()<=t}var mD,gD=1;function vD(){return gD=2,mD=mD||function(){var t=nD.getInstance().document;return new Promise(function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}().then(function(){return(t=oD.getInstance().installationsService.getId()).then(function(t){iD=t}),t;var t}).then(function(t){return function(t){var e=function(){var t=nD.getInstance().localStorage;if(t){var e=t.getItem(JP);if(e&&Number(e)>Date.now()){var n=t.getItem(QP);if(n)try{return JSON.parse(n)}catch(r){return}}}}();return e?(dD(e),Promise.resolve()):function(t){return(e=oD.getInstance().installationsService.getToken(),e.then(function(t){}),e).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+oD.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+oD.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:oD.getInstance().getAppId(),app_version:zP,sdk_version:"0.0.1"})});return fetch(r).then(function(t){if(t.ok)return t.json();throw ZP.create("RC response not ok")})}).catch(function(){tD.info("Could not fetch config, will use default configs")});var e}(t).then(dD).then(function(t){return function(t){var e=nD.getInstance().localStorage;t&&e&&(e.setItem(QP,JSON.stringify(t)),e.setItem(JP,String(Date.now()+60*oD.getInstance().configTimeToLive*60*1e3)))}(t)},function(){})}(t)}).then(function(){return yD()},function(){return yD()})}function yD(){gD=3}var bD,_D=1e4,wD=3,ED=[],CD=!1;function TD(t){setTimeout(function(){var t,e;if(0!==wD)return ED.length?(e=(t=ED.splice(0,1e3)).map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,e){return function(t){var e=oD.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||tD.info("Call to Firebase backend failed."),t.json()}).then(function(t){var n=Number(t.nextRequestWaitMillis),r=_D;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(ED=Object(s_.g)(e,ED),tD.info("Retry transport request later.")),wD=3,TD(r)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:oD.getInstance().logSource,log_event:e},t).catch(function(){ED=Object(s_.g)(t,ED),wD--,tD.info("Tries left: "+wD+"."),TD(_D)})):TD(_D)},t)}function SD(t){if(!t.eventTime||!t.message)throw ZP.create("invalid cc log");ED=Object(s_.g)(ED,[t])}function ID(t,e){var n;bD||(n=AD,bD=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];SD({message:n.apply(void 0,t),eventTime:Date.now()})}),bD(t,e)}function OD(t){var e=oD.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&nD.getInstance().requiredApisAvailable()&&(t.isAuto&&hD()!==aD.VISIBLE||(3===gD?kD(t):vD().then(function(){return kD(t)},function(){return kD(t)})))}function kD(t){if(sD()){var e=oD.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return ID(t,1)},0)}}function AD(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:xD(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:xD(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function xD(){return{google_app_id:oD.getInstance().getAppId(),app_instance_id:sD(),web_app_info:{sdk_version:zP,page_url:nD.getInstance().getUrl(),service_worker_status:lD(),visibility_state:hD(),effective_connection_type:fD()},application_process_state:0}}var ND=["_fp",GP,$P],RD=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=nD.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw ZP.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw ZP.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),OD(this)},t.prototype.record=function(t,e,n){if(t<=0)throw ZP.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw ZP.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(s_.a)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}OD(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith(WP)&&ND.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw ZP.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(n=e,(r=Math.floor(n))<n&&tD.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40||uD.some(function(e){return t.startsWith(e)})||!t.match(cD))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw ZP.create("invalid attribute name",{attributeName:t});if(!r)throw ZP.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(s_.a)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=nD.getInstance().getUrl();if(i){var o=new t(WP+i,!0),s=Math.floor(1e3*nD.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find(function(t){return"first-paint"===t.name});a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find(function(t){return"first-contentful-paint"===t.name});u&&u.startTime&&o.putMetric(GP,Math.floor(1e3*u.startTime)),r&&o.putMetric($P,Math.floor(1e3*r))}OD(o)}},t.createUserTimingTrace=function(e){OD(new t(e,!1,e))},t}();function PD(t){var e=t;if(e&&void 0!==e.responseStart){var n=nD.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=oD.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return ID(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function DD(){sD()&&(setTimeout(function(){return function(){var t=nD.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){RD.createOobTrace(e,n),r=void 0},5e3);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),RD.createOobTrace(e,n,t))})}else RD.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=nD.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)PD(n[e]);t.setupObserver("resource",PD)}()},0),setTimeout(function(){return function(){for(var t=nD.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)jD(n[e]);t.setupObserver("measure",jD)}()},0))}function jD(t){var e=t.name;e.substring(0,KP.length)!==KP&&RD.createUserTimingTrace(e)}var LD=function(){function t(t){this.app=t,nD.getInstance().requiredApisAvailable()&&Object(ig.N)().then(function(t){t&&(CD||(TD(5500),CD=!0),vD().then(DD,DD))}).catch(function(t){tD.info("Environment doesn't support IndexedDB: "+t)})}return t.prototype.trace=function(t){return new RD(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return oD.getInstance().instrumentationEnabled},set:function(t){oD.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return oD.getInstance().dataCollectionEnabled},set:function(t){oD.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new Ix.a("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw ZP.create("FB not default");if("undefined"==typeof window)throw ZP.create("no window");return function(t){BP=t}(window),oD.getInstance().firebaseAppInstance=t,oD.getInstance().installationsService=e,new LD(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),t.registerVersion("@firebase/performance",HP)}(ng.a);var MD,FD="https://www.googletagmanager.com/gtag/js",VD=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),UD=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),qD=new rg.b("@firebase/analytics");function BD(t,e,n,r,i,o){return Object(s_.b)(this,void 0,void 0,function(){var s,a,u,c;return Object(s_.d)(this,function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find(function(t){return t.measurementId===i}))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),qD.error(c),[3,8];case 8:return t(VD.CONFIG,i,o),[2]}})})}function HD(t,e,n,r,i){return Object(s_.b)(this,void 0,void 0,function(){var o,s,a,u,c,l,h;return Object(s_.d)(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),u=function(t){var n=a.find(function(e){return e.measurementId===t}),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(VD.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),qD.error(h),[3,5];case 5:return[2]}})})}var zD=((MD={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",MD["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",MD["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",MD["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",MD["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",MD["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",MD["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",MD["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',MD["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',MD),KD=new ig.b("analytics","Analytics",zD),WD=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function GD(t){var e;return Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(s_.d)(this,function(u){switch(u.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return a=u.sent(),(null===(e=a.error)||void 0===e?void 0:e.message)&&(s=a.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw KD.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var c})})}function $D(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=WD),Object(s_.b)(this,void 0,void 0,function(){var e,s,a,u,c,l,h;return Object(s_.d)(this,function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,QD(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return qD.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,GD(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof ig.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return qD.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?Object(ig.j)(o,r.intervalMillis,30):Object(ig.j)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),qD.debug("Calling attemptFetch again in "+l+" millis"),[2,$D(t,h,n,r)];case 7:return[2]}})})}function QD(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(KD.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var JD,YD,XD=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),ZD={},tj=[],ej={},nj="dataLayer",rj="gtag",ij=!1;function oj(t){if(ij)throw KD.create("already-initialized");t.dataLayerName&&(nj=t.dataLayerName),t.gtagName&&(rj=t.gtagName)}var sj="analytics";function aj(){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(t){switch(t.label){case 0:if(Object(ig.s)())return[2,!1];if(!Object(ig.e)())return[2,!1];if(!Object(ig.w)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(ig.N)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function(t){t.INTERNAL.registerComponent(new Ix.a(sj,function(t){return function(t,e){!function(){var t=[];if(Object(ig.s)()&&t.push("This is a browser extension environment."),Object(ig.e)()||t.push("Cookies are not available."),t.length>0){var e=t.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=KD.create("invalid-analytics-context",{errorInfo:e});qD.warn(n.message)}}();var n=t.options.appId;if(!n)throw KD.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw KD.create("no-api-key");qD.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=ZD[n])throw KD.create("already-exists",{id:n});if(!ij){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(FD))return r}return null})()||function(t){var e=document.createElement("script");e.src=FD+"?l="+t,e.async=!0,document.head.appendChild(e)}(nj),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(nj);var r=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return Object(s_.b)(this,void 0,void 0,function(){var a;return Object(s_.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==VD.EVENT?[3,2]:[4,HD(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==VD.CONFIG?[3,4]:[4,BD(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(VD.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),qD.error(a),[3,7];case 7:return[2]}})})}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(ZD,tj,ej,nj,rj);YD=r.wrappedGtag,JD=r.gtagCore,ij=!0}return ZD[n]=function(t,e,n,r,i){return Object(s_.b)(this,void 0,void 0,function(){var o,s,a,u,c,l,h;return Object(s_.d)(this,function(f){switch(f.label){case 0:return(o=function(t,e,n){return void 0===e&&(e=WD),Object(s_.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u=this;return Object(s_.d)(this,function(c){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw KD.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw KD.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new XD,setTimeout(function(){return Object(s_.b)(u,void 0,void 0,function(){return Object(s_.d)(this,function(t){return a.abort(),[2]})})},6e4),[2,$D({appId:r,apiKey:i,measurementId:o},s,a,e)]})})}(t)).then(function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&qD.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return qD.error(t)}),e.push(o),s=function(){return Object(s_.b)(this,void 0,void 0,function(){var t;return Object(s_.d)(this,function(e){switch(e.label){case 0:return Object(ig.w)()?[3,1]:(qD.warn(KD.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(ig.N)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),qD.warn(KD.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?r.getId():void 0}),[4,Promise.all([o,s])];case 1:return a=f.sent(),u=a[0],c=a[1],i("js",new Date),(h={}).origin="firebase",h.update=!0,l=h,null!=c&&(l.firebase_id=c),i(VD.CONFIG,u.measurementId,l),[2,u.measurementId]}})})}(t,tj,ej,e,JD),{app:t,logEvent:function(t,e,r){(function(t,e,n,r,i){return Object(s_.b)(this,void 0,void 0,function(){var o,s;return Object(s_.d)(this,function(a){switch(a.label){case 0:return i&&i.global?(t(VD.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Object(s_.a)(Object(s_.a)({},r),{send_to:o}),t(VD.EVENT,n,s),a.label=3;case 3:return[2]}})})})(YD,ZD[n],t,e,r).catch(function(t){return qD.error(t)})},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(s_.b)(this,void 0,void 0,function(){var i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(VD.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(VD.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(YD,ZD[n],t,e).catch(function(t){return qD.error(t)})},setUserId:function(t,e){(function(t,e,n,r){return Object(s_.b)(this,void 0,void 0,function(){var i;return Object(s_.d)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(VD.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(VD.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(YD,ZD[n],t,e).catch(function(t){return qD.error(t)})},setUserProperties:function(t,e){(function(t,e,n,r){return Object(s_.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(s_.d)(this,function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)i["user_properties."+(a=s[o])]=n[a];return t(VD.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(VD.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}})})})(YD,ZD[n],t,e).catch(function(t){return qD.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}})})})(ZD[n],t).catch(function(t){return qD.error(t)})},INTERNAL:{delete:function(){return delete ZD[n],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:oj,EventName:UD,isSupported:aj})),t.INTERNAL.registerComponent(new Ix.a("analytics-internal",function(t){try{return{logEvent:t.getProvider(sj).getImmediate().logEvent}}catch(Ex){throw KD.create("interop-component-reg-failed",{reason:Ex})}},"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.2")}(ng.a);var uj,cj=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(s_.d)(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}})})},t}(),lj=((uj={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",uj["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",uj["registration-api-key"]="Undefined API key. Check Firebase app initialization.",uj["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",uj["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",uj["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",uj["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",uj["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",uj["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",uj["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',uj["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',uj["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",uj["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",uj),hj=new ig.b("remoteconfig","Remote Config",lj),fj=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,l,h,f,d,p,m,g;return Object(s_.d)(this,function(v){switch(v.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=v.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===y&&(y=navigator),y.languages&&y.languages[0]||y.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),a=new Promise(function(e,n){t.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)})}),v.label=2;case 2:return v.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return v.sent(),[4,s];case 4:return u=v.sent(),[3,6];case 5:throw c=v.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),hj.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];m=void 0,v.label=7;case 7:return v.trys.push([7,9,,10]),[4,u.json()];case 8:return m=v.sent(),[3,10];case 9:throw g=v.sent(),hj.create("fetch-client-parse",{originalErrorMessage:g.message});case 10:d=m.entries,p=m.state,v.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(d={}),304!==h&&200!==h)throw hj.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:d}]}var y})})},t}(),dj=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),pj=["1","true","t","yes","y","on"],mj=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&pj.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),gj=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=rg.a.DEBUG;break;case"silent":this._logger.logLevel=rg.a.SILENT;break;default:this._logger.logLevel=rg.a.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e,n;return Object(s_.d)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(s_.d)(this,function(i){switch(i.label){case 0:t=new dj,setTimeout(function(){return Object(s_.b)(r,void 0,void 0,function(){return Object(s_.d)(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof ig.c&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}})})},t.prototype.fetchAndActivate=function(){return Object(s_.b)(this,void 0,void 0,function(){return Object(s_.d)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(s_.a)(Object(s_.a)({},t),e))).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new mj("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new mj("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new mj("static"))},t}();function vj(t,e){var n=t.target.error||void 0;return hj.create(e,{originalErrorMessage:n&&n.message})}var yj="app_namespace_store",bj=function(){function t(t,e,n,r){void 0===r&&(r=new Promise(function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(vj(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(yj,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n=this;return Object(s_.d)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([yj],"readonly").objectStore(yj),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(vj(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(Ex){i(hj.create("storage-get",{originalErrorMessage:Ex&&Ex.message}))}})]}})})},t.prototype.set=function(t,e){return Object(s_.b)(this,void 0,void 0,function(){var n,r=this;return Object(s_.d)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var s=n.transaction([yj],"readwrite").objectStore(yj),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(vj(t,"storage-set"))},u.onsuccess=function(){i()}}catch(Ex){o(hj.create("storage-set",{originalErrorMessage:Ex&&Ex.message}))}})]}})})},t.prototype.delete=function(t){return Object(s_.b)(this,void 0,void 0,function(){var e,n=this;return Object(s_.d)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([yj],"readwrite").objectStore(yj),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(vj(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(Ex){i(hj.create("storage-delete",{originalErrorMessage:Ex&&Ex.message}))}})]}})})},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),_j=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(s_.b)(this,void 0,void 0,function(){var t,e,n,r,i,o;return Object(s_.d)(this,function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}})})},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function wj(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(hj.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var Ej,Cj=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(s_.b)(this,void 0,void 0,function(){var e;return Object(s_.d)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(s_.b)(this,void 0,void 0,function(){var e,i,o;return Object(s_.d)(this,function(s){switch(s.label){case 0:return[4,wj(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof ig.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Object(ig.j)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}})})},t}(),Tj="@firebase/remote-config";(Ej=ng.a).INTERNAL.registerComponent(new Ix.a("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw hj.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw hj.create("registration-project-id");if(!s)throw hj.create("registration-api-key");if(!a)throw hj.create("registration-app-id");var u=new bj(a,n.name,e=e||"firebase"),c=new _j(u),l=new rg.b(Tj);l.logLevel=rg.a.ERROR;var h=new fj(r,Ej.SDK_VERSION,e,o,s,a),f=new Cj(h,u),d=new cj(f,u,c,l),p=new gj(n,d,c,u,l);return p.ensureInitialized(),p},"PUBLIC").setMultipleInstances(!0)),Ej.registerVersion(Tj,"0.1.30"),ng.a.registerVersion("firebase","8.2.1","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),ng.a.registerVersion("firebase","8.2.1");let Sj=(()=>{class t{constructor(){}createNewUser(t,e){return new Promise((n,r)=>{ng.a.auth().createUserWithEmailAndPassword(t,e).then(()=>{n()},t=>{r(t)})})}signInUser(t,e){return new Promise((n,r)=>{ng.a.auth().signInWithEmailAndPassword(t,e).then(()=>{n()},t=>{r(t)})})}signOutUser(){ng.a.auth().signOut()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ij=(()=>{class t{constructor(t,e,n){this.formBuilder=t,this.authService=e,this.router=n}ngOnInit(){this.initForm()}initForm(){this.signupForm=this.formBuilder.group({email:["",[Bp.required,Bp.email]],password:["",[Bp.required,Bp.pattern(/[0-9a-zA-Z]{6,}/)]]})}onSubmit(){const t=this.signupForm.get("email").value,e=this.signupForm.get("password").value;this.authService.createNewUser(t,e).then(()=>{this.router.navigate(["/books"])},t=>{this.errorMessage=t})}}return t.\u0275fac=function(e){return new(e||t)(ps(Zm),ps(Sj),ps(cp))},t.\u0275cmp=Vt({type:t,selectors:[["app-signup"]],decls:17,vars:3,consts:[[1,"row"],[1,"col"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"]],template:function(t,e){1&t&&(vs(0,"div",0),vs(1,"div",1),vs(2,"h2"),Bs(3,"Cr\xe9er un compte"),ys(),vs(4,"form",2),Ss("ngSubmit",function(){return e.onSubmit()}),vs(5,"div",3),vs(6,"label",4),Bs(7,"Adresse mail"),ys(),bs(8,"input",5),ys(),vs(9,"div",3),vs(10,"label",6),Bs(11,"Mot de passe"),ys(),bs(12,"input",7),ys(),vs(13,"button",8),Bs(14,"Cr\xe9er mon compte"),ys(),ys(),vs(15,"p",9),Bs(16),ys(),ys(),ys()),2&t&&(qi(4),ms("formGroup",e.signupForm),qi(9),ms("disabled",e.signupForm.invalid),qi(3),Hs(e.errorMessage))},directives:[zm,om,Qm,Lp,im,Ym],styles:[""]}),t})(),Oj=(()=>{class t{constructor(t,e,n){this.formBuilder=t,this.authService=e,this.router=n}ngOnInit(){this.initForm()}initForm(){this.signinForm=this.formBuilder.group({email:["",[Bp.required,Bp.email]],password:["",[Bp.required,Bp.pattern(/[0-9a-zA-Z]{6,}/)]]})}onSubmit(){const t=this.signinForm.get("email").value,e=this.signinForm.get("password").value;this.authService.signInUser(t,e).then(()=>{this.router.navigate(["/books"])},t=>{this.errorMessage=t})}}return t.\u0275fac=function(e){return new(e||t)(ps(Zm),ps(Sj),ps(cp))},t.\u0275cmp=Vt({type:t,selectors:[["app-signin"]],decls:17,vars:3,consts:[[1,"row"],[1,"col"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"]],template:function(t,e){1&t&&(vs(0,"div",0),vs(1,"div",1),vs(2,"h2"),Bs(3,"Se Connecter"),ys(),vs(4,"form",2),Ss("ngSubmit",function(){return e.onSubmit()}),vs(5,"div",3),vs(6,"label",4),Bs(7,"Adresse mail"),ys(),bs(8,"input",5),ys(),vs(9,"div",3),vs(10,"label",6),Bs(11,"Mot de passe"),ys(),bs(12,"input",7),ys(),vs(13,"button",8),Bs(14,"Connexion"),ys(),ys(),vs(15,"p",9),Bs(16),ys(),ys(),ys()),2&t&&(qi(4),ms("formGroup",e.signinForm),qi(9),ms("disabled",e.signinForm.invalid),qi(3),Hs(e.errorMessage))},directives:[zm,om,Qm,Lp,im,Ym],styles:[""]}),t})(),kj=(()=>{class t{constructor(){this.books=[],this.booksSubject=new C,this.getBooks()}emitBooks(){this.booksSubject.next(this.books)}saveBooks(){ng.a.database().ref("/books").set(this.books)}getBooks(){ng.a.database().ref("/books").on("value",t=>{this.books=t.val()?t.val():[],this.emitBooks()})}getSingleBook(t){return new Promise((e,n)=>{ng.a.database().ref("/books/"+t).once("value").then(t=>{e(t.val())},t=>{n(t)})})}createNewBook(t){this.books.push(t),this.saveBooks(),this.emitBooks()}removeBook(t){const e=this.books.findIndex(e=>{if(e===t)return!0});this.books.splice(e,1),this.saveBooks(),this.emitBooks()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Aj(t,e){if(1&t){const t=Es();vs(0,"button",5),Ss("click",function(){Ne(t);const n=e.index;return ks().onViewBook(n)}),vs(1,"h3",6),Bs(2),vs(3,"button",7),Ss("click",function(){Ne(t);const n=e.$implicit;return ks().onDeleteBook(n)}),bs(4,"span",8),ys(),ys(),vs(5,"p",9),Bs(6),ys(),ys()}if(2&t){const t=e.$implicit;qi(2),zs(" ",t.title," "),qi(4),Hs(t.author)}}let xj=(()=>{class t{constructor(t,e){this.booksService=t,this.router=e}ngOnInit(){this.booksSubscription=this.booksService.booksSubject.subscribe(t=>{this.books=t}),this.booksService.emitBooks()}onNewBook(){this.router.navigate(["/books","new"])}onDeleteBook(t){this.booksService.removeBook(t)}onViewBook(t){this.router.navigate(["/books","view",t])}ngOnDestroy(){this.booksSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(ps(kj),ps(cp))},t.\u0275cmp=Vt({type:t,selectors:[["app-book-list"]],decls:8,vars:1,consts:[[1,"row"],[1,"col"],[1,"list-group"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"list-group-item",3,"click"],[1,"list-group-item-heading"],[1,"btn","btn-default","pull-right",3,"click"],[1,"glyphicon","glyphicon-minus"],[1,"list-group-item-text"]],template:function(t,e){1&t&&(vs(0,"div",0),vs(1,"div",1),vs(2,"h2"),Bs(3,"Vos livres"),ys(),vs(4,"div",2),ds(5,Aj,7,2,"button",3),ys(),vs(6,"button",4),Ss("click",function(){return e.onNewBook()}),Bs(7,"Nouveau livre"),ys(),ys(),ys()),2&t&&(qi(5),ms("ngForOf",e.books))},directives:[el],styles:[""]}),t})();class Nj{constructor(t,e){this.title=t,this.author=e}}let Rj=(()=>{class t{constructor(t,e,n){this.route=t,this.booksService=e,this.router=n}ngOnInit(){this.book=new Nj("",""),this.booksService.getSingleBook(+this.route.snapshot.params.id).then(t=>{this.book=t})}onBack(){this.router.navigate(["/books"])}}return t.\u0275fac=function(e){return new(e||t)(ps(Kf),ps(kj),ps(cp))},t.\u0275cmp=Vt({type:t,selectors:[["app-single-book"]],decls:10,vars:3,consts:[[1,"row"],[1,"col"],[1,"btn","btn-default",3,"click"]],template:function(t,e){1&t&&(vs(0,"div",0),vs(1,"div",1),vs(2,"h1"),Bs(3),ys(),vs(4,"h3"),Bs(5),ys(),vs(6,"p"),Bs(7),ys(),vs(8,"button",2),Ss("click",function(){return e.onBack()}),Bs(9,"Retour"),ys(),ys(),ys()),2&t&&(qi(3),Hs(e.book.title),qi(2),Hs(e.book.author),qi(2),Hs(e.book.synopsis))},styles:[""]}),t})(),Pj=(()=>{class t{constructor(t,e,n){this.formBuilder=t,this.booksService=e,this.router=n}ngOnInit(){this.initForm()}initForm(){this.bookForm=this.formBuilder.group({title:["",Bp.required],author:["",Bp.required],synopsis:""})}onSaveBook(){const t=this.bookForm.get("title").value,e=this.bookForm.get("author").value,n=this.bookForm.get("synopsis").value,r=new Nj(t,e);r.synopsis=n,this.booksService.createNewBook(r),this.router.navigate(["/books"])}}return t.\u0275fac=function(e){return new(e||t)(ps(Zm),ps(kj),ps(cp))},t.\u0275cmp=Vt({type:t,selectors:[["app-book-form"]],decls:20,vars:2,consts:[[1,"row"],[1,"col-sm-8","col-sm-offset-2"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","title"],["type","text","id","title","formControlName","title",1,"form-control"],["for","author"],["type","text","id","author","formControlName","author",1,"form-control"],["for","synopsis"],["id","synopsis","formControlName","synopsis",1,"form-control"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(t,e){1&t&&(vs(0,"div",0),vs(1,"div",1),vs(2,"h2"),Bs(3,"Enregistrer un nouveau livre"),ys(),vs(4,"form",2),Ss("ngSubmit",function(){return e.onSaveBook()}),vs(5,"div",3),vs(6,"label",4),Bs(7,"Titre"),ys(),bs(8,"input",5),ys(),vs(9,"div",3),vs(10,"label",6),Bs(11,"Auteur"),ys(),bs(12,"input",7),ys(),vs(13,"div",3),vs(14,"label",8),Bs(15,"Synopsis"),ys(),vs(16,"textarea",9),Bs(17,"          "),ys(),ys(),vs(18,"button",10),Bs(19,"Enregistrer "),ys(),ys(),ys(),ys()),2&t&&(qi(4),ms("formGroup",e.bookForm),qi(14),ms("disabled",e.bookForm.invalid))},directives:[zm,om,Qm,Lp,im,Ym],styles:[""]}),t})();const Dj=["localVideo"];function jj(t,e){if(1&t&&(vs(0,"h5"),Bs(1),ys()),2&t){const t=ks();qi(1),Hs(t.localPeerId)}}function Lj(t,e){if(1&t&&(vs(0,"h5"),Bs(1),ys()),2&t){const t=ks();qi(1),Hs(t.name.value)}}function Mj(t,e){if(1&t&&(vs(0,"div",5),bs(1,"app-peer",17),ys()),2&t){const t=e.$implicit,n=ks();qi(1),ms("roomId",n.roomId)("localPeerId",n.localPeerId)("peerId",t.id)}}let Fj=(()=>{class t{constructor(t){this.route=t,this.name=new Fm(""),this.localStream=null,this.peers=[],this.page=[],this.name.valueChanges.subscribe(t=>{console.log(t),console.log("Name change "+this.name.value),ng.a.database().ref(`/rooms/${this.roomId}/${this.localPeerId}`).child("name").set(this.name.value)}),this.name.registerOnChange(()=>{})}unloadHandler(t){console.log("unloadHandler"),this.doHangUp()}beforeUnloadHandler(t){console.log("beforeUnloadHandler"),this.doHangUp()}ngOnInit(){this.roomId=this.route.snapshot.paramMap.get("id")}ngAfterViewInit(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(t=>{this.localStream=t,this.localVideoRef.nativeElement.muted=!0,this.localVideoRef.nativeElement.srcObject=t,this.join()})}ngOnDestroy(){this.doHangUp()}removePeer(t){this.undisplayPeer(t);for(var e=0;e<this.peers.length;e++)this.peers[e].id===t&&this.peers.splice(e,1);console.log(`Removed Peer<${t}>`)}undisplayPeer(t){for(var e=0;e<this.page.length;e++)if(this.page[e].id===t){const t=this.page.splice(e,1);t[0].rtcPeerConnection&&(console.log(`CLOSING RTCPeerConnection for removed PeerPeer<${t[0].id}>`),t[0].rtcPeerConnection.close())}}displayPeer(e){this.page.length>=3&&this.undisplayPeer(this.page[this.page.length-1].id),this.page.push(e),ng.a.database().ref(`/rooms/${this.roomId}/${e.id}/${this.localPeerId}/offer`).on("value",n=>{const r=n.val();if(null==r)return void console.log("OFFER : NULL");console.log(`Peer<${e.id}> OFFER from ${this.localPeerId} : `,r);const i=new RTCPeerConnection(t.configuration);e.rtcPeerConnection=i,t.registerPeerConnectionListeners(i),this.localStream.getTracks().forEach(t=>{console.log(`Peer<${e.id}> track`,t),i.addTrack(t,this.localStream)}),i.addEventListener("icecandidate",t=>{t.candidate?(console.log(`Peer<${e.id}> Got candidate: `,t.candidate),ng.a.database().ref("/rooms").child(this.roomId).child(this.localPeerId).child(e.id).child("calleeICE").push().set(t.candidate.toJSON())):console.log(`Peer<${e.id}> Got final candidate!`)}),i.setRemoteDescription(r).then(()=>{i.createAnswer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(t=>{console.log(`Peer<${e.id}> setLocalDescription:`,t),i.setLocalDescription(t);const n={type:t.type,sdp:t.sdp};ng.a.database().ref("/rooms").child(this.roomId).child(e.id).child(this.localPeerId).child("answer").update(n).then(()=>{console.log(`Peer<${e.id}> DB ANSWER. Room ID: <${this.roomId}>`)}),ng.a.database().ref("/rooms").child(this.roomId).child(e.id).child(this.localPeerId).child("callerICE").on("child_added",t=>{console.log("callerICE",t.val()),i.addIceCandidate(new RTCIceCandidate(t.val()))})})})})}listen(){ng.a.database().ref("/rooms").child(this.roomId).child("peers").on("child_removed",t=>{const e=t.val();console.log(`Child ${e.id} removed`),this.removePeer(e.id),ng.a.database().ref("/rooms").child(this.roomId).child(this.localPeerId).child(e.id).remove()}),ng.a.database().ref("/rooms").child(this.roomId).child("peers").on("child_added",t=>{const e=t.val();console.log("PEER",e),e.id!==this.localPeerId&&(this.peers.push(e),this.displayPeer(e))})}static uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}capture(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(t=>{this.localStream=t,this.localVideoRef.nativeElement.muted=!0,this.localVideoRef.nativeElement.srcObject=t})}join(){const e=this.roomId;console.log(`::join(${e})`);const n=t.uuidv4();this.localPeerId=n,console.log(`_peerId=(${n})`),ng.a.database().ref("/rooms").child(e).child("peers").push().set({id:n}),this.listen()}static deletePeerFromDBList(t,e){ng.a.database().ref("/rooms").child(t).child("peers").orderByKey().once("value").then(n=>{n.forEach(n=>{var r=n.key;if(n.val().id===e)return ng.a.database().ref("/rooms").child(t).child("peers").child(r).remove(),console.log(`Removed Peer<${e}> at key ${r}`),!0})})}doHangUp(){for(this.localStream&&this.localStream.getTracks().forEach(t=>{t.stop()}),this.localVideoRef.nativeElement.srcObject=null;this.peers.length;){const t=this.peers.pop();t.rtcPeerConnection&&(console.log("CLOSING RTCPeerConnection for "+t.id),t.rtcPeerConnection.close())}this.roomId&&this.localPeerId&&(t.deletePeerFromDBList(this.roomId,this.localPeerId),ng.a.database().ref("/rooms").child(this.roomId).child(this.localPeerId).remove()),this.roomId&&ng.a.database().ref("/rooms").child(this.roomId).child("peers").off(),this.localPeerId=null}hangup(){this.doHangUp()}static registerPeerConnectionListeners(t){t.addEventListener("icegatheringstatechange",()=>{console.log("ICE gathering state changed: "+t.iceGatheringState)}),t.addEventListener("connectionstatechange",()=>{console.log("Connection state change: "+t.connectionState)}),t.addEventListener("signalingstatechange",()=>{console.log("Signaling state change: "+t.signalingState)}),t.addEventListener("iceconnectionstatechange ",()=>{console.log("ICE connection state change: "+t.iceConnectionState)})}}return t.configuration={iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10},t.\u0275fac=function(e){return new(e||t)(ps(Kf))},t.\u0275cmp=Vt({type:t,selectors:[["app-room"]],viewQuery:function(t,e){if(1&t&&Cu(Dj,!0),2&t){let t;Eu(t=ku())&&(e.localVideoRef=t.first)}},hostBindings:function(t,e){1&t&&Ss("unload",function(t){return e.unloadHandler(t)},!1,Zr)("beforeunload",function(t){return e.beforeUnloadHandler(t)},!1,Zr)},decls:24,vars:4,consts:[[1,"container-lg"],[1,"row"],[1,"col-sm"],["mat-raised-button","","color","primary",3,"click"],["id","videos",1,"row","row-cols-1","row-cols-sm-2"],[1,"col","mycard"],[1,"embed-responsive","embed-responsive-4by3"],["id","localVideo","muted","","autoplay","","playsinline",""],["localVideo",""],[1,"mycard-text"],[4,"ngIf"],[1,"row","row-cols-lg-auto","g-3","align-items-center"],[1,"col-12"],["appearance","outline"],["matInput","","placeholder","Name",3,"formControl"],["matSuffix",""],["class","col mycard",4,"ngFor","ngForOf"],[3,"roomId","localPeerId","peerId"]],template:function(t,e){1&t&&(vs(0,"div",0),vs(1,"div",1),vs(2,"div",2),vs(3,"button",3),Ss("click",function(){return e.hangup()}),Bs(4,"Hangup"),ys(),ys(),ys(),vs(5,"div",4),vs(6,"div",5),vs(7,"div",6),bs(8,"video",7,8),ys(),vs(10,"div",9),ds(11,jj,2,1,"h5",10),ds(12,Lj,2,1,"h5",10),vs(13,"form",11),vs(14,"div",12),vs(15,"mat-form-field",13),vs(16,"mat-label"),Bs(17,"Name"),ys(),bs(18,"input",14),vs(19,"mat-icon",15),Bs(20,"sentiment_very_satisfied"),ys(),vs(21,"mat-hint"),Bs(22,"Enter your name"),ys(),ys(),ys(),ys(),ys(),ys(),ds(23,Mj,2,3,"div",16),ys(),ys()),2&t&&(qi(11),ms("ngIf",!e.name.value),qi(1),ms("ngIf",e.name.value),qi(6),ms("formControl",e.name),qi(5),ms("ngForOf",e.page))},styles:[""]}),t})(),Vj=(()=>{class t{constructor(t){this.router=t}canActivate(){return new Promise((t,e)=>{ng.a.auth().onAuthStateChanged(e=>{e?t(!0):(this.router.navigate(["/auth","signin"]),t(!1))})})}}return t.\u0275fac=function(e){return new(e||t)(lr(cp))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Uj=[{path:"auth/signup",component:Ij},{path:"auth/signin",component:Oj},{path:"books",canActivate:[Vj],component:xj},{path:"books/new",canActivate:[Vj],component:Pj},{path:"books/view/:id",canActivate:[Vj],component:Rj},{path:"room/:id",component:Fj},{path:"",redirectTo:"room/"+Fj.uuidv4(),pathMatch:"full"},{path:"**",redirectTo:"room/"+Fj.uuidv4()}];let qj=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[_p.forRoot(Uj)],_p]}),t})();class Bj{}class Hj{}class zj{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof zj?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new zj;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof zj?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Kj{encodeKey(t){return Wj(t)}encodeValue(t){return Wj(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Wj(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Gj{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Kj,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Gj({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function $j(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Qj(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Jj(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Yj{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new zj),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Gj,this.urlWithParams=e}serializeBody(){return null===this.body?null:$j(this.body)||Qj(this.body)||Jj(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gj?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Jj(this.body)?null:Qj(this.body)?this.body.type||null:$j(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gj?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new Yj(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var Xj=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Zj{constructor(t,e=200,n="OK"){this.headers=t.headers||new zj,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class tL extends Zj{constructor(t={}){super(t),this.type=Xj.ResponseHeader}clone(t={}){return new tL({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class eL extends Zj{constructor(t={}){super(t),this.type=Xj.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new eL({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class nL extends Zj{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function rL(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let iL=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Yj)r=t;else{let i=void 0;i=n.headers instanceof zj?n.headers:new zj(n.headers);let o=void 0;n.params&&(o=n.params instanceof Gj?n.params:new Gj({fromObject:n.params})),r=new Yj(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Hl(r).pipe(Ah(t=>this.handler.handle(t)));if(t instanceof Yj||"events"===n.observe)return i;const o=i.pipe(nh(t=>t instanceof eL));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(I(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(I(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(I(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(I(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Gj).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,rL(n,e))}post(t,e,n={}){return this.request("POST",t,rL(n,e))}put(t,e,n={}){return this.request("PUT",t,rL(n,e))}}return t.\u0275fac=function(e){return new(e||t)(lr(Bj))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class oL{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const sL=new Bn("HTTP_INTERCEPTORS");let aL=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const uL=/^\)\]\}',?\n/;class cL{}let lL=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),hL=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new y(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new zj(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new tL({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(uL,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new eL({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new nL({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new nL({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:Xj.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:Xj.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:Xj.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(lr(cL))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const fL=new Bn("XSRF_COOKIE_NAME"),dL=new Bn("XSRF_HEADER_NAME");class pL{}let mL=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zc(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(lr(Rc),lr(Fu),lr(fL))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),gL=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(lr(pL),lr(dL))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),vL=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(sL,[]);this.chain=t.reduceRight((t,e)=>new oL(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(lr(Hj),lr(Zo))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),yL=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:gL,useClass:aL}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:fL,useValue:e.cookieName}:[],e.headerName?{provide:dL,useValue:e.headerName}:[]]}}}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[gL,{provide:sL,useExisting:gL,multi:!0},{provide:pL,useClass:mL},{provide:fL,useValue:"XSRF-TOKEN"},{provide:dL,useValue:"X-XSRF-TOKEN"}]}),t})(),bL=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[iL,{provide:Bj,useClass:vL},hL,{provide:Hj,useExisting:hL},lL,{provide:cL,useExisting:lL}],imports:[[yL.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),_L=(()=>{class t{constructor(){this.title="books",ng.a.initializeApp({apiKey:"AIzaSyDf599V3XGBNF8bPlWKHmYMdQhcDsFx9iQ",authDomain:"books-ce78f.firebaseapp.com",projectId:"books-ce78f",storageBucket:"books-ce78f.appspot.com",messagingSenderId:"377647622575",appId:"1:377647622575:web:8c2725e555b53edae2a75a",measurementId:"G-YEBD2NGZFE"})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(t,e){1&t&&(vs(0,"div"),bs(1,"router-outlet"),ys())},directives:[lp],styles:[""]}),t})();const wL=["remoteVideo"];function EL(t,e){if(1&t&&(vs(0,"h5"),Bs(1),ys()),2&t){const t=ks();qi(1),Hs(t.peerId)}}function CL(t,e){if(1&t&&(vs(0,"h5"),Bs(1),ys()),2&t){const t=ks();qi(1),Hs(t.name)}}let TL=(()=>{class t{constructor(){this.name=null,this.remoteStream=new MediaStream}ngOnInit(){console.log(`Peer<${this.peerId}> : ngOnInt ${this.roomId}/${this.localPeerId}/${this.peerId}`),this.peerConnection=new RTCPeerConnection(Fj.configuration),Fj.registerPeerConnectionListeners(this.peerConnection),ng.a.database().ref(`/rooms/${this.roomId}/${this.peerId}`).child("name").on("value",t=>{this.name=t.val()}),this.peerConnection.addEventListener("icecandidate",t=>{t.candidate?(console.log("Got candidate: ",t.candidate),ng.a.database().ref("/rooms").child(this.roomId).child(this.localPeerId).child(this.peerId).child("callerICE").push().set(t.candidate.toJSON())):console.log("Got final candidate!")}),this.peerConnection.addEventListener("track",t=>{console.log("Got remote track Event:",this.peerId,t.streams[0]),t.streams[0].getTracks().forEach(t=>{console.log("Add a track to the remoteStream:",t),this.remoteStream.addTrack(t),console.log(`Peer<${this.peerId}> number of tracks : ${this.remoteStream.getTracks().length}`)})}),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(t=>{this.peerConnection.setLocalDescription(t),console.log("Created offer:",t);const e={type:t.type,sdp:t.sdp};ng.a.database().ref("/rooms").child(this.roomId).child(this.localPeerId).child(this.peerId).child("offer").set(e).then(()=>{console.log(`New OFFER in Room<${this.roomId}> for Peer<${this.peerId}>`)}),ng.a.database().ref(`/rooms/${this.roomId}/${this.localPeerId}/${this.peerId}/answer`).on("value",t=>{const e=t.val();null!=e&&(console.log("Got remote description: ",e),this.peerConnection.currentRemoteDescription||this.peerConnection.setRemoteDescription(e).then(()=>{console.log("setRemoteDescription DONE ",e)}))},t=>{console.log("The read failed: "+t.code)}),ng.a.database().ref("/rooms").child(this.roomId).child(this.peerId).child(this.localPeerId).child("calleeICE").on("child_added",t=>{console.log("calleeICE",t.val()),this.peerConnection.addIceCandidate(new RTCIceCandidate(t.val()))})})}ngAfterViewInit(){this.remoteVideoRef.nativeElement.srcObject=this.remoteStream,this.remoteVideoRef.nativeElement.muted=!1}ngOnDestroy(){this.remoteStream&&this.remoteStream.getTracks().forEach(t=>{t.stop()}),this.remoteVideoRef.nativeElement.srcObject=null,this.peerConnection.close()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["app-peer"]],viewQuery:function(t,e){if(1&t&&Cu(wL,!0),2&t){let t;Eu(t=ku())&&(e.remoteVideoRef=t.first)}},inputs:{roomId:"roomId",localPeerId:"localPeerId",peerId:"peerId"},decls:6,vars:3,consts:[["autoplay","","playsinline","",3,"id"],["remoteVideo",""],[1,"mycard-text"],[4,"ngIf"]],template:function(t,e){1&t&&(vs(0,"div"),bs(1,"video",0,1),vs(3,"div",2),ds(4,EL,2,1,"h5",3),ds(5,CL,2,1,"h5",3),ys(),ys()),2&t&&(qi(1),Rs("id",e.peerId),qi(3),ms("ngIf",!e.name),qi(1),ms("ngIf",e.name))},directives:[rl],styles:[""]}),t})();class SL{}const IL="*";function OL(t,e){return{type:7,name:t,definitions:e,options:{}}}function kL(t,e=null){return{type:4,styles:e,timings:t}}function AL(t,e=null){return{type:2,steps:t,options:e}}function xL(t){return{type:6,styles:t,offset:null}}function NL(t,e,n){return{type:0,name:t,styles:e,options:n}}function RL(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function PL(t){Promise.resolve(null).then(t)}class DL{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){PL(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class jL{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?PL(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function LL(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ML(t){switch(t.length){case 0:return new DL;case 1:return t[0];default:return new jL(t)}}function FL(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case IL:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function VL(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&UL(n,"start",t)));break;case"done":t.onDone(()=>r(n&&UL(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&UL(n,"destroy",t)))}}function UL(t,e,n){const r=n.totalTime,i=qL(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function qL(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function BL(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function HL(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let zL=(t,e)=>!1,KL=(t,e)=>!1,WL=(t,e,n)=>[];const GL=LL();(GL||"undefined"!=typeof Element)&&(zL=(t,e)=>t.contains(e),KL=(()=>{if(GL||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):KL}})(),WL=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let $L=null,QL=!1;const JL=KL,YL=zL,XL=WL;let ZL=(()=>{class t{validateStyleProperty(t){return function(t){$L||($L=("undefined"!=typeof document?document.body:null)||{},QL=!!$L.style&&"WebkitAppearance"in $L.style);let e=!0;return $L.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in $L.style,!e&&QL)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in $L.style),e}(t)}matchesElement(t,e){return JL(t,e)}containsElement(t,e){return YL(t,e)}query(t,e,n){return XL(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new DL(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),tM=(()=>{class t{}return t.NOOP=new ZL,t})();const eM="ng-enter",nM="ng-leave",rM="ng-trigger",iM=".ng-trigger",oM="ng-animating",sM=".ng-animating";function aM(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:uM(parseFloat(e[1]),e[2])}function uM(t,e){switch(e){case"s":return 1e3*t;default:return t}}function cM(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=uM(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=uM(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function lM(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function hM(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else lM(t,n);return n}function fM(t,e,n){return n?e+":"+n+";":""}function dM(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=fM(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=fM(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function pM(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=EM(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),LL()&&dM(t))}function mM(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=EM(e);t.style[n]=""}),LL()&&dM(t))}function gM(t){return Array.isArray(t)?1==t.length?t[0]:AL(t):t}const vM=new RegExp("{{\\s*(.+?)\\s*}}","g");function yM(t){let e=[];if("string"==typeof t){let n;for(;n=vM.exec(t);)e.push(n[1]);vM.lastIndex=0}return e}function bM(t,e,n){const r=t.toString(),i=r.replace(vM,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function _M(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const wM=/-+([a-z0-9])/g;function EM(t){return t.replace(wM,(...t)=>t[1].toUpperCase())}function CM(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}const TM="*";function SM(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(kM(i,s)),"<"!=o[0]||i==TM&&s==TM||e.push(kM(s,i))}(t,n,e)):n.push(t),n}const IM=new Set(["true","1"]),OM=new Set(["false","0"]);function kM(t,e){const n=IM.has(t)||OM.has(t),r=IM.has(e)||OM.has(e);return(i,o)=>{let s=t==TM||t==i,a=e==TM||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?IM.has(t):OM.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?IM.has(e):OM.has(e)),s&&a}}const AM=new RegExp("s*:selfs*,?","g");function xM(t,e,n){return new NM(t).build(e,n)}class NM{constructor(t){this._driver=t}build(t,e){const n=new RM(e);return this._resetContextStyleTimingState(n),CM(this,gM(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(PM(t)){const e=t;Object.keys(e).forEach(t=>{yM(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=_M(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=CM(this,gM(t.animation),e);return{type:1,matchers:SM(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:DM(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>CM(this,t,e)),options:DM(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=CM(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:DM(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return jM(cM(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=jM(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||cM(r,e),jM(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:xL({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=xL(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==IL?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(PM(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=yM(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(PM(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(PM(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=f+d.delay+s,d.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:CM(this,gM(t.animation),e),options:DM(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:DM(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:DM(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(AM,"")),[t=t.replace(/@\*/g,iM).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,sM),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,BL(e.collectedStyles,e.currentQuerySelector,{});const s=CM(this,gM(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:DM(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:cM(t.timings,e.errors,!0);return{type:12,animation:CM(this,gM(t.animation),e),timings:n,options:null}}}class RM{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function PM(t){return!Array.isArray(t)&&"object"==typeof t}function DM(t){var e;return t?(t=lM(t)).params&&(t.params=(e=t.params)?lM(e):null):t={},t}function jM(t,e,n){return{duration:t,delay:e,easing:n}}function LM(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class MM{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const FM=new RegExp(":enter","g"),VM=new RegExp(":leave","g");function UM(t,e,n,r,i,o={},s={},a,u,c=[]){return(new qM).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class qM{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new MM;const l=new HM(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),CM(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[LM(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?aM(n.duration):null,o=null!=n.delay?aM(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),CM(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=BM);const t=aM(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>CM(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?aM(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),CM(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return cM(e.params?bM(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?aM(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=BM);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),CM(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;CM(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const BM={};class HM{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=BM,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new zM(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=aM(n.duration)),null!=n.delay&&(r.delay=aM(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=bM(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new HM(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=BM,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new KM(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(FM,"."+this._enterClassName)).replace(VM,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class zM{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new zM(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||IL,this._currentKeyframe[t]=IL}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=IL})):hM(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=bM(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:IL),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=hM(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==IL&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?_M(t.values()):[],o=e.size?_M(e.values()):[];if(n){const t=r[0],e=lM(t);t.offset=0,e.offset=1,r=[t,e]}return LM(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class KM extends zM{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=hM(t[0],!1);a.offset=0,i.push(a);const u=hM(t[0],!1);u.offset=WM(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=hM(t[r],!1);s.offset=WM((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return LM(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function WM(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class GM{}class $M extends GM{normalizePropertyName(t,e){return EM(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(QM[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const QM=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function JM(t,e,n,r,i,o,s,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}const YM={};class XM{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||YM,f=this.buildStyles(n,s&&s.params||YM,l),d=a&&a.params||YM,p=this.buildStyles(r,d,l),m=new Set,g=new Map,v=new Map,y="void"===r,b={params:Object.assign(Object.assign({},h),d)},_=c?[]:UM(t,e,this.ast.animation,i,o,f,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return JM(e,this._triggerName,n,r,y,f,p,[],[],g,v,w,l);_.forEach(t=>{const n=t.element,r=BL(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=BL(v,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const E=_M(m.values());return JM(e,this._triggerName,n,r,y,f,p,_,E,g,v,w)}}class ZM{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=lM(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=bM(o,r,e)),n[t]=o})}}),n}}class tF{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new ZM(t.style,t.options&&t.options.params||{})}),eF(this.states,"true","1"),eF(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new XM(t,e,this.states))}),this.fallbackTransition=new XM(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function eF(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const nF=new MM;class rF{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=xM(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=FL(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=UM(this._driver,e,i,eM,nM,{},{},n,nF,r),o.forEach(t=>{const e=BL(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,IL)})});const a=ML(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,r){const i=qL(e,"","","");return VL(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const iF="ng-animate-queued",oF="ng-animate-disabled",sF=".ng-animate-disabled",aF=[],uF={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},cF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class lF{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=lM(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const hF="void",fF=new lF(hF);class dF{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,_F(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=BL(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=BL(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(_F(t,rM),_F(t,"ng-trigger-"+e),a[e]=fF),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new mF(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(_F(t,rM),_F(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new lF(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=fF),u.value!==hF&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{mM(t,n),pM(t,r)})}return}const c=BL(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(_F(t,iF),o.onStart(()=>{wF(t,iF)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,iM,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,hF,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&ML(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(t)[r]||fF,s=new lF(hF),a=new mF(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==uF||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){_F(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=qL(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,VL(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class pF{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new dF(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(gF(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!gF(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),_F(t,oF)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),wF(t,oF))}removeNode(t,e,n,r){if(gF(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return gF(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,iM,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,sM,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ML(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=uF,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,sF)&&this.markElementAsDisabled(t,!1),this.driver.query(t,sF,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)_F(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?ML(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new MM,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=bF(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n=eM+p++;d.set(e,n),t.forEach(t=>_F(t,n))});const m=[],g=new Set,v=new Set;for(let x=0;x<this.collectedLeaveElements.length;x++){const t=this.collectedLeaveElements[x],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):v.add(t))}const y=new Map,b=bF(h,Array.from(g));b.forEach((t,e)=>{const n=nM+p++;y.set(e,n),t.forEach(t=>_F(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>wF(t,n))}),b.forEach((t,e)=>{const n=y.get(e);t.forEach(t=>wF(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let x=this._namespaceList.length-1;x>=0;x--)this._namespaceList[x].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=y.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>mM(i,p.fromStyles)),e.onDestroy(()=>pM(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>mM(i,p.fromStyles)),e.onDestroy(()=>pM(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>BL(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,C=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{BL(E,e,[]).push(t),t.destroy()})});const T=m.filter(t=>TF(t,a,u)),S=new Map;yF(S,this.driver,v,u,IL).forEach(t=>{TF(t,a,u)&&T.push(t)});const I=new Map;f.forEach((t,e)=>{yF(I,this.driver,new Set(t),a,"!")}),T.forEach(t=>{const e=S.get(t),n=I.get(t);S.set(t,Object.assign(Object.assign({},e),n))});const O=[],k=[],A={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>pM(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=A;if(C.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>C.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,E,i,I,S);if(o.setRealPlayer(n),t===A)O.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=ML(e)),r.push(o)}}else mM(e,s.fromStyles),o.onDestroy(()=>pM(e,s.toStyles)),k.push(o),c.has(e)&&r.push(o)}),k.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=ML(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let x=0;x<m.length;x++){const t=m[x],e=t.__ng_removed;if(wF(t,nM),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,sM,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?EF(this,t,r):this.processLeaveNode(t)}return m.length=0,O.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),O}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==hF;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=BL(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}mM(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new DL(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return CF(t,e),e}((n.get(h)||aF).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=o.get(h),v=FL(0,this._normalizer,0,e.keyframes,m,g),y=this._buildPlayer(e,v,p);if(e.subTimeline&&r&&l.add(h),d){const e=new mF(t,s,h);e.setRealPlayer(y),u.push(e)}return y});u.forEach(t=>{BL(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>_F(t,oM));const f=ML(h);return f.onDestroy(()=>{c.forEach(t=>wF(t,oM)),pM(a,e.toStyles)}),l.forEach(t=>{BL(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new DL(t.duration,t.delay)}}class mF{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new DL,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>VL(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){BL(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function gF(t){return t&&1===t.nodeType}function vF(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function yF(t,e,n,r,i){const o=[];n.forEach(t=>o.push(vF(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=cF,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>vF(t,o[a++])),s}function bF(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function _F(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function wF(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function EF(t,e,n){ML(n).onDone(()=>t.processLeaveNode(e))}function CF(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof jL?CF(r.players,e):e.push(r)}}function TF(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class SF{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new pF(t,e,n),this._timelineEngine=new rF(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=xM(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new tF(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=HL(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=HL(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let IF=(()=>{class t extends SL{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:Ct.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?AL(t):t;return AF(this._renderer,null,e,"register",[n]),new OF(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(lr(ma),lr(Rc))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class OF extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new kF(this._id,t,e||{},this._renderer)}}class kF{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return AF(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function AF(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const xF="@",NF="@.disabled";let RF=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new PF("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new DF(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(lr(ma),lr(SF),lr(Zu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class PF{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==xF&&e==NF?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class DF extends PF{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==xF?"."==e.charAt(1)&&e==NF?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==xF){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=xF&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let jF=(()=>{class t extends SF{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(lr(Rc),lr(tM),lr(GM))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const LF=new Bn("AnimationModuleType"),MF=[{provide:tM,useClass:ZL},{provide:LF,useValue:"NoopAnimations"},{provide:SL,useClass:IF},{provide:GM,useFactory:function(){return new $M}},{provide:SF,useClass:jF},{provide:ma,useFactory:function(t,e,n){return new RF(t,e,n)},deps:[kl,SF,Zu]}];let FF=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:MF,imports:[Bl]}),t})();function VF(t){return null!=t&&""+t!="false"}function UF(t){return t instanceof pa?t.nativeElement:t}class qF extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class BF extends qF{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(Ex){n=!0,r=!!Ex&&Ex||new Error(Ex)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let HF=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class zF extends HF{constructor(t,e=HF.now){super(t,()=>zF.delegate&&zF.delegate!==this?zF.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return zF.delegate&&zF.delegate!==this?zF.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const KF=new zF(BF);class WF{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new GF(t,this.dueTime,this.scheduler))}}class GF extends p{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule($F,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function $F(t){t.debouncedNext()}let QF,JF=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),YF=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=UF(t);return new y(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new C,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.\u0275fac=function(e){return new(e||t)(lr(JF))},t.\u0275prov=ut({factory:function(){return new t(lr(JF))},token:t,providedIn:"root"}),t})(),XF=(()=>{class t{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new lu,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=VF(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(function(t,e=KF){return n=>n.lift(new WF(t,e))}(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(ps(YF),ps(pa),ps(Zu))},t.\u0275dir=Kt({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),ZF=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[JF]}),t})();try{QF="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(oq){QF=!1}let tV,eV=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!QF)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(lr(Fu))},t.\u0275prov=ut({factory:function(){return new t(lr(Fu))},token:t,providedIn:"root"}),t})(),nV=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)}}),t})();const rV=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function iV(){if(tV)return tV;if("object"!=typeof document||!document)return tV=new Set(rV),tV;let t=document.createElement("input");return tV=new Set(rV.filter(e=>(t.setAttribute("type",e),t.type===e))),tV}let oV,sV;function aV(t){return function(){if(null==oV&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>oV=!0}))}finally{oV=oV||!1}return oV}()?t:!!t.capture}function uV(t){return 0===t.buttons}"undefined"!=typeof Element&&Element;const cV=new Bn("cdk-focus-monitor-default-options"),lV=aV({passive:!0,capture:!0});let hV=(()=>{class t{constructor(t,e,n,r){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=uV(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=fV(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=fV(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(t,e=!1){const n=UF(t);if(!this._platform.isBrowser||1!==n.nodeType)return Hl(null);const r=function(t){if(function(){if(null==sV){const t="undefined"!=typeof document?document.head:null;sV=!(!t||!t.createShadowRoot&&!t.attachShadow)}return sV}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject;const o={checkChildren:e,subject:new C,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(t){const e=UF(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=UF(t);r===this._getDocument().activeElement&&this._elementInfo.has(r)?this._originChanged(r,e,this._elementInfo.get(r)):(this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=fV(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);n&&(n.checkChildren||e===fV(t))&&this._originChanged(e,this._getFocusOrigin(t),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,lV),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,lV)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,lV),t.addEventListener("mousedown",this._documentMousedownListener,lV),t.addEventListener("touchstart",this._documentTouchstartListener,lV),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,lV),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,lV),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,lV),t.removeEventListener("mousedown",this._documentMousedownListener,lV),t.removeEventListener("touchstart",this._documentTouchstartListener,lV),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}}return t.\u0275fac=function(e){return new(e||t)(lr(Zu),lr(eV),lr(Rc,8),lr(cV,8))},t.\u0275prov=ut({factory:function(){return new t(lr(Zu),lr(eV),lr(Rc,8),lr(cV,8))},token:t,providedIn:"root"}),t})();function fV(t){return t.composedPath?t.composedPath()[0]:t.target}const dV="cdk-high-contrast-black-on-white",pV="cdk-high-contrast-white-on-black",mV="cdk-high-contrast-active";let gV=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(mV),t.remove(dV),t.remove(pV);const e=this.getHighContrastMode();1===e?(t.add(mV),t.add(dV)):2===e&&(t.add(mV),t.add(pV))}}}return t.\u0275fac=function(e){return new(e||t)(lr(eV),lr(Rc))},t.\u0275prov=ut({factory:function(){return new t(lr(eV),lr(Rc))},token:t,providedIn:"root"}),t})();const vV=new Bn("cdk-dir-doc",{providedIn:"root",factory:function(){return hr(Rc)}});let yV=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new lu,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(lr(vV,8))},t.\u0275prov=ut({factory:function(){return new t(lr(vV,8))},token:t,providedIn:"root"}),t})(),bV=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)}}),t})();const _V=new ba("11.0.3"),wV=new ba("11.0.3"),EV=new Bn("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let CV,TV=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return dc()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&wV.full!==_V.full&&console.warn("The Angular Material version ("+wV.full+") does not match the Angular CDK version ("+_V.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)(lr(gV),lr(EV,8),lr(Rc))},imports:[[bV],bV]}),t})();function SV(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=VF(t)}}}function IV(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),e&&this._elementRef.nativeElement.classList.add("mat-"+e),this._color=e)}}}function OV(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=VF(t)}}}function kV(t){return class extends t{constructor(...t){super(...t),this.errorState=!1,this.stateChanges=new C}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}try{CV="undefined"!=typeof Intl}catch(oq){CV=!1}let AV=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();class xV{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const NV={enterDuration:450,exitDuration:400},RV=aV({passive:!0}),PV=["mousedown","touchstart"],DV=["mouseup","mouseleave","touchend","touchcancel"];class jV{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=UF(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},NV),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,r),s=t-r.left,a=e-r.top,u=i.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=s-o+"px",c.style.top=a-o+"px",c.style.height=2*o+"px",c.style.width=2*o+"px",null!=n.color&&(c.style.backgroundColor=n.color),c.style.transitionDuration=u+"ms",this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const l=new xV(this,c,n);return l.state=0,this._activeRipples.add(l),n.persistent||(this._mostRecentTransientRipple=l),this._runTimeoutOutsideZone(()=>{const t=l===this._mostRecentTransientRipple;l.state=1,n.persistent||t&&this._isPointerDown||l.fadeOut()},u),l}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},NV),t.config.animation);n.style.transitionDuration=r.exitDuration+"ms",n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=UF(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(PV))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(DV),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=uV(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,RV)})})}_removeTriggerEvents(){this._triggerElement&&(PV.forEach(t=>{this._triggerElement.removeEventListener(t,this,RV)}),this._pointerUpEventsRegistered&&DV.forEach(t=>{this._triggerElement.removeEventListener(t,this,RV)}))}}const LV=new Bn("mat-ripple-global-options");let MV=(()=>{class t{constructor(t,e,n,r,i){this._elementRef=t,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new jV(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(ps(pa),ps(Zu),ps(eV),ps(LV,8),ps(LF,8))},t.\u0275dir=Kt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&Ms("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),FV=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[TV,nV],TV]}),t})();function VV(t,e,n,i){return r(n)&&(i=n,n=void 0),i?VV(t,e,n).pipe(I(t=>u(t)?i(...t):i(t))):new y(r=>{UV(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function UV(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)UV(t[o],e,n,r,i)}r.add(o)}function qV(t){return e=>e.lift(new BV(t))}class BV{constructor(t){this.notifier=t}call(t,e){const n=new HV(t),r=V(this.notifier,new M(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class HV extends F{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const zV=["underline"],KV=["connectionContainer"],WV=["inputContainer"],GV=["label"];function $V(t,e){1&t&&(_s(0),vs(1,"div",14),bs(2,"div",15),bs(3,"div",16),bs(4,"div",17),ys(),vs(5,"div",18),bs(6,"div",15),bs(7,"div",16),bs(8,"div",17),ys(),ws())}function QV(t,e){1&t&&(vs(0,"div",19),Ns(1,1),ys())}function JV(t,e){if(1&t&&(_s(0),Ns(1,2),vs(2,"span"),Bs(3),ys(),ws()),2&t){const t=ks(2);qi(3),Hs(t._control.placeholder)}}function YV(t,e){1&t&&Ns(0,3,["*ngSwitchCase","true"])}function XV(t,e){1&t&&(vs(0,"span",23),Bs(1," *"),ys())}function ZV(t,e){if(1&t){const t=Es();vs(0,"label",20,21),Ss("cdkObserveContent",function(){return Ne(t),ks().updateOutlineGap()}),ds(2,JV,4,1,"ng-container",12),ds(3,YV,1,0,"ng-content",12),ds(4,XV,2,0,"span",22),ys()}if(2&t){const t=ks();Ms("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),ms("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),hs("for",t._control.id)("aria-owns",t._control.id),qi(2),ms("ngSwitchCase",!1),qi(1),ms("ngSwitchCase",!0),qi(1),ms("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function tU(t,e){1&t&&(vs(0,"div",24),Ns(1,4),ys())}function eU(t,e){if(1&t&&(vs(0,"div",25,26),bs(2,"span",27),ys()),2&t){const t=ks();qi(2),Ms("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function nU(t,e){1&t&&(vs(0,"div"),Ns(1,5),ys()),2&t&&ms("@transitionMessages",ks()._subscriptAnimationState)}function rU(t,e){if(1&t&&(vs(0,"div",31),Bs(1),ys()),2&t){const t=ks(2);ms("id",t._hintLabelId),qi(1),Hs(t.hintLabel)}}function iU(t,e){if(1&t&&(vs(0,"div",28),ds(1,rU,2,2,"div",29),Ns(2,6),bs(3,"div",30),Ns(4,7),ys()),2&t){const t=ks();ms("@transitionMessages",t._subscriptAnimationState),qi(1),ms("ngIf",t.hintLabel)}}const oU=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],sU=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],aU=new Bn("MatError"),uU={transitionMessages:OL("transitionMessages",[NL("enter",xL({opacity:1,transform:"translateY(0%)"})),RL("void => enter",[xL({opacity:0,transform:"translateY(-100%)"}),kL("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let cU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Kt({type:t}),t})(),lU=0;const hU=new Bn("MatHint");let fU=(()=>{class t{constructor(){this.align="start",this.id="mat-hint-"+lU++}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Kt({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(t,e){2&t&&(hs("id",e.id)("align",null),Ms("mat-form-field-hint-end","end"===e.align))},inputs:{align:"align",id:"id"},features:[aa([{provide:hU,useExisting:t}])]}),t})(),dU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Kt({type:t,selectors:[["mat-label"]]}),t})(),pU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Kt({type:t,selectors:[["mat-placeholder"]]}),t})();const mU=new Bn("MatPrefix"),gU=new Bn("MatSuffix");let vU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Kt({type:t,selectors:[["","matSuffix",""]],features:[aa([{provide:gU,useExisting:t}])]}),t})(),yU=0;class bU{constructor(t){this._elementRef=t}}const _U=IV(bU,"primary"),wU=new Bn("MAT_FORM_FIELD_DEFAULT_OPTIONS"),EU=new Bn("MatFormField");let CU=(()=>{class t extends _U{constructor(t,e,n,r,i,o,s,a){super(t),this._elementRef=t,this._changeDetectorRef=e,this._dir=r,this._defaults=i,this._platform=o,this._ngZone=s,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new C,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+yU++,this._labelId="mat-form-field-label-"+yU++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=i&&i.appearance?i.appearance:"legacy",this._hideRequiredMarker=!(!i||null==i.hideRequiredMarker)&&i.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=VF(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-"+t.controlType),t.stateChanges.pipe(Ch(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(qV(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(qV(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),K(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Ch(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Ch(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(qV(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,VV(this._label.nativeElement,"transitionend").pipe(bh(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&t.push(...this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const r=this._connectionContainerRef.nativeElement,i=r.querySelectorAll(".mat-form-field-outline-start"),o=r.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const i=r.getBoundingClientRect();if(0===i.width&&0===i.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const o=this._getStartEnd(i),s=t.children,a=this._getStartEnd(s[0].getBoundingClientRect());let u=0;for(let t=0;t<s.length;t++)u+=s[t].offsetWidth;e=Math.abs(a-o)-5,n=u>0?.75*u+10:0}for(let s=0;s<i.length;s++)i[s].style.width=e+"px";for(let s=0;s<o.length;s++)o[s].style.width=n+"px";this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const e=t.getRootNode();return e&&e!==t}return document.documentElement.contains(t)}}return t.\u0275fac=function(e){return new(e||t)(ps(pa),ps(Ma),ps(pa),ps(yV,8),ps(wU,8),ps(eV),ps(Zu),ps(LF,8))},t.\u0275cmp=Vt({type:t,selectors:[["mat-form-field"]],contentQueries:function(t,e,n){if(1&t&&(Su(n,cU,!0),Iu(n,cU,!0),Su(n,dU,!0),Iu(n,dU,!0),Su(n,pU,!0),Su(n,aU,!0),Su(n,hU,!0),Su(n,mU,!0),Su(n,gU,!0)),2&t){let t;Eu(t=ku())&&(e._controlNonStatic=t.first),Eu(t=ku())&&(e._controlStatic=t.first),Eu(t=ku())&&(e._labelChildNonStatic=t.first),Eu(t=ku())&&(e._labelChildStatic=t.first),Eu(t=ku())&&(e._placeholderChild=t.first),Eu(t=ku())&&(e._errorChildren=t),Eu(t=ku())&&(e._hintChildren=t),Eu(t=ku())&&(e._prefixChildren=t),Eu(t=ku())&&(e._suffixChildren=t)}},viewQuery:function(t,e){if(1&t&&(Cu(zV,!0),n=KV,!0,Tu(xe(),Ae(),n,true,undefined,!0),Cu(WV,!0),Cu(GV,!0)),2&t){let t;Eu(t=ku())&&(e.underlineRef=t.first),Eu(t=ku())&&(e._connectionContainerRef=t.first),Eu(t=ku())&&(e._inputContainerRef=t.first),Eu(t=ku())&&(e._label=t.first)}var n},hostAttrs:[1,"mat-form-field"],hostVars:44,hostBindings:function(t,e){2&t&&Ms("mat-form-field-appearance-standard","standard"==e.appearance)("mat-form-field-appearance-fill","fill"==e.appearance)("mat-form-field-appearance-outline","outline"==e.appearance)("mat-form-field-appearance-legacy","legacy"==e.appearance)("mat-form-field-invalid",e._control.errorState)("mat-form-field-can-float",e._canLabelFloat())("mat-form-field-should-float",e._shouldLabelFloat())("mat-form-field-has-label",e._hasFloatingLabel())("mat-form-field-hide-placeholder",e._hideControlPlaceholder())("mat-form-field-disabled",e._control.disabled)("mat-form-field-autofilled",e._control.autofilled)("mat-focused",e._control.focused)("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)("ng-untouched",e._shouldForward("untouched"))("ng-touched",e._shouldForward("touched"))("ng-pristine",e._shouldForward("pristine"))("ng-dirty",e._shouldForward("dirty"))("ng-valid",e._shouldForward("valid"))("ng-invalid",e._shouldForward("invalid"))("ng-pending",e._shouldForward("pending"))("_mat-animation-noopable",!e._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[aa([{provide:EU,useExisting:t}]),es],ngContentSelectors:sU,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,e){1&t&&(xs(oU),vs(0,"div",0),vs(1,"div",1,2),Ss("click",function(t){return e._control.onContainerClick&&e._control.onContainerClick(t)}),ds(3,$V,9,0,"ng-container",3),ds(4,QV,2,0,"div",4),vs(5,"div",5,6),Ns(7),vs(8,"span",7),ds(9,ZV,5,16,"label",8),ys(),ys(),ds(10,tU,2,0,"div",9),ys(),ds(11,eU,3,4,"div",10),vs(12,"div",11),ds(13,nU,2,1,"div",12),ds(14,iU,5,2,"div",13),ys(),ys()),2&t&&(qi(3),ms("ngIf","outline"==e.appearance),qi(1),ms("ngIf",e._prefixChildren.length),qi(5),ms("ngIf",e._hasFloatingLabel()),qi(1),ms("ngIf",e._suffixChildren.length),qi(1),ms("ngIf","outline"!=e.appearance),qi(1),ms("ngSwitch",e._getDisplayedMessages()),qi(1),ms("ngSwitchCase","error"),qi(1),ms("ngSwitchCase","hint"))},directives:[rl,al,ul,XF],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[uU.transitionMessages]},changeDetection:0}),t})(),TU=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[cl,TV,ZF],TV]}),t})();const SU=aV({passive:!0});let IU=(()=>{class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Xl;const e=UF(t),n=this._monitoredElements.get(e);if(n)return n.subject;const r=new C,i="cdk-text-field-autofilled",o=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(i)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(i)&&(e.classList.remove(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!1}))):(e.classList.add(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",o,SU),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:r,unlisten:()=>{e.removeEventListener("animationstart",o,SU)}}),r}stopMonitoring(t){const e=UF(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.\u0275fac=function(e){return new(e||t)(lr(eV),lr(Zu))},t.\u0275prov=ut({factory:function(){return new t(lr(eV),lr(Zu))},token:t,providedIn:"root"}),t})(),OU=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[nV]]}),t})();const kU=new Bn("MAT_INPUT_VALUE_ACCESSOR"),AU=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let xU=0;class NU{constructor(t,e,n,r){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r}}const RU=kV(NU);let PU=(()=>{class t extends RU{constructor(t,e,n,r,i,o,s,a,u,c){super(o,r,i,n),this._elementRef=t,this._platform=e,this.ngControl=n,this._autofillMonitor=a,this._formField=c,this._uid="mat-input-"+xU++,this.focused=!1,this.stateChanges=new C,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>iV().has(t));const l=this._elementRef.nativeElement,h=l.nodeName.toLowerCase();this._inputValueAccessor=s||l,this._previousNativeValue=this.value,this.id=this.id,e.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",t=>{let e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===h,this._isTextarea="textarea"===h,this._isNativeSelect&&(this.controlType=l.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=VF(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=VF(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&iV().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=VF(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,e;const n=(null===(e=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===e?void 0:e.call(t))?null:this.placeholder;if(n!==this._previousPlaceholder){const t=this._elementRef.nativeElement;this._previousPlaceholder=n,n?t.setAttribute("placeholder",n):t.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){AU.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return t.\u0275fac=function(e){return new(e||t)(ps(pa),ps(eV),ps(nm,10),ps(Hm,8),ps(Qm,8),ps(AV),ps(kU,10),ps(IU),ps(Zu),ps(EU,8))},t.\u0275dir=Kt({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(t,e){1&t&&Ss("focus",function(){return e._focusChanged(!0)})("blur",function(){return e._focusChanged(!1)})("input",function(){return e._onInput()}),2&t&&(Ks("disabled",e.disabled)("required",e.required),hs("id",e.id)("data-placeholder",e.placeholder)("readonly",e.readonly&&!e._isNativeSelect||null)("aria-invalid",e.errorState)("aria-required",e.required.toString()),Ms("mat-input-server",e._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[aa([{provide:cU,useExisting:t}]),es,ue]}),t})(),DU=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[AV],imports:[[OU,TU,TV],OU,TU]}),t})();const jU=["*"];function LU(t){return Error(`Unable to find icon with the name "${t}"`)}function MU(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function FU(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class VU{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let UU=(()=>{class t{constructor(t,e,n,r){this._httpClient=t,this._sanitizer=e,this._errorHandler=r,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,r){return this._addSvgIconConfig(t,e,new VU(n,null,r))}addSvgIconLiteralInNamespace(t,e,n,r){const i=this._sanitizer.sanitize(Wr.HTML,n);if(!i)throw FU(n);return this._addSvgIconConfig(t,e,new VU("",i,r))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new VU(e,null,n))}addSvgIconSetLiteralInNamespace(t,e,n){const r=this._sanitizer.sanitize(Wr.HTML,e);if(!r)throw FU(e);return this._addSvgIconSetConfig(t,new VU("",r,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(Wr.RESOURCE_URL,t);if(!e)throw MU(t);const n=this._cachedIconsByUrl.get(e);return n?Hl(qU(n)):this._loadSvgIconFromConfig(new VU(t,null)).pipe(Rh(t=>this._cachedIconsByUrl.set(e,t)),I(t=>qU(t)))}getNamedSvgIcon(t,e=""){const n=BU(e,t),r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);const i=this._iconSetConfigs.get(e);return i?this._getSvgFromIconSetConfigs(t,i):(o=LU(n),new y(t=>t.error(o)));var o}ngOnDestroy(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Hl(qU(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(I(t=>qU(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);return n?Hl(n):Ap(e.filter(t=>!t.svgText).map(t=>this._loadSvgIconSetFromConfig(t).pipe(Ih(e=>{const n=this._sanitizer.sanitize(Wr.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${e.message}`)),Hl(null)})))).pipe(I(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw LU(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.svgText&&r.svgText.indexOf(t)>-1){const e=this._svgElementFromConfig(r),n=this._extractSvgIconFromSet(e,t,r.options);if(n)return n}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Rh(e=>t.svgText=e),I(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Hl(null):this._fetchIcon(t).pipe(Rh(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,n){const r=t.querySelector(`[id="${e}"]`);if(!r)return null;const i=r.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i,n);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i),n);const o=this._svgElementFromString("<svg></svg>");return o.appendChild(i),this._setSvgAttributes(o,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let r=0;r<n.length;r++){const{name:t,value:i}=n[r];"id"!==t&&e.setAttribute(t,i)}for(let r=0;r<t.childNodes.length;r++)t.childNodes[r].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[r].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:n,options:r}=t,i=null!==(e=null==r?void 0:r.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(Wr.RESOURCE_URL,n);if(!o)throw MU(n);const s=this._inProgressUrlFetches.get(o);if(s)return s;const a=this._httpClient.get(o,{responseType:"text",withCredentials:i}).pipe(jh(()=>this._inProgressUrlFetches.delete(o)),Z());return this._inProgressUrlFetches.set(o,a),a}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(BU(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){const e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}}return t.\u0275fac=function(e){return new(e||t)(lr(iL,8),lr(Fl),lr(Rc,8),lr(Jr))},t.\u0275prov=ut({factory:function(){return new t(lr(iL,8),lr(Fl),lr(Rc,8),lr(Jr))},token:t,providedIn:"root"}),t})();function qU(t){return t.cloneNode(!0)}function BU(t,e){return t+":"+e}class HU{constructor(t){this._elementRef=t}}const zU=IV(HU),KU=new Bn("mat-icon-location",{providedIn:"root",factory:function(){const t=hr(Rc),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),WU=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],GU=WU.map(t=>`[${t}]`).join(", "),$U=/^url\(['"]?#(.*?)['"]?\)$/;let QU=(()=>{class t extends zU{constructor(t,e,n,r,i){super(t),this._iconRegistry=e,this._location=r,this._errorHandler=i,this._inline=!1,this._currentIconFetch=h.EMPTY,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=VF(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let r=0;r<e.length;r++)e[r].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(GU),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<e.length;r++)WU.forEach(t=>{const i=e[r],o=i.getAttribute(t),s=o?o.match($U):null;if(s){let e=n.get(i);e||(e=[],n.set(i,e)),e.push({name:t,value:s[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[e,n]=this._splitIconName(t);e&&(this._svgNamespace=e),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,e).pipe(bh(1)).subscribe(t=>this._setSvgElement(t),t=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${e}:${n}! ${t.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(ps(pa),ps(UU),Vn("aria-hidden"),ps(KU),ps(Jr))},t.\u0275cmp=Vt({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,e){2&t&&(hs("data-mat-icon-type",e._usingFontIcon()?"font":"svg")("data-mat-icon-name",e._svgName||e.fontIcon)("data-mat-icon-namespace",e._svgNamespace||e.fontSet),Ms("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[es],ngContentSelectors:jU,decls:1,vars:0,template:function(t,e){1&t&&(xs(),Ns(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),JU=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[TV],TV]}),t})();const YU=["mat-button",""],XU=["*"],ZU=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class tq{constructor(t){this._elementRef=t}}const eq=IV(SV(OV(tq)));let nq=(()=>{class t extends eq{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of ZU)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",e){this._focusMonitor.focusVia(this._getHostElement(),t,e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(ps(pa),ps(hV),ps(LF,8))},t.\u0275cmp=Vt({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){if(1&t&&Cu(MV,!0),2&t){let t;Eu(t=ku())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(hs("disabled",e.disabled||null),Ms("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[es],attrs:YU,ngContentSelectors:XU,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(xs(),vs(0,"span",0),Ns(1),ys(),bs(2,"span",1),bs(3,"span",2)),2&t&&(qi(2),Ms("mat-button-ripple-round",e.isRoundButton||e.isIconButton),ms("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[MV],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),rq=(()=>{class t{}return t.\u0275mod=Ht({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[FV,TV],TV]}),t})(),iq=(()=>{class t{}return t.\u0275mod=Ht({type:t,bootstrap:[_L]}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[Sj,kj,Vj],imports:[[cl,Bl,qj,tg,eg,bL,FF,TU,DU,JU,rq]]}),t})();(function(t,e,n){const r=t.\u0275cmp;r.directiveDefs=()=>e.map(Ut),r.pipeDefs=()=>n.map(qt)})(Fj,[nq,rl,zm,om,Hm,CU,dU,PU,Lp,im,Gm,QU,vU,fU,el,TL],[]),function(){if(fc)throw new Error("Cannot enable prod mode after platform setup.");hc=!1}(),Ul().bootstrapModule(iq).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);